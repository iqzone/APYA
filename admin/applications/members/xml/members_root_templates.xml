<?xml version="1.0" encoding="utf-8"?>
<templates application="members" templategroups="a:5:{s:14:&quot;skin_messaging&quot;;s:5:&quot;exact&quot;;s:10:&quot;skin_mlist&quot;;s:5:&quot;exact&quot;;s:11:&quot;skin_online&quot;;s:5:&quot;exact&quot;;s:12:&quot;skin_profile&quot;;s:5:&quot;exact&quot;;s:8:&quot;skin_ucp&quot;;s:5:&quot;exact&quot;;}">
  <templategroup group="skin_messaging">
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<h3>{$this->lang->words['pm_disabled_title']}</h3>
<div class='ipsPad'>
	{$this->lang->words['your_pm_is_disabled']}
	<if test="notByAdmin:|:$this->memberData['members_disable_pm'] != 2">
	<p class='ipsForm_center'>
		<br />
		<a href="{parse url="module=messaging&amp;section=view&amp;do=enableMessenger&amp;authKey={$this->member->form_hash}" base="publicWithApp"}" class='ipsButton_secondary'>{$this->lang->words['pm_disabled_reactivate']}</a>
		<a href='{parse url="act=idx" template="act=idx" seotitle="true"  base="public"}' class='ipsButton_secondary'>{$this->lang->words['go_board_index']}</a>
		</p>
	</if>
 </div>]]></template_content>
      <template_name>messengerDisabled</template_name>
      <template_data/>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[{parse js_module="messenger"}
<script type="text/javascript">
	ipb.messenger.disabled  = {parse expression="intval($this->memberData['members_disable_pm'])"};
</script>
<if test="PMDisabled:|:$this->memberData['members_disable_pm']">
<noscript>
	{parse template="messengerDisabled" group="messaging"}
</noscript>
</if>
<div id='messenger_utilities' class='left'>
	<!-- Show topic participants -->
	<if test="hasParticipants:|:is_array( $topicParticipants ) and count( $topicParticipants )">
		<div class='ipsSideBlock' id='participants'>
			<h3 class='bar'>{$this->lang->words['participants']}</h3>
			<ul id='participants_list' class='ipsList_withminiphoto'>
				<foreach loop="participants:$topicParticipants as $memberID => $memberData">
					<li class='clearfix'>
						<if test="isMemberPartOpen:|:$memberData['member_id']"><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'></if><img src='{$memberData['pp_small_photo']}' alt='{$this->lang->words['photo']}' class='ipsUserPhoto ipsUserPhoto_mini<if test="isMemberPartFloat:|:!$memberData['member_id']"> left</if>' /><if test="isMemberPartClose:|:$memberData['member_id']"></a></if>
						<p class='list_content'>
							<if test="userIsActive:|:$memberData['map_user_active']">
								<if test="userIsStarter:|:$memberData['map_is_starter']">
									<span class='name starter'>{parse template="userHoverCard" group="global" params="$memberData"}</span>
								<else />
									<span class='name'>{parse template="userHoverCard" group="global" params="$memberData"}</span>
								</if>
								<br />
								<span class='ipsType_smaller desc'>
									<if test="messageIsDeleted:|:$memberData['_topicDeleted']">
										<em>{$this->lang->words['topic_deleted']}</em>
									<else />
										{$this->lang->words['last_read']}
										<if test="lastReadTime:|:$memberData['map_read_time']">
											{parse date="$memberData['map_read_time']" format="short"}
										<else />
											<em>{$this->lang->words['not_yet_read']}</em>
										</if>
									</if>
									<if test="notification:|:$memberData['map_ignore_notification']">
										<span class='ipsBadge ipsBadge_lightgrey right'>{$this->lang->words['msg_no_notify']}</span>
									</if>						
								</span>
								<if test="blockUserLink:|:! $memberData['map_is_starter'] AND $memberData['_canBeBlocked'] AND ($topicParticipants[ $this->memberData['member_id'] ]['map_is_starter'] OR $this->memberData['g_is_supmod']) AND ( $memberData['map_user_id'] != $this->memberData['member_id'] ) AND !$memberData['_topicDeleted']">
									<br /><a href="{parse url="module=messaging&amp;section=view&amp;do=blockParticipant&amp;topicID={$this->request['topicID']}&amp;memberID={$memberData['map_user_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}" title='{$this->lang->words['block_this_user']}' class='cancel'>{$this->lang->words['block']}</a>
								</if>
							<else />
								<if test="userIsBanned:|:$memberData['map_user_banned']">
									<span class='name blocked'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><strong>{$memberData['members_display_name_short']}</strong></a></span>
									<br />
									<span class='desc'>{$this->lang->words['user_is_blocked']}</span>
									<br />
									<if test="unbanUserLink:|:$memberData['_canBeBlocked'] AND ($topicParticipants[ $this->memberData['member_id'] ]['map_is_starter'] OR $this->memberData['g_is_supmod'])">
										<a href="{parse url="module=messaging&amp;section=view&amp;do=unblockParticipant&amp;topicID={$this->request['topicID']}&amp;memberID={$memberData['map_user_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}" title='{$this->lang->words['unblock_this_user']}' class='cancel'>{$this->lang->words['unblock']}</a>
									</if>
								<else />
									<span class='name left_convo'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><strong>{$memberData['members_display_name_short']}</strong></a></span>
									<br />
									<span class='desc'>
										<if test="topicUnavailable:|:$memberData['_topicDeleted']">
										<em>{$this->lang->words['topic_deleted']}</em>
										<else />
											<if test="systemMessage:|:$memberData['map_is_system']">
												{$this->lang->words['is_unable_part']}
											<else />
												{$this->lang->words['has_left_convo']}
											</if>
										</if>
									</span>
								</if>
							</if>
						</p>
					</li>
				</foreach>					
			</ul>
			<ul class='post_controls'>
				<li>
					<a href='{parse url="module=messaging&amp;section=view&amp;do=toggleNotifications&amp;topicID={$this->request['topicID']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}' title='{$this->lang->words['toggle_noti_title']}'>
					<if test="changeNotifications:|:$topicParticipants[ $this->memberData['member_id'] ]['map_ignore_notification']">
						{$this->lang->words['turn_noti_on']}
					<else />
						{$this->lang->words['turn_noti_off']}
					</if>
					</a>
				</li>
			</ul>
		</div>
		<if test="inviteMoreParticipants:|:$this->memberData['g_max_mass_pm'] && count( $topicParticipants ) < $this->memberData['g_max_mass_pm'] && ! $deletedTopic">
			<div id='invite_more' class='ipsSideBlock'>
				<h3>{$this->lang->words['invite_part']}</h3>
				<div id='invite_more_dialogue'>
					<form method='post' action='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=addParticipants" base="public"}'>
					<input type='hidden' name='authKey' value='{$this->member->form_hash}' />
					<input type='hidden' name='topicID' value='{$this->request['topicID']}' />
					<input type='hidden' name='st' value='{$this->request['st']}' />
					<ul><li><label for='invite_more_autocomplete'>{$this->lang->words['enter_member_names']}</label> 
					<input type='text' class='input_text' name='inviteNames' id='invite_more_autocomplete' value='{$this->request['inviteNames']}' size='38' /> 
					<br /><span class='desc'>[x]{$this->lang->words['separated_with_commas']}</span> 
					</li></ul><fieldset class='submit'><input type='submit' class='input_submit' value='{$this->lang->words['part_add']}' />  
					{$this->lang->words['or']} <a href='#' id='invite_more_cancel' class='cancel' title='{$this->lang->words['cancel']}'>{$this->lang->words['cancel']}</a></fieldset></form>
				</div>
				<div id='invite_more_default'>
					<if test="unlimitedInvites:|:$this->memberData['g_max_mass_pm'] == 0">
						<p class='desc'>{$this->lang->words['can_invite_unlimited']}</p>
						<script type='text/javascript'>
							ipb.messenger.invitesLeft = parseInt( 0 );
							ipb.messenger.nameText = ipb.lang['enter_unlimited_names'];
						</script>
					<else />
						<p class='desc'>{$this->lang->words['may_invite_upto']} <strong>{parse expression="( $this->memberData['g_max_mass_pm'] - count( $topicParticipants ) )"}</strong> {$this->lang->words['more_members']}</p>
						<script type='text/javascript'>
							ipb.messenger.invitesLeft = parseInt( {parse expression="( $this->memberData['g_max_mass_pm'] - count( $topicParticipants ) )"} );
							ipb.messenger.nameText = ipb.lang['enter_x_names'].gsub(/\[x\]/, ipb.messenger.invitesLeft);
						</script>
					</if>
					<ul class='post_controls'>
						<li id='add_participants'><a href='#' title='{$this->lang->words['add_participants']}'>{$this->lang->words['part_add']}</a></li>
					</ul>
				</div>
			</div>
		</if>
	</if>
	<div id='folder_list' class='ipsSideBlock'>
		<h3>{$this->lang->words['folders']}</h3>
		<ol id='folders'>
			<if test="myDirectories:|:count($dirData)">
				<foreach loop="dirs:$dirData as $id => $data">
					<if test="protectedFolder:|:$data['protected']">
						<li class='folder protected' id='f_{$id}'>{parse replacement="folder_{$id}"}
					<else />
						<li class='folder' id='f_{$id}'>{parse replacement="folder_generic"}
					</if>
					<a href="{parse url="module=messaging&amp;section=view&amp;do=showFolder&amp;folderID={$id}" base="publicWithApp"}" title="{$this->lang->words['go_to_folder']}" rel="folder_name">{$data['real']}</a>
					<span class='total rounded'>
						<if test="allFolder:|:$id == 'all'">
							{parse expression="intval($this->memberData['msg_count_total'])"}
						<else />
							{parse expression="intval($data['count'])"}
						</if>
					</span>
					<if test="unprotectedFolder:|:! $data['protected']">
						<span class='edit_folders' style='display: none'><a href='#' id='delete_{$id}' class='f_delete' title="{$this->lang->words['delete_folder_title']}">{parse replacement="folder_delete"}</a> <a href='#' id='empty_{$id}' class='f_empty' title="{$this->lang->words['empty_folder_title']}">{parse replacement="folder_empty"}</a></span></li>
					<else />
						<span class='edit_folders' style='display: none'><a href='#' id='empty_{$id}' class='f_empty' title="{$this->lang->words['empty_folder_title']}">{parse replacement="folder_empty"}</a></span></li>
					</if>
				</foreach>
			</if>
		</ol>
		<div class='clearfix post_controls'>
			<ul class='post_controls'>
				<li id='add_folder'><a href='#' title='{$this->lang->words['add_folder']}'>{$this->lang->words['folder_add']}</a></li>
				<li id='edit_folders'><a href='#' title='{$this->lang->words['edit_folders']}'>{$this->lang->words['folders_edit']}</a></li>
			</ul>
		</div>
		<script type='text/javascript'>
		//<!#^#|CDATA|
			ipb.messenger.folderTemplate = "<li class='folder' id='f_[id]'>{parse replacement="folder_generic"} <a href='{parse url="module=messaging&amp;section=view&amp;do=showFolder&amp;folderID=[id]" base="publicWithApp"}' title='{$this->lang->words['go_to_folder']}' rel='folder_name'>[name]</a> <span class='total rounded'>[total]</span><span class='edit_folders' style='display: none'><a href='#' id='delete_[id]' class='f_delete' title='{$this->lang->words['delete_folder_title']}'>{parse replacement="folder_delete"}</a> <a href='#' id='empty_[id]' class='f_empty' title='{$this->lang->words['empty_folder_title']}'>{parse replacement="folder_empty"}</a></span></li>";
		//|#^#]>
		</script>
	</div>
	<if test="storageBar:|:$this->memberData['g_max_messages'] > 0">
		<div id='space_allowance' class='ipsSideBlock'>
			<h3>{$this->lang->words['storage']}</h3>
			<p>{$this->lang->words['your_messenger_storage']}</p>
			<p class='progress_bar' title='{parse expression="sprintf( $this->lang->words['pmpc_full_string'], $totalData['full_percent'] )"}' <if test="almostFull:|:$totalData['full_percent'] > 80">class='limit'</if>>
				<span style='width: {$totalData['full_percent']}%'>{$totalData['full_percent']}%</span>
			</p>
			<p>
				<span class='desc'>{$totalData['full_percent']}% {$this->lang->words['of_your_quota']} ({$this->memberData['g_max_messages']} {$this->lang->words['messages']})</span>
			</p>
		</div>
	</if>
	<div id='message_search' class='ipsSideBlock'>
		<h3>{$this->lang->words['search_messages']}</h3>
		<form action='{$this->settings['base_url']}app=members&amp;module=messaging&amp;section=search' method='post'>
			<fieldset>
				<input type='text' name='searchFor' class='input_text' size='15' style='width: 60%' /> <input type='submit' class='input_submit' value='{$this->lang->words['jmp_go']}' />
			</fieldset>
		</form>
	</div>
	<br />
	
	<a class='ipsButton_secondary cancel' href="{parse url="module=messaging&amp;section=view&amp;do=disableMessenger&amp;authKey={$this->member->form_hash}" base="publicWithApp"}"'>{$this->lang->words['disable_messenger']}</a>
	<!--<ul class='topic_buttons'>
		<li class='important'></li>
	</ul>-->
</div>
<div id='messenger_content' class='right'>
	<if test="inlineError:|:$inlineError">
	<div class='message error'>
		<h4>{$inlineError}</h4>
	</div>
	<br />
	</if>
	{$html}
</div>
<!-- end -->
<div id='pmDisabled' style='display:none'>
	{parse template="messengerDisabled" group="messaging"}
</div>
<br class='clear' />]]></template_content>
      <template_name>messengerTemplate</template_name>
      <template_data><![CDATA[$html, $jumpmenu, $dirData, $totalData=array(), $topicParticipants=array(), $inlineError='', $deletedTopic=0]]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<form id='pm_to_member_{$toMemberData['member_id']}'>
	<input type='hidden' name='toMemberID' value='{$toMemberData['member_id']}' />
	
	<fieldset class='row1'>
		<h3>{$this->lang->words['quick_send_to']} {$toMemberData['members_display_name']}</h3>
		<div id='pm_error_{$toMemberData['member_id']}'>
			<br />
			<p class='message error'></p>
		</div>
		<script type='text/javascript'>
			$('pm_error_{$toMemberData['member_id']}').hide();
		</script>
		<ul class='ipsForm ipsForm_vertical ipsPad'>
			<li class='ipsField'>
				<label for='pm_subject_{$toMemberData['member_id']}' class='ipsField_title'>{$this->lang->words['quick_subject']}</label>
				<p class='ipsField_content'>
					<input type='text' class='input_text' id='pm_subject_{$toMemberData['member_id']}' name='msg_title' size='50' tabindex='0' />
				</p>
			</li>
			<li class='ipsField'>
				<label for='pm_textarea_{$toMemberData['member_id']}' class='ipsField_title'>{$this->lang->words['quick_message']}</label>
				<p class='ipsField_content'>
					<textarea class='input_text' name='Post' tabindex='0' id='pm_textarea_{$toMemberData['member_id']}' cols='65' rows='8'></textarea>
				</p>
			</li>
		</ul>
	</fieldset>
	<fieldset class='submit'>
		<input type='submit' class='input_submit' name='send_msg' value='{$this->lang->words['quick_send_button']}' accesskey='s' tabindex='0' /> <input type='submit' class='input_submit alt use_full' name='use_full' value='{$this->lang->words['use_full_editor']}' tabindex='0' /> {$this->lang->words['or']} <a href='#' class='cancel' title='{$this->lang->words['cancel']}' id='pm_cancel_{$toMemberData['member_id']}' tabindex='0'>{$this->lang->words['cancel']}</a>
	</fieldset>
</form>]]></template_content>
      <template_name>PMQuickForm</template_name>
      <template_data>$toMemberData</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<div id='message_compose' class='post_form'>
	<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=send" base="publicWithApp"}" method="post" enctype='multipart/form-data'>
	
<if test="newTopicPreview:|:$displayData['preview']">
	<h2 class='maintitle'>{$this->lang->words['pm_preview']}</h2>
	<div class='post_wrap' id='post_preview'>
		<div class='row2' style='padding:8px'>
			<div class='post entry-content'>{$displayData['preview']}</div>
		</div>
	</div>
	<br />
</if>
<h2 class='maintitle'>{$this->lang->words['mess_new']}</h2>
<if test="newTopicError:|:is_array($displayData['errors']) AND count($displayData['errors'])">
<div class='message error'>
	<h4>{$this->lang->words['err_errors']}</h4>
	<foreach loop="newtopicerrors:$displayData['errors'] as $_error">
		<p>{$_error}</p>
	</foreach>
	<p>{$this->lang->words['pme_none_sent']}</p>
</div>
</if>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<fieldset>
			<h3 class='bar'>{$this->lang->words['pro_recips']}</h3>
			<ul>
				<li class='field'>
					<label for='entered_name'>{$this->lang->words['to_whom']}</label>
					<input type="text" class='input_text' id='entered_name' name="entered_name" size="30" value="{$displayData['name']}" tabindex="0" />
				</li>
				<if test="newTopicInvite:|:intval($this->memberData['g_max_mass_pm'])">
					<li class='field'>
						<label for='more_members'>{$this->lang->words['other_recipients']}</label>
						<input type='text' size="50" class='input_text' name='inviteUsers' value='{$displayData['inviteUsers']}' id='more_members' tabindex='0' />
						<span class='desc'>{$this->lang->words['youmay_add_to']} <strong>{$this->memberData['g_max_mass_pm']}</strong> {$this->lang->words['youmay_suffix']}</span>
					</li>
					<li class='field'>
						<label for='send_type'>{$this->lang->words['send_to_as']}</label>
						<select name='sendType' id='send_type' tabindex='0'>
							<option value='invite'<if test="formReloadInvite:|:$this->request['sendType']=='invite'"> selected='selected'</if>>{$this->lang->words['send__invite']}</option>
							<option value='copy'<if test="formReloadCopy:|:$this->request['sendType']=='copy'"> selected='selected'</if>>{$this->lang->words['send__copy']}</option>
						</select>
						<span class='desc'>
							<strong>{$this->lang->words['send__invite']}</strong> {$this->lang->words['invite__desc']}<br />
							<strong>{$this->lang->words['send__copy']}</strong> {$this->lang->words['copy__desc']}
						</span>
					</li>				
				</if>
			</ul>
		</fieldset>
		<fieldset>
			<h3 class='bar'>{$this->lang->words['pro_message']}</h3>
			<ul>
				<li class='field'>
					<label for='message_subject'>{$this->lang->words['message_subject_send']}</label>
					<input type="text" name="msg_title" id='message_subject' class='input_text' size="40" tabindex="1" maxlength="40" value="{$displayData['title']}" />
				</li>
				<li>
					{$displayData['editor']}
				</li>
			</ul>
		</fieldset>
		
		<if test="newTopicUploads:|:$displayData['uploadData']['canUpload']">
		<fieldset class='attachments'>
			{parse template="uploadForm" group="post" params="$displayData['postKey'], 'msg', $displayData['uploadData']['attach_stats'], 0"}
		</fieldset>
		</if>
		<input type='hidden' name='topicID' value="{$displayData['topicID']}" />
		<input type='hidden' name="postKey" value="{$displayData['postKey']}" />
		<input type="hidden" name="auth_key" value="{$this->member->form_hash}" />
		<fieldset class='submit'>
			<input class='input_submit' name="dosubmit" type="submit" value="{$this->lang->words['submit_send']}" tabindex="3" accesskey="s" />
			<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="preview" />
			<input class='input_submit alt' type="submit" value="{$this->lang->words['pms_send_later']}" tabindex="0" name="save" />
			{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
		</fieldset>
	</div>
</div>
</form>
</div>
{parse template="include_highlighter" group="global" params=""}
<br />]]></template_content>
      <template_name>sendNewPersonalTopicForm</template_name>
      <template_data>$displayData</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<div id='message_compose' class='post_form'>
	<if test="replyForm:|:$displayData['type'] == 'reply'">
		<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=sendReply" base="publicWithApp"}" method="post" name="REPLIER">
	<else />
		<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=sendEdit" base="publicWithApp"}" method="post" name="REPLIER">
	</if>
		<input type="hidden" name="msgID" value="{$displayData['msgID']}" />
	<input type='hidden' name='topicID' value="{$displayData['topicID']}" />
	<input type='hidden' name="postKey" value="{$displayData['postKey']}" />
	<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
	{$data['upload']}	
<if test="previewPm:|:$displayData['preview']">
	<h2 class='maintitle'>{$this->lang->words['pm_preview']}</h2>
	<div class='post_wrap' id='post_preview'>
		<div class='row2' style='padding:8px'>
			<div class='post entry-content'>{$displayData['preview']}</div>
		</div>
	</div>
	<br />
</if>
<h2 class='maintitle'>
	<if test="formHeaderText:|:$displayData['type'] == 'reply'">
		{$this->lang->words['compose_reply']}
	<else />
		{$this->lang->words['editing_message']}
	</if>
</h2>
<if test="formErrors:|:$displayData['errors']">
<div class='message error'>
	<h4>{$this->lang->words['err_errors']}</h4>
	<foreach loop="replyerrors:$displayData['errors'] as $_error">
		<p>{$_error}</p>
	</foreach>
	<p>{$this->lang->words['pme_none_sent']}</p>
</div>
</if>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<fieldset>
			<ul>
				<li>
					{$displayData['editor']}
				</li>
			</ul>
		</fieldset>
		
		<if test="attachmentForm:|:$displayData['uploadData']['canUpload']">
		<fieldset class='attachments'>
			{parse template="uploadForm" group="post" params="$displayData['postKey'], 'msg', $displayData['uploadData']['attach_stats'], $displayData['msgID'], 0"}
		</fieldset>
		</if>
		
		<fieldset class='submit'>
			<if test="replyOptions:|:$displayData['type'] == 'reply'">
				<input class='input_submit' type="submit" value="{$this->lang->words['submit_send']}" tabindex="3" accesskey="s" />
				<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="previewReply" />
				{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging&amp;do=showConversation&amp;topicID={$displayData['topicID']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
			<else />
				<input class='input_submit' type="submit" value="{$this->lang->words['save_message_button']}" tabindex="3" accesskey="s" />
				<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="previewReply" />
				{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$displayData['topicID']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
			</if>
			
		</fieldset>
	</div>
</div>
</form>
</div>
<br />]]></template_content>
      <template_name>sendReplyForm</template_name>
      <template_data>$displayData</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<if test="disablelightbox:|:!$this->settings['disable_lightbox']">
{parse template="include_lightbox" group="global" params=""}
</if>
{parse template="include_highlighter" group="global" params="1"}
{parse js_module="topic"}
<script type="text/javascript">
//<!#^#|CDATA|
	ipb.topic.inSection = 'messenger';
//|#^#]>
</script>
<div id='conversation'>
<div class='topic_controls clearfix'>
	{$topic['_pages']}
	<ul class='topic_buttons'>
		<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{$this->lang->words['compose_new']}</a></li>
 		<li class='important'><a id='pm_delete_t_{$topic['mt_id']}' href='{parse url="module=messaging&amp;section=view&amp;do=deleteConversation&amp;topicID={$topic['mt_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}'>{$this->lang->words['option__delete']}</a></li>
	</ul>
	<script type='text/javascript'>
		$('pm_delete_t_{$topic['mt_id']}').observe('click', ipb.messenger.deletePM.bindAsEventListener( this, {$topic['mt_id']} ) );
	</script>
</div>
<h2 class='maintitle'>{$topic['mt_title']}</h2>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<foreach loop="replies:$replies as $msg_id => $msg">
			<a id='msg{$msg['msg_id']}'></a>
			<div class='post_block first hentry' id='post_id_{$msg['msg_id']}'>
				<div class='post_wrap'>
					<if test="hasAuthorId:|:$members[ $msg['msg_author_id'] ]['member_id']">
						<h3 class='row2'>
					<else />
						<h3 class='guest row2'>
					</if>
							<if test="authorOnline:|:$members[ $msg['msg_author_id'] ]['member_id']">
								<span class="author vcard">{parse template="userHoverCard" group="global" params="$members[ $msg['msg_author_id'] ]"}</span>
							<else />
								{$members[ $msg['msg_author_id'] ]['members_display_name']}
							</if>
							<if test="authorIpAddress:|:$msg['_ip_address'] != ''">
								<span class='ip right ipsType_small'>({$this->lang->words['ip']}:
								<if test="authorPrivateIp:|:$members[ $msg['msg_author_id'] ]['g_access_cp']">
									<em>{$this->lang->words['ip_private']}</em>
								<else />
									<if test="accessModCP:|:$this->memberData['g_is_supmod']"><a href="{parse url="app=core&amp;module=modcp&amp;fromapp=members&amp;tab=iplookup&amp;ip={$msg['_ip_address']}" base="public"}" title='{$this->lang->words['find_info_about_ip']}'>{$msg['_ip_address']}</a><else />{$msg['_ip_address']}</if>
								</if>
								)</span>
							</if>
						</h3>
					<div class='author_info'>
						{parse template="userInfoPane" group="global" params="$members[ $msg['msg_author_id'] ], $msg_id, array()"}
					</div>
					<div class='post_body'>
						<p class='posted_info'>{$this->lang->words['pc_sent']} {parse date="$msg['msg_date']" format="long"}</p>
						<div class='post entry-content'>
							{$msg['msg_post']}
							{$msg['attachmentHtml']}
						</div>
						<if test="viewSigs:|:$this->memberData['view_sigs'] AND $members[ $msg['msg_author_id'] ]['signature']">
							{parse template="signature_separator" group="global" params="$members[ $msg['msg_author_id'] ]['signature'], $msg['msg_author_id'], IPSMember::isIgnorable( $members[ $msg['msg_author_id'] ]['member_group_id'], $members[ $msg['msg_author_id'] ]['mgroup_others'] )"}
						</if>
						<ul class='post_controls clearfix clear'>
							<if test="quickReply:|:$topic['_canReply'] AND empty( $topic['_everyoneElseHasLeft'] )">
								<li>
									<a class='ipsButton_secondary' href="{parse url="module=messaging&amp;section=send&amp;do=replyForm&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}" base="publicWithApp"}" title="{$this->lang->words['tt_reply_to_post']}">{$this->lang->words['pc_reply']}</a>
								</li>
							</if>
							<if test="reportPm:|:$topic['_canReport'] and $this->memberData['member_id']">
								<li class='report'>
									<a href='{parse url="app=core&amp;module=reports&amp;rcom=messages&amp;topicID={$this->request['topicID']}&amp;st={$this->request['st']}&amp;msg={$msg['msg_id']}" base="public"}'>{$this->lang->words['pc_report']}</a>
								</li>
							</if>
							<if test="canEdit:|:$msg['_canEdit'] === TRUE">
								<li class='post_edit' id='edit_post_{$msg['msg_id']}'>
									<a href='{parse url="module=messaging&amp;section=send&amp;do=editMessage&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}" base="publicWithApp"}' title='{$this->lang->words['edit_this_post']}'>{$this->lang->words['pc_edit']}</a>
								</li>
							</if>
							<if test="canDelete:|:$msg['_canDelete'] === TRUE && $msg['msg_is_first_post'] != 1">
								<li class='post_del' id='del_post_{$msg['msg_id']}'>
									<a href='{parse url="module=messaging&amp;section=send&amp;do=deleteReply&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}' title='{$this->lang->words['delete_this_post']}' class='delete_post'>{$this->lang->words['pc_delete']}</a>
								</li>
							</if>
						</ul>
					</div>
				</div>
			</div>
		</foreach>
	</div>
</div>
<div class='topic_controls clear'>
	{$topic['_pages']}
	<ul class='topic_buttons'>
 		<li class='non_button'><a id='email_convo_{$this->request['topicID']}' data-tooltip='{parse expression="sprintf( $this->lang->words['msg_email_convo_text'], $this->memberData['email'])"}' href='#' class='email_convo'>{$this->lang->words['msg_email_convo']}</a></li>
	</ul>
</div>
<if test="allAlone:|: ! empty( $topic['_everyoneElseHasLeft'] )">
<div class='ipsBox'>
	<div class='ipsBox_container ipsPad'>
		<h1 class='ipsType_subtitle'>{$this->lang->words['msg_all_alone_title']}</h1>
		<p>{$this->lang->words['msg_all_alone_desc']}</p>
	</div>
</div>
<else />
	<if test="canReplyEditor:|:$topic['_canReply']">
	<div class='ipsBox'>
		<div class='ipsBox_container ipsPad'>
			<h1 class='ipsType_subtitle'>{$this->lang->words['pc_fast_reply']}</h1>
			<br />
			<a href="{parse url="showuser={$this->memberData['member_id']}" seotitle="{$this->memberData['members_seo_name']}" template="showuser" base="public"}" title='{$this->lang->words['your_profile']}' class='ipsUserPhotoLink left'><img src='{$this->memberData['pp_small_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$this->memberData['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_medium' /></a>
			<div class='ipsBox_withphoto clearfix'>
				<form action='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=sendReply&amp;topicID={$topic['mt_id']}" base="public"}' method='post'>
					<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
					<input type="hidden" name="fast_reply_used" value="1" />
					<input type="hidden" name="enableemo" value="yes" />
					<input type="hidden" name="enablesig" value="yes" />
					{parse editor="msgContent" options="array( 'type' => 'full', 'minimize' => 1 )"}
					<br />
					<fieldset class='right'>
						<input type='submit' name="submit" class='input_submit' value='{$this->lang->words['pc_post_button']}' tabindex='3' accesskey='s' />&nbsp;&nbsp;<input type='submit' name="previewReply" class='input_submit alt' value='{$this->lang->words['pc_use_full_reply']}' />
					</fieldset>
				</form>
			</div>
		</div>
	</div>
	</if>
</if>
</div>
{parse template="include_highlighter" group="global" params=""}]]></template_content>
      <template_name>showConversation</template_name>
      <template_data><![CDATA[$topic, $replies, $members, $jump=""]]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<php>
foreach( $members as $id => $member )
{
	$mems[] = $member['members_display_name'];
}
$memberNames = implode( $mems, ', ' );
</php>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset={$this->settings['gb_char_set']}" />
		<title>{$topic['mt_title']}</title>
		<style type="text/css">
			* {
				font-family: Georgia, "Times New Roman", serif;
			}
			
			html #content {
				font-size: 10pt;
			}
			
			ol,ul { list-style:none; }
			
			ul.pagination {
				margin-left: -35px;
			}
			
			ul.pagination a,
			ul.pagination li.active, 
			ul.pagination li.pagejump,
			ul.pagination li.total {
				text-decoration: none;
				padding: 1px 4px 1px 0px;
				display: block;
			}
			
			ul.pagination li {
				font-size: 0.9em;	
				margin: 0 2px 0 2px;
				float: left;
			}
			
				ul.pagination li.total,
				ul.pagination li.active {
					background: none;
					border: 0;
					margin-left: 0px;
				}
			
				ul.pagination li.active {
					color: #000;
					font-size: 1em;
					font-weight: bold;
				}
				
				ul.pagination li.pagejump {
					display: none;
				}
			
			#admin_bar,
			#header,
			#footer_utilities,
			#utility_links,
			.post_mod,
			.author_info,
			.rep_bar,
			.post_controls,
			.top,
			#content_jump,
			.topic_buttons,
			.topic_options,
			h1,
			.post_id,
			h3 img,
			.ip,
			hr,
			.moderation_bar,
			.topic_jump,
			.topic_share,
			#fast_reply,
			#reputation_filter,
			.statistics,
			.rating,
			.message,
			#debug_wrapper,
			fieldset,
			.signature {
				display: none;
			}
			
			#breadcrumb {
				display: block !important;
			}
				#breadcrumb li {
					float: left;
				}
			
			.topic, .hfeed {
				clear: both;
			}
			
			.post_block {
				margin-bottom: 10pt;
				border-top: 2pt solid gray;
				line-height: 60%; 
				padding-top: 10px;
			}
			
			.posted_info {
				color: gray !important;
				font-size: 8pt !important;
				text-decoration: none !important;
				padding-bottom: 3px;
				float: right;
				margin-top: -30px;
			}
			
			span.main_topic_title {
				font-size: 1.7em;
				padding-left: 2px;
			}
			
			.post_block h3 {
				display: inline !important;
				margin: 0px 0px 10px !important;
				padding: 0px !important;
				float: left;
			}
			
			.post_block h3 a {
				color: black !important;
				text-decoration: none !important;
				font-style: normal !important;
			}
			
				.post_block .post_body a:after {
				    content: " (" attr(href) ") ";
				}
			
			.post_body {
				line-height: 100%;
				margin-top: 15px;
				clear: both;
				display: block;
				padding: 10px;
				border-top: 1pt solid #d3d3d3;
			}
			
			h1, h2, h3 {
				font-weight: bold;
			}
			
			#copyright {
				text-align: center;
				color: gray;
				font-size: 9pt;
			}
			
			a img {
				border: 0px;
			}
			
			abbr.published {
				text-decoration: none !important;
				border: 0px;
			}
		</style>
	</head>
	<body>
		<h2 class='maintitle'>{$topic['mt_title']}</h2>
		<em>
			{$this->lang->words['email_participants']} {$memberNames}
		</em>
		<br />
		<br />
		<foreach loop="replies:$replies as $msg_id => $msg">
			<div class='post_block first hentry'>
				<div class='post_wrap'>
					<h3>
						{$members[ $msg['msg_author_id'] ]['members_display_name']}
					</h3>
					<div class='post_body'>
						<p class='posted_info'>{$this->lang->words['pc_sent']} {parse date="$msg['msg_date']" format="long"}</p>
						<div class='post entry-content'>
							{$msg['msg_post']}
						</div>
					</div>
					<ul class='post_controls'>
						<li>&nbsp;</li>
					</ul>
				</div>
			</div>
		</foreach>
	</body>
</html>]]></template_content>
      <template_name>showConversationForArchive</template_name>
      <template_data>$topic, $replies, $members</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
	ipb.messenger.curFolder = '{$currentFolderID}';
</script>
<div class='topic_controls'>
{$pages}
<if test="folderNotDrafts:|:$currentFolderID != 'drafts'">
	{parse variable="folder_all" default=""}
	{parse variable="folder_all" oncondition="$this->request['folderFilter'] == 'all' OR ! $this->request['folderFilter']" value="selected='selected'"}
	{parse variable="folder_in" default=""}
	{parse variable="folder_in" oncondition="$this->request['folderFilter'] == 'in'" value="selected='selected'"}
	{parse variable="folder_sent" default=""}
	{parse variable="folder_sent" oncondition="$this->request['folderFilter'] == 'sent'" value="selected='selected'"}
</if>
<ul class='topic_buttons'>
	<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{$this->lang->words['compose_new']}</a></li>
</ul>
</div>
<div id='message_list'>
	<form action="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=multiFile&amp;cFolderID={$currentFolderID}" base="public"}" id='msgFolderForm' method="post">
		<input type="hidden" name="sort" value="{$this->request['sort']}" />
		<input type="hidden" name="st" value="{$this->request['st']}" />
		<input type="hidden" name="auth_key" value="{$this->member->form_hash}" />
		<div class='maintitle'>
			<span class='right'>
				<input type='checkbox' class='input_check' id='msg_checkall' value='1' /> &nbsp;
			</span>
			{$dirname}
		</div>
		<div class='ipsBox'>
			<div class='ipsBox_container'>
				<table class='ipb_table' id='message_table'>
					<tr class='header hide'>
						<th scope='col' class='col_m_status'>&nbsp;</th>
						<th scope='col' class='col_m_subject'>{$this->lang->words['col_topic']}</th>
						<th scope='col' class='col_m_replies short'>{$this->lang->words['col_replies']}</th>
						<th scope='col' class='col_m_date'>{$this->lang->words['col_last_message']}</th>
						<th scope='col' class='col_mod short'>&nbsp;</th>
					</tr>
					<if test="folderMessages:|:count( $messages )">
						<foreach loop="folderMessages:$messages as $id => $msg">
							<tr id='{$msg['mt_id']}' class='<if test="$msg['map_has_unread']">unread</if>'>
								<td class='col_m_photo altrow short'>
									<if test="hasStarterPhoto:|:$msg['_starterMemberData']['member_id']">
										<a href='{parse url="showuser={$msg['_starterMemberData']['member_id']}" template="showuser" seotitle="{$msg['_starterMemberData']['members_seo_name']}" base="public"}' class='ipsUserPhotoLink'>
											<img src='{$msg['_starterMemberData']['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
										</a>
									<else />
										{IPSMember::buildProfilePhoto(0,'mini')}
									</if>
								</td>
								<td class='col_m_subject'>
									<if test="folderNotifications:|:$msg['mt_is_deleted'] OR $msg['map_user_banned']">
										<span class='ipsBadge ipsBadge_red'>
											{$this->lang->words['msg_deleted']}
										</span>
									</if>
									<h4>
										<if test="$msg['map_has_unread']">
											<a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=findMessage&amp;topicID={$msg['mt_id']}&amp;msgID=__firstUnread__" base="public"}' title='{$this->lang->words['first_unread_reply']}'>{parse replacement="f_newpost"}</a>
											<strong>
										</if>
										<a href='<if test="folderDrafts:|:$currentFolderID == 'drafts'">{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;topicID={$msg['mt_id']}" base="public"}<else />{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}" base="public"}</if>' title='{$this->lang->words['msg_view_conversation']}'>
										{$msg['mt_title']}
										</a>
										<if test="$msg['map_has_unread']"></strong></if>
									</h4>
									<if test="folderNotifications:|:$msg['map_ignore_notification']">
										<span class='ipsBadge ipsBadge_lightgrey'>
											{$this->lang->words['msg_no_notify']}
										</span>
									</if>
									<br />
									<span class='desc lighter blend_links'>
										{$this->lang->words['msg_startedby']}
										<if test="folderStarter:|:$msg['_starterMemberData']['members_display_name']">
											{parse template="userHoverCard" group="global" params="$msg['_starterMemberData']"},
										<else />
											<span class='desc'>{$this->lang->words['deleted_user']},</span>
										</if>
										<span class='desc lighter blend_links'>
											{$this->lang->words['msg_sentto']}
											<if test="folderToMember:|:$msg['_toMemberData']['members_display_name']">
												{parse template="userHoverCard" group="global" params="$msg['_toMemberData']"}
											<else />
												<span class='desc'>{$this->lang->words['deleted_user']}</span>
											</if>
											<if test="folderMultipleUsers:|:$msg['_otherInviteeCount'] > 0">
												<if test="folderFixPlural:|:$msg['_otherInviteeCount'] > 1">
													<span title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_others']})</p>
												<else />
													<span title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_other']})</p>
												</if>
											</if>
										</span>
										<if test="folderNew:|:in_array( $currentFolderID, array( 'new' ) )">
											<p class='ipsType_small desc'>{$this->lang->words['folder_prefix']} {$msg['_folderName']}</p>
										</if>
									</span>	
									<if test="folderPages:|:is_array( $msg['pages'] ) AND count( $msg['pages'] )">
										<ul class='mini_pagination'>
										<foreach loop="messagePages:$msg['pages'] as $page">
												<if test="folderLastPage:|:$page['last']">
													<li><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}&amp;st={$page['st']}" base="public"}" title='{$this->lang->words['goto_page']} {$page['page']}'>{$page['page']} {$this->lang->words['_rarr']}</a></li>
												<else />
													<li><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}&amp;st={$page['st']}" base="public"}" title='{$this->lang->words['goto_page']} {$page['page']}'>{$page['page']}</a></li>
												</if>
										</foreach>
										</ul>
									</if>
								</td>
								<td class='col_m_replies desc blend_links'>
									<ul>
										<li><if test="folderBannedIndicator:|:$msg['map_user_banned']">-<else />{parse expression="sprintf( $this->lang->words['msg_xreplies'], intval( $msg['mt_replies'] ) )"}</if></li>
									</ul>
								</td>
								<td class='col_f_post'>
									<if test="hasPosterPhoto:|:$msg['_lastMsgAuthor']['member_id']">
										<a href='{parse url="showuser={$msg['_lastMsgAuthor']['member_id']}" template="showuser" seotitle="{$msg['_lastMsgAuthor']['members_seo_name']}" base="public"}' class='ipsUserPhotoLink left'>
											<img src='{$msg['_lastMsgAuthor']['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
										</a>
									<else />
										<span class='left'>{IPSMember::buildProfilePhoto(0,'mini')}</span>
									</if>
									<ul class='last_post ipsType_small'>
										<if test="folderBannedUser:|:$msg['map_user_banned']">
											<li><em>{$this->lang->words['info_not_available']}</em></li>
										<else />
											<li>{$this->lang->words['pc_by']} <if test="folderToMember:|:$msg['_lastMsgAuthor']['members_display_name']">{parse template="userHoverCard" group="global" params="$msg['_lastMsgAuthor']"}<else /><span class='desc'>{$this->lang->words['deleted_user']}</span></if></li>
										</if>
										<li class='desc'>
											<a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=findMessage&amp;topicID={$msg['mt_id']}&amp;msgID={$msg['mt_last_msg_id']}" base="public"}' title='{$this->lang->words['goto_last_post']}'>{parse date="$msg['mt_last_post_time']" format="DATE"}</a>
										</li>
									</ul>
								</td>
								<td class='col_m_mod short'>
									<input type='checkbox' class='input_check msg_check' name='msgid[{$msg['mt_id']}]' id='msg_check_{$msg['mt_id']}' />
								</td>
							</tr>
						</foreach>
					<else />
						<tr>
							<td colspan='8' class='no_messages row1'>
								{$this->lang->words['folder_no_messages_row']}
							</td>
						</tr>
					</if>
				</table>
			</div>
		</div>
		<div id='messenger_mod' class='moderation_bar rounded with_action right'>
			<select id='pm_multifile' name='method' class='input_select'>
				<optgroup label="{$this->lang->words['with_selected_opt']}">
					<option value="delete">{$this->lang->words['option__delete']}</option>
					<if test="folderMultiOptions:|:$currentFolderID != 'drafts'">
						<option value="markread">{$this->lang->words['option__markread']}</option>
						<option value="markunread">{$this->lang->words['option__markunread']}</option>
						<option value="notifyon">{$this->lang->words['option__turnon']}</option>
						<option value="notifyoff">{$this->lang->words['option__turnoff']}</option>
					</if>
				</optgroup>
				<if test="folderJumpHtml:|:$jumpFolderHTML AND $currentFolderID != 'drafts' AND $currentFolderID != 'new'">
					<optgroup label="{$this->lang->words['move_to_opt']}">
						{$jumpFolderHTML}
					</optgroup>
				</if>
			</select>
			<input type="submit" class='input_submit alt' id='folder_moderation' value="{$this->lang->words['jmp_go']}" />
		</div>
	</form>
	<div id='messenger_filter' class='left ipsPad_half'>
		<form method='post' action='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showFolder&amp;folderID={$currentFolderID}" base="public"}'>
			<label for='conversation_filter' class='desc'>{$this->lang->words['filter__show']} </label>
			<select id='conversation_filter' name='folderFilter' class='input_select'>
				<option value='' {parse variable="folder_all"}>{$this->lang->words['filter__all']}</option>
				<option value='in' {parse variable="folder_in"}>{$this->lang->words['filter__others']}</option>
				<option value='sent' {parse variable="folder_sent"}>{$this->lang->words['filters__i']}</option>
			</select>
			<input type='submit' class='input_submit alt' value='{$this->lang->words['filters__update']}' />
		</form>
	</div>
</div>
<br />
<div class='topic_controls clear clearfix'>
{$pages}
</div>]]></template_content>
      <template_name>showFolder</template_name>
      <template_data>$messages, $dirname, $pages, $currentFolderID, $jumpFolderHTML</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.messenger.curFolder = 'in';
//|#^#]>
</script>
<if test="searchError:|:$error">
	<p class='message error'>
		{$error}
	</p>
	<br />
</if>
<if test="$pages">
	<div class='topic_controls'>
	{$pages}
	</div>
	<br />
</if>
<h2 class='maintitle clear'>{$this->lang->words['your_search_results']}</h2>
<div id='message_list'>
	<div class='ipsBox'>
		<div class='ipsBox_container'>
			<table class='ipb_table' id='message_table'>
				<tr class='header hide'>
					<th scope='col' class='col_m_photo'>&nbsp;</th>
					<th scope='col' class='col_m_subject'>{$this->lang->words['col_subject']}</th>
					<th scope='col' class='col_m_replies short'>{$this->lang->words['col_replies']}</th>
					<th scope='col' class='col_m_date'>{$this->lang->words['col_last_message']}</th>
				</tr>
		
				<if test="searchMessages:|:count( $messages )">
					<foreach loop="messages:$messages as $id => $msg">
						<tr id='{$msg['mt_id']}' class='<if test="$msg['map_has_unread']">unread</if>'>
							<td class='col_m_photo altrow short'>
								<a href='{parse url="showuser={$msg['_starterMemberData']['member_id']}" template="showuser" seotitle="{$msg['_starterMemberData']['members_seo_name']}" base="public"}' class='ipsUserPhotoLink'>
									<img src='{$msg['_starterMemberData']['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
								</a>
							</td>
							<td>
								<if test="folderNotifications:|:$msg['mt_is_deleted'] OR $msg['map_user_banned']">
									<span class='ipsBadge ipsBadge_red'>
										{$this->lang->words['msg_deleted']}
									</span>
								</if>
								<h4><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}" base="public"}">{$msg['mt_title']}</a></h4><br />
								<span class='desc lighter blend_links'>
									{$this->lang->words['msg_startedby']}
									<if test="folderStarter:|:$msg['_starterMemberData']['members_display_name']">
										{parse template="userHoverCard" group="global" params="$msg['_starterMemberData']"}
									<else />
										<span class='desc'>{$this->lang->words['deleted_user']}</span>
									</if>
									<span class='desc lighter blend_links'>
										, {$this->lang->words['msg_sentto']}
										<if test="folderToMember:|:$msg['_toMemberData']['members_display_name']">
											{parse template="userHoverCard" group="global" params="$msg['_toMemberData']"}
										<else />
											<span class='desc'>{$this->lang->words['deleted_user']}</span>
										</if>
										<if test="folderMultipleUsers:|:$msg['_otherInviteeCount'] > 0">
											<if test="folderFixPlural:|:$msg['_otherInviteeCount'] > 1">
												<span title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_others']})</p>
											<else />
												<span title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_other']})</p>
											</if>
										</if>
									</span>
									<if test="folderNew:|:in_array( $currentFolderID, array( 'new' ) )">
										<p class='ipsType_small desc'>{$this->lang->words['folder_prefix']} {$msg['_folderName']}</p>
									</if>
								</span>
								<p class='ipsType_small desc'>{$this->lang->words['label_pc']} {$msg['_folderName']}</p>
							</td>
							<td class='col_m_replies desc blend_links'>
								<ul>
									<li><if test="folderBannedIndicator:|:$msg['map_user_banned']">-<else />{parse expression="sprintf( $this->lang->words['msg_xreplies'], intval( $msg['mt_replies'] ) )"}</if></li>
								</ul>
							</td>
							<td class='col_f_post'>
								<a href='{parse url="showuser={$msg['_lastMsgAuthor']['member_id']}" template="showuser" seotitle="{$msg['_lastMsgAuthor']['members_seo_name']}" base="public"}' class='ipsUserPhotoLink left'>
									<img src='{$msg['_lastMsgAuthor']['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
								</a>
								<ul class='last_post ipsType_small'>
									<if test="folderBannedUser:|:$msg['map_user_banned']">
										<li><em>{$this->lang->words['info_not_available']}</em></li>
									<else />
										<li>{$this->lang->words['pc_by']} {parse template="userHoverCard" group="global" params="$msg['_lastMsgAuthor']"}</li>
									</if>
									<li class='desc blend_links'><a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=findMessage&amp;topicID={$msg['mt_id']}&amp;msgID={$msg['mt_last_msg_id']}" base="public"}' title='{$this->lang->words['goto_last_post']}'>{parse date="$msg['mt_last_post_time']" format="DATE"}</a></li>
								</ul>
							</td>
						</tr>
					</foreach>
				<else />
					<tr>
						<td colspan='5' class='no_messages row1'>
							{$this->lang->words['no_messages_row']}
						</td>
					</tr>
				</if>
			</table>
		</div>
	</div>
</div>]]></template_content>
      <template_name>showSearchResults</template_name>
      <template_data>$messages, $pages, $error</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
  </templategroup>
  <templategroup group="skin_mlist">
    <template>
      <template_group>skin_mlist</template_group>
      <template_content><![CDATA[<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/calendar_date_select/calendar_date_select.js'></script>
{parse js_module="memberlist"}
<!-- SEARCH FORM -->
<h1 class='ipsType_pagetitle'>{$this->lang->words['mlist_header']}</h1>
<div class='topic_controls'>
	{$pages}	
	<ul class='topic_buttons'>
		<li><a href='#filters' title='{$this->lang->words['mlist_adv_filt']}' id='use_filters'>{$this->lang->words['mlist_adv_filt']}</a></li>
	</ul>
</div>
<div id='member_filters' class='general_box alt clear'>
	<form action="{parse url="app=members&amp;module=list" base="public" seotitle="false"}" method="post">
		<h3 class='bar'>{$this->lang->words['mlist_adv_filt_opt']}</h3>
	
		<ul id='filters_1'>
			<li class='field'>
				<label for='member_name'>{$this->lang->words['s_name']}</label>
				<select name="name_box" class='input_select'>
					<option value="begins"<if test="namebox_begins:|:$this->request['name_box'] == 'begins'"> selected='selected'</if>>{$this->lang->words['s_begins']}</option>
					<option value="contains"<if test="namebox_contains:|:$this->request['name_box'] == 'contains'"> selected='selected'</if>>{$this->lang->words['s_contains']}</option>
				</select>&nbsp;&nbsp;
				<input type="text" size="15" name="name" id='member_name' class='input_text' value="{parse expression="urldecode($this->request['name'])"}" />
			</li>
			<li class='field'>
				<label for='photo_only'>{$this->lang->words['photo_only']}</label>
				<input class='input_check' id='photo_only' type="checkbox" value="1" name="photoonly" <if test="photoonly:|:$defaults['photoonly']">checked='checked'</if> />
			</li>
			<if test="canFilterRate:|:$this->settings['pp_allow_member_rate']">
				<li class='field'>
					<label for='rating'>{$this->lang->words['m_rating_morethan']}</label>
					<select name='pp_rating_real' id='rating'>
						<option value='0'<if test="rating0:|:! $this->request['pp_rating_real']"> selected='selected'</if>>0</option>
						<option value='1'<if test="rating1:|:$this->request['pp_rating_real'] == 1"> selected='selected'</if>>1</option>
						<option value='2'<if test="rating2:|:$this->request['pp_rating_real'] == 2"> selected='selected'</if>>2</option>
						<option value='3'<if test="rating3:|:$this->request['pp_rating_real'] == 3"> selected='selected'</if>>3</option>
						<option value='4'<if test="rating4:|:$this->request['pp_rating_real'] == 4"> selected='selected'</if>>4</option>
					</select>
					{$this->lang->words['m_stars']}
				</li>
			</if>
			<if test="hascfields:|:count( $custom_fields->out_fields )">
				<foreach loop="customfields:$custom_fields->out_fields as $id => $field">
					<li class='field custom'>
						<label for='field_{$id}'>{$custom_fields->field_names[$id]}</label>
						{$field}
					</li>
				</foreach>
			</if>			
		</ul>
		<ul id='filters_2'>
			<li class='field'>
				<label for='signature'>{$this->lang->words['s_signature']}</label>
				<input type="text" class='input_text' size="28" id='signature' name="signature" value="{parse expression="urldecode($this->request['signature'])"}" />
			</li>
			<li class='field'>
				<label for='posts'>{$this->lang->words['s_posts']}</label>
				<select class="dropdown" name="posts_ltmt">
					<option value="lt"<if test="posts_ltmt_lt:|:$this->request['posts_ltmt'] == 'lt'"> selected='selected'</if>>{$this->lang->words['s_lessthan']}</option>
					<option value="mt"<if test="posts_ltmt_mt:|:$this->request['posts_ltmt'] == 'mt'"> selected='selected'</if>>{$this->lang->words['s_morethan']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='posts' size="15" name="posts" value="{$this->request['posts']}" />
			</li>
			<li class='field'>
				<label for='joined'>{$this->lang->words['s_joined']}</label>
				<select class="dropdown" name="joined_ltmt">
					<option value="lt"<if test="joined_ltmt_lt:|:$this->request['joined_ltmt'] == 'lt'"> selected='selected'</if>>{$this->lang->words['s_before']}</option>
					<option value="mt"<if test="joined_ltmt_mt:|:$this->request['joined_ltmt'] == 'mt'"> selected='selected'</if>>{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='joined' size="10" name="joined" value="{$this->request['joined']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='joined_date_icon' class='clickable' /> 
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>
			<li class='field'>
				<label for='last_post'>{$this->lang->words['s_lastpost']}</label>
				<select class="dropdown" name="lastpost_ltmt">
					<option value="lt"<if test="lastpost_ltmt_lt:|:$this->request['lastpost_ltmt'] == 'lt'"> selected='selected'</if>>{$this->lang->words['s_before']}</option>
					<option value="mt"<if test="lastpost_ltmt_mt:|:$this->request['lastpost_ltmt'] == 'mt'"> selected='selected'</if>>{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='last_post' size="10" name="lastpost" value="{$this->request['lastpost']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='last_post_date_icon' class='clickable' /> 
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>
			<li class='field'>
				<label for='last_visit'>{$this->lang->words['s_lastvisit']}</label>
				<select class="dropdown" name="lastvisit_ltmt">
					<option value="lt"<if test="lastvisit_ltmt_lt:|:$this->request['lastvisit_ltmt'] == 'lt'"> selected='selected'</if>>{$this->lang->words['s_before']}</option>
					<option value="mt"<if test="lastvisit_ltmt_mt:|:$this->request['lastvisit_ltmt'] == 'mt'"> selected='selected'</if>>{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='last_visit' size="10" name="lastvisit" value="{$this->request['lastvisit']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='last_visit_date_icon' class='clickable' />
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>			
		</ul>
		<fieldset class='other_filters row2 altrow'>
			<select name='filter' class='input_select'>
				<foreach loop="filter:$dropdowns['filter'] as $k => $v">
					<option value='{$k}'<if test="filterdefault:|:$k == $defaults['filter']"> selected='selected'</if>>{$v}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_by']}
			<select name='sort_key' class='input_select'>
				<foreach loop="sort_key:$dropdowns['sort_key'] as $k => $v">
					<option value='{$k}'<if test="sortdefault:|:$k == $defaults['sort_key']"> selected='selected'</if>>{$this->lang->words[ $v ]}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_in']}
			<select name='sort_order' class='input_select'>
				<foreach loop="sort_order:$dropdowns['sort_order'] as $k => $v">
					<option value='{$k}'<if test="orderdefault:|:$k == $defaults['sort_order']"> selected='selected'</if>>{$this->lang->words[ $v ]}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_with']}
			<select name='max_results' class='input_select'>
				<foreach loop="max_results:$dropdowns['max_results'] as $k => $v">
					<option value='{$k}'<if test="limitdefault:|:$k == $defaults['max_results']"> selected='selected'</if>>{$v}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_results']}
		</fieldset>
		<fieldset class='submit clear'>
			<input type="submit" value="{$this->lang->words['sort_submit']}" class="input_submit" /> {$this->lang->words['or']} <a href='#j_memberlist' title='{$this->lang->words['cancel']}' id='close_filters' class='cancel'>{$this->lang->words['cancel']}</a>
		</fieldset>
	</form>
</div>
<script type='text/javascript'>
	$('member_filters').hide();
</script>
<br />
<div class='ipsBox ipsVerticalTabbed ipsLayout ipsLayout_withleft ipsLayout_tinyleft clearfix'>
	<div class='ipsVerticalTabbed_tabs ipsVerticalTabbed_minitabs ipsLayout_left' id='mlist_tabs'>
		<ul>
			<if test="letterquickjump:|:!$this->request['quickjump']">
				<li class='active'><a href='{parse url="app=members&amp;module=list" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['members_start_with']}{$letter}'>{$this->lang->words['mlist_view_all_txt']}</a></li>
			<else />
				<li><a href='{parse url="app=members&amp;module=list" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['mlist_view_all_title']}'>{$this->lang->words['mlist_view_all_txt']}</a></li>
			</if>
			<foreach loop="chars:range(65,90) as $char">
				<if test="letterdefault:|:$letter = strtoupper(chr($char))">
					<li <if test="selected:|:strtoupper( $this->request['quickjump'] ) == $letter">class='active'</if>><a href='{parse url="{$url}&amp;quickjump={$letter}" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['mlist_view_start_title']} {$letter}'>{$letter}</a></li>
				</if>
			</foreach>
		</ul>
	</div>
	<div class='ipsVerticalTabbed_content ipsLayout_content'>
		<div class='maintitle ipsFilterbar clear clearfix'>
			<ul class='ipsList_inline left'>
				<li <if test="filtermembers:|:$this->request['sort_key'] == 'members_display_name' || !$this->request['sort_key']">class='active'</if>>
					<a href='{parse url="app=members&amp;module=list&amp;{$url}&amp;sort_key=members_display_name&amp;sort_order=asc" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['sort_by_mname']}'>{$this->lang->words['sort_by_name']}</a>
				</li>
				<li <if test="filterposts:|:$this->request['sort_key'] == 'posts'">class='active'</if>>
					<a href='{parse url="app=members&amp;module=list&amp;{$url}&amp;sort_key=posts&amp;sort_order=desc" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['sort_by_posts']}'>{$this->lang->words['pcount']}</a>
				</li>
				<li <if test="filterjoined:|:$this->request['sort_key'] == 'joined'">class='active'</if>>
					<a href='{parse url="app=members&amp;module=list&amp;{$url}&amp;sort_key=joined" template="members_list" base="public" seotitle="false"}' title='{$this->lang->words['sorty_by_jdate']}'>{$this->lang->words['sort_by_joined']}</a>
				</li>
			</ul>
		</div>
		<div class='ipsBox_container ipsPad' id='mlist_content'>
			<ul class='ipsMemberList'>
				<if test="showmembers:|:is_array( $members ) and count( $members )">
					{parse striping="memberStripe" classes="row1,row2"}
					<foreach loop="members:$members as $member">
						<li id='member_id_{$member['member_id']}' class='ipsPad clearfix member_entry {parse striping="memberStripe"}'>
							<a href='{parse url="showuser={$member['member_id']}" template="showuser" seotitle="{$member['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$member['pp_small_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$member['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_medium' /></a>
							<div class='ipsBox_withphoto'>
								<ul class='ipsList_inline right'>
									<if test="weAreSupmod:|:$this->memberData['g_is_supmod'] == 1 && $member['member_id'] != $this->memberData['member_id']">
										<li><a href='{parse url="app=core&amp;module=modcp&amp;do=editmember&amp;auth_key={$this->member->form_hash}&amp;mid={$member['member_id']}&amp;pf={$member['member_id']}" base="public"}' class='ipsButton_secondary'>{$this->lang->words['edit_member']}</a></li>
									</if>
									<if test="notus:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
										<if test="addfriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
											<li class='mini_friend_toggle is_friend' id='friend_mlist_{$member['member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}' class='ipsButton_secondary'>{parse replacement="remove_friend"}</a></li>
										<else />
											<li class='mini_friend_toggle is_not_friend' id='friend_mlist_{$member['member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}' class='ipsButton_secondary'>{parse replacement="add_friend"}</a></li>								
										</if>
									</if>
									<if test="sendpm:|:$this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' ) && $member['member_id'] != $this->memberData['member_id']">
										<li class='pm_button' id='pm_xxx_{$member['pp_member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['pp_member_id']}" base="public"}' title='{$this->lang->words['pm_member']}' class='ipsButton_secondary'>{parse replacement="send_msg"}</a></li>
									</if>
									<li><a href='{parse url="app=core&amp;module=search&amp;do=user_activity&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['gbl_find_my_content']}' class='ipsButton_secondary'>{parse replacement="find_topics_link"}</a></li>
									<if test="blog:|:$member['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
										<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}' class='ipsButton_secondary'>{parse replacement="blog_link"}</a></li>
									</if>
									<if test="gallery:|:$member['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
										<li><a href='{parse url="app=gallery&amp;user={$member['member_id']}" template="useralbum" seotitle="{$member['members_seo_name']}" base="public"}' title='{$this->lang->words['view_gallery']}' class='ipsButton_secondary'>{parse replacement="gallery_link"}</a></li>
									</if>
								</ul>
								
								<h3 class='ipsType_subtitle'>
									<strong><a href='{parse url="showuser={$member['member_id']}" template="showuser" seotitle="{$member['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'>{$member['members_display_name']}</a></strong>
									
									<if test="rating:|:$this->settings['pp_allow_member_rate'] && $this->request['pp_rating_real']">
										<span class='rating'> 
											<if test="rate1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if>
										</span>
									</if>
								</h3>
								<if test="repson:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile'] && $member['pp_reputation_points'] !== null">
									<if test="norep:|:$member['pp_reputation_points'] == 0 || !$member['pp_reputation_points']">
										<p class='reputation zero ipsType_small left' data-tooltip="{parse expression="sprintf( $this->lang->words['member_has_x_rep'], $member['members_display_name'], $member['pp_reputation_points'] )"}">
									</if>
									<if test="posrep:|:$member['pp_reputation_points'] > 0">
										<p class='reputation positive ipsType_small left' data-tooltip="{parse expression="sprintf( $this->lang->words['member_has_x_rep'], $member['members_display_name'], $member['pp_reputation_points'] )"}">
									</if>
									<if test="negrep:|:$member['pp_reputation_points'] < 0">
										<p class='reputation negative ipsType_small left' data-tooltip="{parse expression="sprintf( $this->lang->words['member_has_x_rep'], $member['members_display_name'], $member['pp_reputation_points'] )"}">
									</if>							
											<span class='number'>{$member['pp_reputation_points']}</span>
										</p>
								</if>
								<span class='desc'>
									{$this->lang->words['member_joined']} {parse date="$member['joined']" format="joined"}<br />
									{IPSMember::makeNameFormatted( $member['group'], $member['member_group_id'] )} &middot;
									<if test="filterViews:|:$this->request['sort_key'] == 'members_profile_views'">
										{parse format_number="$member['members_profile_views']"} {$this->lang->words['m_views']}
									<else />
										{parse format_number="$member['posts']"} {$this->lang->words['member_posts']}
									</if>
								</span>
							</div>
						</li>						
					</foreach>
				<else />
					<li class='no_messages'>
						{$this->lang->words['no_results']}
					</li>
				</if>
			</ul>
		</div>
	</div>
</div>
<script type='text/javascript'>
	$("mlist_content").setStyle( { minHeight: $('mlist_tabs').measure('margin-box-height') + 5 + "px" } );
</script>
{$pages}]]></template_content>
      <template_name>member_list_show</template_name>
      <template_data><![CDATA[$members, $pages="", $dropdowns=array(), $defaults=array(), $custom_fields=null, $url='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
  </templategroup>
  <templategroup group="skin_online">
    <template>
      <template_group>skin_online</template_group>
      <template_content><![CDATA[<div class='topic_controls'>
	{$links}
</div>
<h2 class='maintitle'>{$this->lang->words['online_page_title']}</h2>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<table class='ipb_table ipsMemberList' summary="{$this->lang->words['users_online']}">
			<tr class='header'>
				<th scope='col' width='55'>&nbsp;</th>
				<th scope='col'>{$this->lang->words['member_name']}</th>
				<th scope='col'>{$this->lang->words['where']}</th>
				<th scope='col'>{$this->lang->words['time']}</th>
				<th scope='col'>&nbsp;</th>
			</tr>
			<if test="onlineusers:|:count($rows)">
				{parse striping="online" classes="row1,row2"}
				<foreach loop="online:$rows as $session">
					<tr class='{parse striping="online"}'>
						<td>{parse template="userSmallPhoto" group="global" params="array_merge( $session['_memberData'], array( 'alt' => sprintf($this->lang->words['users_photo'], $session['_memberData']['members_display_name'] ? $session['_memberData']['members_display_name'] : $this->lang->words['global_guestname']) ) )"}</td>
						<td>
							<if test="userid:|:$session['_memberData']['member_id']">
								{parse template="userHoverCard" group="global" params="array_merge( $session['_memberData'], array( 'members_display_name' => IPSMember::makeNameFormatted( $session['_memberData']['members_display_name'], $session['_memberData']['member_group_id'] ) ) )"}
							<else />
								<if test="username:|:$session['member_name']">
									{IPSMember::makeNameFormatted( $session['member_name'], $session['member_group'] )}
								<else />
									{$this->lang->words['global_guestname']}
								</if>
							</if>
							<if test="anonymous:|:$session['login_type'] == 1">
								<if test="viewanon:|:$this->memberData['g_access_cp']">*</if>
							</if>
							<if test="showip:|:$this->memberData['g_access_cp']">
								<br />
								<span class='ip desc lighter ipsText_smaller'>({$session['ip_address']})</span>
							</if>
						</td>
						<td>
							<if test="nowhere:|:!$session['where_line'] || $session['in_error']">
								{$this->lang->words['board_index']}
							<else />
								<if test="wheretext:|:$session['where_link'] AND !$session['where_line_more']">
									<if test="wheretextseo:|:$session['_whereLinkSeo']">
										<a href='{$session['_whereLinkSeo']}'>
									<else />
										<a href='{parse url="{$session['where_link']}" base="public"}'>
									</if>
								</if>
								{$session['where_line']} 
								<if test="moredetails:|:$session['where_line_more']">
									&nbsp;
									<if test="wheretextseo:|:$session['_whereLinkSeo']">
										<a href='{$session['_whereLinkSeo']}'>
									<else />
										<if test="detailslink:|:$session['where_link']"><a href='{parse url="{$session['where_link']}" base="public"}'></if>
									</if>
									{$session['where_line_more']}
									<if test="enddetailslink:|:$session['where_link']"></a></if>
								<else />
									<if test="nomoreenddetailslink:|:$session['where_link']"></a></if>
								</if>
							</if>
						</td>
						<td>
							{parse date="$session['running_time']" format="long" relative="false"}
						</td>
						<td>
							<if test="options:|:$session['member_id'] AND $session['member_name']">
								<ul class='ipsList_inline ipsList_nowrap right'>
									<if test="notus:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
										<if test="addfriend:|:IPSMember::checkFriendStatus( $session['member_id'] )">
											<li class='mini_friend_toggle is_friend' id='friend_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}' class='ipsButton_secondary'>{parse replacement="remove_friend"}</a></li>
										<else />
											<li class='mini_friend_toggle is_not_friend' id='friend_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}' class='ipsButton_secondary'>{parse replacement="add_friend"}</a></li>								
										</if>
									</if>
									<if test="sendpm:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )">
										<li class='pm_button' id='pm_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$session['member_id']}" base="public"}' title='{$this->lang->words['pm_member']}' class='ipsButton_secondary'>{parse replacement="send_msg"}</a></li>
									</if>
									<if test="blog:|:$session['memberData']['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
										<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$session['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}' class='ipsButton_secondary'>{parse replacement="blog_link"}</a></li>
									</if>
									<if test="gallery:|:$session['memberData']['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
										<li><a href='{parse url="app=gallery&amp;user={$session['member_id']}" template="useralbum" seotitle="{$session['memberData']['members_seo_name']}" base="public"}' title='{$this->lang->words['view_gallery']}' class='ipsButton_secondary'>{parse replacement="gallery_link"}</a></li>
									</if>
								</ul>
							<else />
								<span class='desc'>{$this->lang->words['no_options_available']}</span>
							</if>
						</td>
					</tr>
				</foreach>
			</if>
		</table>
	</div>
</div>
<div id='forum_filter' class='ipsForm_center ipsPad'>
	<form method="post" action="{parse url="app=members&amp;section=online&amp;module=online" base="public"}">
		<label for='sort_key'>{$this->lang->words['s_by']}</label>
		<select name="sort_key" id='sort_key' class='input_select'>
			<foreach loop="sort_key:array( 'click', 'name' ) as $sort">
				<option value='{$sort}'<if test="defaultsort:|:$defaults['sort_key'] == $sort"> selected='selected'</if>>{$this->lang->words['s_sort_key_' . $sort ]}</option>
			</foreach>
		</select>
		<select name="show_mem" class='input_select'>
			<foreach loop="show_mem:array( 'reg', 'guest', 'all' ) as $filter">
				<option value='{$filter}'<if test="defaultfilter:|:$defaults['show_mem'] == $filter"> selected='selected'</if>>{$this->lang->words['s_show_mem_' . $filter ]}</option>
			</foreach>
		</select>
		<select name="sort_order" class='input_select'>
			<foreach loop="sort_order:array( 'desc', 'asc' ) as $order">
				<option value='{$order}'<if test="defaultorder:|:$defaults['sort_order'] == $order"> selected='selected'</if>>{$this->lang->words['s_sort_order_' . $order ]}</option>
			</foreach>
		</select>
		<input type="submit" value="{$this->lang->words['s_go']}" class="input_submit alt" />
	</form>
</div>
<br />
<div class='topic_controls'>
	{$links}
</div>]]></template_content>
      <template_name>showOnlineList</template_name>
      <template_data><![CDATA[$rows, $links="", $defaults=array()]]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
  </templategroup>
  <templategroup group="skin_profile">
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h1 class='ipsType_pagetitle'>{$this->lang->words['warnings_acknowledge']}</h1>
<br />
<p class='message'>{$this->lang->words['warnings_acknowledge_desc']}</p>
<br />
<form action="{parse url="app=members&module=profile&section=warnings&do=do_acknowledge" base="public"}" method="post">
	<input type='hidden' name='member' value='{$warning['wl_member']}' />
	<input type='hidden' name='id' value='{$warning['wl_id']}' />
	<input type='hidden' name='secure_key' value='{$this->member->form_hash}' />
	<input type='hidden' name='ref' value='{$_SERVER['HTTP_REFERER']}' />
	<div class='ipsBox'>
		<if test="memberNote:|:$warning['wl_note_member']">
			<div class='ipsBox_container ipsPad'>
				{$warning['wl_note_member']}
			</div>
			<br />
		</if>
		<div class='ipsBox_container ipsPad'>
			<if test="hasReason:|:$warning['wl_reason']">
				<if test="hasReasonAndContent:|:$warning['content']">
					{parse expression="sprintf( $this->lang->words['warning_blurb_yy'], "{parse template="userHoverCard" group="global" params="$warning['wl_moderator']"}", $warning['wl_reason']['wr_name'], $warning['content'] )"}
				<else />
					{parse expression="sprintf( $this->lang->words['warning_blurb_yn'], "{parse template="userHoverCard" group="global" params="$warning['wl_moderator']"}", $warning['wl_reason']['wr_name'] )"}
				</if>
			<else />
				<if test="hasContent:|:$warning['content']">
					{parse expression="sprintf( $this->lang->words['warning_blurb_ny'], "{parse template="userHoverCard" group="global" params="$warning['wl_moderator']"}", $warning['content'] )"}
				<else />
					{parse expression="sprintf( $this->lang->words['warning_blurb_nn'], "{parse template="userHoverCard" group="global" params="$warning['wl_moderator']"}" )"}
				</if>
			</if>
			<br />
			<if test="isVerbalWarning:|:!$warning['wl_points'] and !$warning['wl_mq'] and !$warning['wl_rpa'] and !$warning['suspend']">
				{$this->lang->words['warnings_verbal_only']}
			<else />
				<if test="hasPoints:|:$warning['wl_points']">
					<if test="hasExpiration:|:$warning['wl_expire']">
						<if test="hasExpireDate:|:$warning['wl_expire_date']">
							{parse expression="sprintf( $this->lang->words['warnings_given_points_expire'], $warning['wl_points'], $this->lang->getDate( $warning['wl_expire_date'], 'SHORT' ) )"}<br />
						<else />
							{parse expression="sprintf( $this->lang->words['warnings_given_points_expired'], $warning['wl_points'] )"}<br />
					</if>
					<else />
						{parse expression="sprintf( $this->lang->words['warnings_given_points'], $warning['wl_points'] )"}<br />
					</if>
				</if>
				<foreach loop="options:array( 'mq', 'rpa', 'suspend' ) as $k">
					<if test="hasValue:|:$warning[ 'wl_' . $k ]">
						<if test="valueIsPermanent:|:$warning[ 'wl_' . $k ] == -1">
							{parse expression="sprintf( $this->lang->words[ 'warnings_' . $k ], $this->lang->words['warnings_permanently'] )"}<br />
						<else />
							{parse expression="sprintf( $this->lang->words[ 'warnings_' . $k ], sprintf( $this->lang->words['warnings_for'], $warning[ 'wl_' . $k ], $this->lang->words[ 'warnings_time_' . $warning[ 'wl_' . $k . '_unit' ] ] ) )"}<br />
						</if>
					</if>
				</foreach>
			</if>
		</div>
	</div>
	<fieldset class='submit'>
		<input type='submit' class='input_submit' value='{$this->lang->words['warnings_acknowledge_confirm']}' />
	</fieldset>
</form>]]></template_content>
      <template_name>acknowledgeWarning</template_name>
      <template_data>$warning</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="warn"}
<h1 class='ipsType_pagetitle'>{parse expression="sprintf( $this->lang->words['warnings_add_for'], $member['members_display_name'] )"}</h1>
<br />
<form action='{parse url="app=members&amp;module=profile&amp;section=warnings&amp;do=save&amp;member={$member['member_id']}" base="public"}' method='post'>
	<input type='hidden' name='from_app' value='{$this->request['from_app']}' />
	<input type='hidden' name='from_id1' value='{$this->request['from_id1']}' />
	<input type='hidden' name='from_id2' value='{$this->request['from_id2']}' />
	<div class='ipsBox'>
		<div class='ipsBox_container ipsPad'>
			<ul class='ipsForm ipsForm_vertical'>
				<li class='ipsField ipsField_select'>
					<label class='ipsField_title'>{$this->lang->words['warnings_reason']} <span class='ipsForm_required'>*</span></label>
					<div class='ipsField_content'>
						<select name='reason' id='reason-select'>
							<option value=''>{$this->lang->words['warnings_reason_select']}</option>
							<foreach loop="reasons:$reasons as $r">
								<option value='{$r['wr_id']}'>{$r['wr_name']}</option>
							</foreach>
							<if test="hasOtherOption:|:$this->settings['warnings_enable_other'] or $this->memberData['g_access_cp']">
								<option value='0'>{$this->lang->words['warnings_reasons_other']}</option>
							</if>
						</select>
						<span class='error'>{$errors['reason']}</span>
					</div>
				</li>
				<li class='ipsField ipsField_select' style='display:none' id='points-li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_points']} <span class='ipsForm_required'>*</span></label>
					<div class='ipsField_content'>
						<input name='points' class='input_text' size='5' id='points-field' />
						<a href='#' id='points-explain-button'><img src="{$this->settings['img_url']}/help.png" alt='{$this->lang->words['warnings_points_explain']}' title='{$this->lang->words['warnings_points_explain']}' /></a>
						<span class='error'>{$errors['points']}</span>
					</div>
				</li>
				<li class='ipsField'>
					<label class='ipsField_title'>{$this->lang->words['warnings_note_member']}</label>
					<div class='ipsField_content'>
						{$editor['member']}
						<span class='error'>{$errors['note_member']}</span>
					</div>
					<span class='desc'>{$this->lang->words['warnings_note_member_desc']}</span>
					<br />
					<span class='error'>{$errors['note_member']}</span>
				</li>
				<li class='ipsField'>
					<label class='ipsField_title'>{$this->lang->words['warnings_note_mods']}</label>
					<div class='ipsField_content'>
						{$editor['mod']}
						<span class='error'>{$errors['note_member']}</span>
					</div>
					<span class='desc'>{$this->lang->words['warnings_note_mods_desc']}</span>
					<br />
					<span class='error'>{$errors['note_member']}</span>
				</li>
				<li class='ipsField' id='punishment_li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_punishment']}</label>
					<div class='ipsField_content'>
						<p class='message unspecific'>
							<span id='specified-punishment'>{$this->lang->words['warnings_punishment_select']}</span>
							<br />
							<a href='#' class='ipsButton_secondary' id='change-punishment-button' style='display:none'>{$this->lang->words['warnings_verbal_change']}</a>
						</p>
					</div>
				</li>
				<li class='ipsField' style='display:none' id='mq_li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_punishment_mq']}</label>
					<div class='ipsField_content'>
						<if test="currentMq:|:$currentPunishments['mq']">
							<span class='error'>{$currentPunishments['mq']}{$this->lang->words['warnings_already_change']}<br /></span>
						</if>
						<input type='checkbox' name='mq_perm' id='mq_perm' /> <label for='mq_perm'>{$this->lang->words['warnings__permanently']}</label>
						<span id='mq_time'>{$this->lang->words['warnings_or_for']} <input name='mq' class='input_text' size='2' id='mq_input' /> <select name='mq_unit' id='mq_unit_select'><option value='d'>{$this->lang->words['warnings_time_d']}</option><option value='h'>{$this->lang->words['warnings_time_h']}</option></select></span>
					</div>
					<span class='desc'>{$this->lang->words['warnings_punishment_content_desc']}</span>
				</li>
				<li class='ipsField' style='display:none' id='rpa_li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_punishment_rpa']}</label>
					<div class='ipsField_content'>
						<if test="currentRpa:|:$currentPunishments['rpa']">
							<span class='error'>{$currentPunishments['rpa']}{$this->lang->words['warnings_already_change']}<br /></span>
						</if>
						<input type='checkbox' name='rpa_perm' id='rpa_perm' /> <label for='rpa_perm'>{$this->lang->words['warnings__permanently']}</label>
						<span id='rpa_time'>{$this->lang->words['warnings_or_for']} <input name='rpa' class='input_text' size='2' id='rpa_input' /> <select name='rpa_unit' id='rpa_unit_select'><option value='d'>{$this->lang->words['warnings_time_d']}</option><option value='h'>{$this->lang->words['warnings_time_h']}</option></select></span>
					</div>
					<span class='desc'>{$this->lang->words['warnings_punishment_content_desc']}</span>
				</li>
				<li class='ipsField' style='display:none' id='suspend_li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_punishment_suspend']}</label>
					<div class='ipsField_content'>
						<if test="currentSuspend:|:$currentPunishments['suspend']">
							<span class='error'>{$currentPunishments['suspend']}{$this->lang->words['warnings_already_change']}<br /></span>
						</if>
						<input type='checkbox' name='suspend_perm' id='suspend_perm' /> <label for='suspend_perm'>{$this->lang->words['warnings__permanently']}</label>
						<span id='suspend_time'>{$this->lang->words['warnings_or_for']} <input name='suspend' class='input_text' size='2' id='suspend_input' /> <select name='suspend_unit' id='suspend_unit_select'><option value='d'>{$this->lang->words['warnings_time_d']}</option><option value='h'>{$this->lang->words['warnings_time_h']}</option></select></span>
						<br />
						<input type='checkbox' name='ban_group' id='ban_group' value='1' /> <label for='ban_group'>{$this->lang->words['warnings_ban_group']}</label>
						<select name='ban_group_id'>
						<foreach loop="banGroups:$this->caches['group_cache'] as $id => $data">
							<if test="canUseAsBanGroup:|:!$data['g_access_cp'] && !$data['g_is_supmod'] && ($id != $this->settings['guest_group'])">
								<option value="{$id}">{$data['g_title']}</option>
							</if>
						</foreach>
						</select>
					</div>
				</li>
				<li class='ipsField' style='display:none' id='remove-points-li'>
					<label class='ipsField_title'>{$this->lang->words['warnings_remove_points']}</label>
					<div class='ipsField_content'>
						{$this->lang->words['warnings_after']} <input name='remove' class='input_text' size='2' id='remove_input' /> <select name='remove_unit' id='remove_unit_select'><option value='d'>{$this->lang->words['warnings_time_d']}</option><option value='h'>{$this->lang->words['warnings_time_h']}</option></select>
						<br />
						<span class='desc'>{$this->lang->words['warnings_remove_points_desc']}</span>
					</div>
				</li>
			</ul>
		</div>
	</div>
	<fieldset class='submit'>
		<input type='submit' class='input_submit' value='{$this->lang->words['warnings_add']}' />
	</fieldset>
</form>]]></template_content>
      <template_name>addWarning</template_name>
      <template_data>$member, $reasons, $errors, $editor, $currentPunishments</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<span class='row_title'>{$f->raw_data['pf_title']}</span>
<div class='row_data'>
	<if test="gender_set:|:$f->value">
		<if test="male:|:$f->value == 'm'">
			<img src='{$this->settings['img_url']}/profile/male.png' alt='{$this->lang->words['js_gender_male']}' /> {$this->lang->words['js_gender_male']}
		</if>
	
		<if test="female:|:$f->value == 'f'">
			<img src='{$this->settings['img_url']}/profile/female.png' alt='{$this->lang->words['js_gender_female']}' /> {$this->lang->words['js_gender_female']}
		</if>
	
		<if test="nottelling:|:$f->value != 'f' AND $f->value != 'm'">
			<img src='{$this->settings['img_url']}/profile/mystery.png' alt='{$this->lang->words['js_gender_mystery']}' /> {$f->parsed[0]}
		</if>
	<else />
		<img src='{$this->settings['img_url']}/profile/mystery.png' alt='{$this->lang->words['js_gender_mystery']}' /> {$this->lang->words['js_gender_mystery']}
	</if>
</div>]]></template_content>
      <template_name>customField__gender</template_name>
      <template_data>$f</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="$f->parsed != ''">
	<span class='row_title'>{$f->raw_data['pf_title']}</span>
	<div class='row_data'>
		<if test="genericIsArray:|:is_array($f->parsed)">
			{parse expression="implode( '<br />', $f->parsed )"}
		<else />
			{$f->parsed}
		</if>
	</div>
</if>]]></template_content>
      <template_name>customField__generic</template_name>
      <template_data>$f</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="contact_field:|:$f->parsed">
<li>
	<span class='row_title'>{$f->raw_data['pf_title']}</span>
	<span class='row_data'>
		<if test="cf_icon:|:$f->raw_data['pf_icon']"><img src='{$this->settings['public_dir']}{$f->raw_data['pf_icon']}' alt='{$f->raw_data['pf_title']}' />&nbsp;</if>
		<if test="cf_array:|:is_array( $f->parsed )">
			<foreach loop="cfieldgroups:$f->parsed as $value">
				{$value}
			</foreach>
		<else />
			<if test="cf_aim:|:$f->raw_data['pf_key'] == 'aim'">
				<a class='url' href='aim:goim?screenname={$f->parsed}'>{$f->parsed}</a>
			<else />
				<if test="cf_msn:|:$f->raw_data['pf_key'] == 'msn'">
					<a class='url' href='msnim:chat?contact={$f->parsed}'>{$f->parsed}</a>
				<else />
					<if test="cf_yahoo:|:$f->raw_data['pf_key'] == 'yahoo'">
						<a class='url' href='ymsgr:sendIM?{$f->parsed}'>{$f->parsed}</a>
					<else />
						<if test="cf_icq:|:$f->raw_data['pf_key'] == 'icq'">
							<a class='url' type="application/x-icq" href='http://www.icq.com/people/cmd.php?uin={$f->parsed}&amp;action=message'>{$f->parsed}</a>
						<else />
							<if test="cf_website:|:$f->raw_data['pf_key'] == 'website'">
								<a class='url uid' rel="external me" href='{$f->parsed}'>{$f->parsed}</a>
							<else />
								<if test="cf_jabber:|:$f->raw_data['pf_key'] == 'jabber'">
									<a class='url' href='xmpp:{$f->parsed}'>{$f->parsed}</a>
								<else />
									<if test="cf_skype:|:$f->raw_data['pf_key'] == 'skype'">
										<a class='url' href='skype:{$f->parsed}?call'>{$f->parsed}</a>
									<else />
										{$f->parsed}
									</if>
								</if>
							</if>
						</if>
					</if>
				</if>
			</if>
		</if>
	</span>
</li>
</if>]]></template_content>
      <template_name>customFieldGroup__contact</template_name>
      <template_data>$f</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<style type="text/css">
/* Overwrite some of the standard IPB rules */
/* Content, is the main page under the header */
#content {
	max-width:87%;
	min-width: 980px;
	margin-left: auto;
	margin-right: auto;
	background: transparent url("{style_images_url}/opacity70.png");
	background: rgba(255,255,255,0.3);
}
#profile_background {
	background: transparent url("{style_images_url}/opacity70.png");
	background: rgba(255,255,255,0.3);
}
.topic_buttons li.non_button a, #footer_utilities {
	background: #fff !important;
}
<if test="hasBodyCustomization:|:$member['customization']['bg_color'] OR $member['customization']['_bgUrl']">
body {
	<if test="hasBackgroundColor:|:$member['customization']['bg_color']">
		background-color: #{$member['customization']['bg_color']};
	</if>
	<if test="hasBackgroundImage:|:$member['customization']['_bgUrl']">
		background-image: url("{$member['customization']['_bgUrl']}");
		<if test="backgroundIsFixed:|:! $member['customization']['bg_tile']">
			background-position: 0px 0px;
			background-attachment: fixed;
			background-repeat: no-repeat;
		<else />
			background-position: 0px 0px;
			background-attachment: fixed;
			background-repeat: repeat;
		</if>
	</if>
}
</if>
</style>
<script type="text/javascript">
	ipb.profile.customization = 1;
</script>]]></template_content>
      <template_name>customizeProfile</template_name>
      <template_data>$member</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="isAjaxModule:|:$this->request['module']=='ajax'">
	<h3>{$this->lang->words['dname_window_title']} {$member_name}</h3>
<else />
	<h3 class='maintitle'>{$this->lang->words['dname_window_title']} {$member_name}</h3>
</if>
<table class='ipb_table'>
	<tr class='header'>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_name_from']}</th>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_name_to']}</th>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_date']}</th>
	</tr>
	<if test="hasDnameHistory:|:is_array($records) AND count($records)">
		{parse striping="dname" classes="row1,row2"}
    	<foreach loop="records:$records as $row">
		<tr class='{parse striping="dname"}'>
		 	<td>{$row['dname_previous']}</td>
		 	<td><strong>{$row['dname_current']}</strong></td>
		 	<td class='altrow'>{parse date="$row['dname_date']" format="short"}</td>
		</tr>
		</foreach>
	<else />
		<tr>
			<td colspan='3' class='no_messages'>{$this->lang->words['dname_no_history']}</td>
		</tr>
    </if>
</table>]]></template_content>
      <template_name>dnameWrapper</template_name>
      <template_data><![CDATA[$member_name="",$records=array()]]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3>{$this->lang->words['warnings_points']}</h3>
<div class='ipsPad'>
	{$this->lang->words['warnings_points_explain_1']}
</div>
<table class='ipb_table'>
	<tr class='header'>
		<th>{$this->lang->words['warnings_reason']}</th>
		<th>{$this->lang->words['warnings_points']}</th>
	</tr>
	<foreach loop="reasons:$reasons as $r">
		<tr>
			<td>{$r['wr_name']}</td>
			<td>{$r['wr_points']}</td>
		</tr>
	</foreach>
</table>
<if test="hasActions:|:!empty( $actions )">
	<div class='ipsPad'>
		{$this->lang->words['warnings_points_explain_2']}
	</div>
	<table class='ipb_table'>
		<tr class='header'>
			<th>{$this->lang->words['warnings_points']}</th>
			<th>{$this->lang->words['warnings_punishment']}</th>
		</tr>
		<foreach loop="actions:$actions as $a">
			<tr>
				<td>{$a['wa_points']}</td>
				<td>
					<foreach loop="options:array( 'mq', 'rpa', 'suspend' ) as $k">
						<if test="hasValue:|:$a[ 'wa_' . $k ]">
							<if test="valueIsPermanent:|:$a[ 'wa_' . $k ] == -1">
								{parse expression="sprintf( $this->lang->words[ 'warnings_' . $k ], $this->lang->words['warnings_permanently'] )"}<br />
							<else />
								{parse expression="sprintf( $this->lang->words[ 'warnings_' . $k ], sprintf( $this->lang->words['warnings_for'], $a['wa_' . $k ], $this->lang->words[ 'warnings_time_' . $a[ 'wa_' . $k . '_unit' ] ] ) )"}<br />
							</if>
						</if>
					</foreach>
				</td>
			</tr>
		</foreach>
	</table>
</if>]]></template_content>
      <template_name>explainPoints</template_name>
      <template_data>$reasons, $actions</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="friends"}
<h1 class='ipsType_pagetitle'>{$this->lang->words['m_friends_list']}</h1>
<if test="friendListPages:|:$pages">
	<div class='topic_controls'>
		$pages
	</div>
</if>
<div class='maintitle ipsFilterbar clear'>
	<ul class='ipsList_inline clearfix'>
		<if test="tabIsList:|:$this->request['tab'] == 'list' || !$this->request['tab']">
			<li class='active'><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=list" base="public"}' title='{$this->lang->words['m_friends_list']}'>{$this->lang->words['m_friends_list']}</a></li>
			<li><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=pending" base="public"}' title='{$this->lang->words['m_friends_pending']}'>{$this->lang->words['m_friends_pending']}</a></li>
		</if>
		<if test="tabIsPending:|:$this->request['tab'] == 'pending'">
			<li><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=list" base="public"}' title='{$this->lang->words['m_friends_list']}'>{$this->lang->words['m_friends_list']}</a></li>
			<li class='active'><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=pending" base="public"}' title='{$this->lang->words['m_friends_pending']}'>{$this->lang->words['m_friends_pending']}</a></li>
		</if>
	</ul>
</div>
<if test="hasFriendsList:|:is_array($friends) and count($friends) && $this->settings['friends_enabled']">
	{parse striping="memberStripe" classes="row1,row2"}
	<ul class='ipsMemberList'>
		<foreach loop="friendsList:$friends as $friend">
			<if test="loopOnPending:|:$this->request['tab'] == 'pending'">
				<li id='member_id_{$friend['member_id']}' class='ipsPad clearfix member_entry {parse striping="memberStripe"}'>
					<a href='{parse url="showuser={$friend['member_id']}" template="showuser" seotitle="{$friend['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$friend['pp_small_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$friend['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_medium' /></a>
					<div class='ipsBox_withphoto'>
						<ul class='ipsList_inline right'>
							<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=moderate&amp;pp_option=approve&amp;pp_friend_id[{$friend['member_id']}]=1&amp;md5check={$this->member->form_hash}" base="public"}' title='{$this->lang->words['approve_request']}' class='ipsButton_secondary'>{$this->lang->words['approve_request']}</a></li>
							<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=moderate&amp;pp_option=delete&amp;pp_friend_id[{$friend['member_id']}]=1&amp;md5check={$this->member->form_hash}" base="public"}' title='{$this->lang->words['deny_request']}' class='ipsButton_secondary important'>{$this->lang->words['deny_request']}</a></li>
						</ul>
						
						<h3 class='ipsType_subtitle'>
							<strong><a href='{parse url="showuser={$friend['member_id']}" template="showuser" seotitle="{$friend['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name']}</a></strong>
						</h3>
						<if test="repson:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
							<if test="norep:|:$friend['pp_reputation_points'] == 0 || !$friend['pp_reputation_points']">
								<p class='reputation zero ipsType_small left'>
							</if>
							<if test="posrep:|:$friend['pp_reputation_points'] > 0">
								<p class='reputation positive ipsType_small left'>
							</if>
							<if test="negrep:|:$friend['pp_reputation_points'] < 0">
								<p class='reputation negative ipsType_small left'>
							</if>							
									<span class='number'>{$friend['pp_reputation_points']}</span>
								</p>
						</if>
						<span class='desc'>
							{$this->lang->words['member_joined']} {parse date="$friend['joined']" format="joined"}<br />
							{IPSMember::makeNameFormatted( $friend['group'], $friend['member_group_id'] )} &middot; {parse format_number="$friend['posts']"} {$this->lang->words['member_posts']}
						</span>
					</div>
				</li>
			<else />
				<li id='member_id_{$friend['member_id']}' class='ipsPad clearfix member_entry {parse striping="memberStripe"}'>
					<a href='{parse url="showuser={$friend['member_id']}" template="showuser" seotitle="{$friend['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$friend['pp_small_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$friend['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_medium' /></a>
					<div class='ipsBox_withphoto'>
						<ul class='ipsList_inline right'>
							<if test="weAreSupmod:|:$this->memberData['g_is_supmod'] == 1 && $friend['member_id'] != $this->memberData['member_id']">
								<li><a href='{parse url="app=core&amp;module=modcp&amp;do=editmember&amp;auth_key={$this->member->form_hash}&amp;mid={$friend['member_id']}&amp;pf={$friend['member_id']}" base="public"}' class='ipsButton_secondary'>{$this->lang->words['supmod_edit_member']}</a></li>
							</if>
							<if test="notus:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $friend['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
								<if test="addfriend:|:IPSMember::checkFriendStatus( $friend['member_id'] )">
									<li class='mini_friend_toggle is_friend' id='friend_mlist_{$friend['member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$friend['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}' class='ipsButton_secondary'>{parse replacement="remove_friend"}</a></li>
								<else />
									<li class='mini_friend_toggle is_not_friend' id='friend_mlist_{$friend['member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$friend['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}' class='ipsButton_secondary'>{parse replacement="add_friend"}</a></li>								
								</if>
							</if>
							<if test="sendpm:|:$this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' ) && $friend['member_id'] != $this->memberData['member_id']">
								<li class='pm_button' id='pm_xxx_{$friend['pp_member_id']}'><a href='{parse url="app=members&amp;module=list&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$friend['pp_member_id']}" base="public"}' title='{$this->lang->words['pm_member']}' class='ipsButton_secondary'>{parse replacement="send_msg"}</a></li>
							</if>
							<li><a href='{parse url="app=core&amp;module=search&amp;do=user_activity&amp;mid={$friend['member_id']}" base="public"}' title='{$this->lang->words['gbl_find_my_content']}' class='ipsButton_secondary'>{parse replacement="find_topics_link"}</a></li>
							<if test="blog:|:$friend['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
								<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$friend['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}' class='ipsButton_secondary'>{parse replacement="blog_link"}</a></li>
							</if>
							<if test="gallery:|:$friend['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
								<li><a href='{parse url="app=gallery&amp;user={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="useralbum" base="public"}' title='{$this->lang->words['view_gallery']}' class='ipsButton_secondary'>{parse replacement="gallery_link"}</a></li>
							</if>
						</ul>
						
						<h3 class='ipsType_subtitle'>
							<strong><a href='{parse url="showuser={$friend['member_id']}" template="showuser" seotitle="{$friend['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name']}</a></strong>
						</h3>
						<if test="repson:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
							<if test="norep:|:$friend['pp_reputation_points'] == 0 || !$friend['pp_reputation_points']">
								<p class='reputation zero ipsType_small left'>
							</if>
							<if test="posrep:|:$friend['pp_reputation_points'] > 0">
								<p class='reputation positive ipsType_small left'>
							</if>
							<if test="negrep:|:$friend['pp_reputation_points'] < 0">
								<p class='reputation negative ipsType_small left'>
							</if>							
									<span class='number'>{$friend['pp_reputation_points']}</span>
								</p>
						</if>
						<span class='desc'>
							{$this->lang->words['member_joined']} {parse date="$friend['joined']" format="joined"}<br />
							{IPSMember::makeNameFormatted( $friend['group'], $friend['member_group_id'] )} &middot; {parse format_number="$friend['posts']"} {$this->lang->words['member_posts']}
						</span>
					</div>
				</li>
			</if>
		
		</foreach>
	</ul>
<else />
	<p class='no_messages'>
		<if test="friendListNone:|:$this->request['tab'] == 'pending'">
			{$this->lang->words['no_friends_awaiting_approval']}
		<else />
			{$this->lang->words['no_friends_to_display']}
		</if>
	</p>
</if>
<if test="friendListPagesBottom:|:$pages">
	<div class='topic_controls'>
		{$pages}
	</div>
</if>]]></template_content>
      <template_name>friendsList</template_name>
      <template_data>$friends, $pages</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h1 class='ipsType_pagetitle'>{parse expression="sprintf( $this->lang->words['warnings_member'], $member['members_display_name'] )"}</h1>
<p class='ipsType_pagedesc'>{parse expression="sprintf( $this->lang->words['warn_status'], $member['warn_level'] )"}</p>
<if test="hasPaginationOrWarn:|:$pagination || $canWarn">
	<div class='topic_controls clearfix'>
		<if test="paginationTop:|:$pagination">{$pagination}</if>
		<if test="canWarn:|:$canWarn">
			<ul class='topic_buttons'>
				<li><a href='{parse url="app=members&module=profile&section=warnings&do=add&member={$member['member_id']}&from_app={$this->request['from_app']}&from_id1={$this->request['from_id1']}&from_id2={$this->request['from_id2']}" base="public"}'>{$this->lang->words['warnings_add']}</a></li>
			</ul>
		</if>
	</div>
</if>
<br />
<div class='maintitle'>{$this->lang->words['warnings']}</div>
<if test="noWarnings:|:empty( $warnings )">
	<div class='no_messages'>
		{$this->lang->words['warnings_empty']}
	</div>
<else />
	<div class='ipsBox'>
		<div class='ipsBox_container'>
			<table class='ipb_table'>
				<thead>
					<tr class='header'>
						<th width='20%'>{$this->lang->words['warnings_date']}</th>
						<th width='20%'>{$this->lang->words['warnings_reason']}</th>
						<th width='20%'>{$this->lang->words['warnings_points']}</th>
						<th width='20%'>{$this->lang->words['warnings_moderator']}</th>
						<th width='20%'>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					<foreach loop="warnings:$warnings as $warning">
						<tr>
							<td>{parse date="$warning['wl_date']" format="JOINED"}</td>
							<td>
								<if test="hasReason:|:isset( $reasons[ $warning['wl_reason'] ] )">
									{$reasons[ $warning['wl_reason'] ]['wr_name']}
								<else />
									{$this->lang->words['warnings_reasons_other']}
								</if>
							</td>
							<td>{$warning['wl_points']}</td>
							<td>{parse template="userHoverCard" group="global" params="$warning['wl_moderator']"}</td>
							<td><a href='javascript:void(0);' class='ipsButton_secondary' onclick='warningPopup( this, {$warning['wl_id']} )'>{$this->lang->words['warnings_moreinfo']}</a></td>
						</tr>
					</foreach>
				</tbody>
			</table>
		</div>
	</div>
</if>
<br />
<if test="paginationBottom:|:$pagination">{$pagination}</if>
<br /><br />]]></template_content>
      <template_name>listWarnings</template_name>
      <template_data>$member, $warnings, $pagination, $reasons, $canWarn</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<link rel="stylesheet" type="text/css" media="screen" href="{$this->settings['public_dir']}style_css/{$this->registry->output->skin['_csscacheid']}/ipb_photo_editor.css" />
<script type="text/javascript">
 	// Can't use normal link as loaded by Ajax
    $$("head")[0].insert(new Element("script", {
      type: "text/javascript",
      src: '{$this->settings['public_dir']}js/ips.inlineUploader.js'
    })).
    insert(new Element("script", {
      type: "text/javascript",
      src: '{$this->settings['public_dir']}js/ips.photoEditor.js'
    })).
    insert(new Element("script", {
      type: "text/javascript",
      src: '{$this->settings['public_dir']}js/3rd_party/cropper/cropper.uncompressed.js'
    }));
</script>
<form method='post' enctype="multipart/form-data" action="{parse url="app=members&amp;module=profile&amp;section=photo&amp;do=save" base="public"}" id='photoEditorForm' name='photoEditorForm'>
<h3>{$this->lang->words['pe_title']}</h3>
<div class='ipsBox'>
<div class='fixed_inner'>
	<fieldset id='ips_photoWrap' class='fixed_inner ipsBox_container'>
		<div id='ips_sidePanel'>
			<div id="ips_currentPhoto">
				{$data['currentPhoto']['tag']}
			</div>
			<div id='ips_cropperControls' style='display:none'>
				<a href="javascript:void(0);" class="ipsButton_secondary desc cropperCancel">{$this->lang->words['pe_cancel']}</a> <a href="javascript:void(0);" class="ipsButton_secondary desc cropperAccept">{$this->lang->words['pe_ok']}</a>
			</div>
			<div id='ips_cropperStart' style='<if test="$data['type'] == 'gravatar'">display:none</if>;'>
				<a href="javascript:void(0);" class="ipsButton_secondary desc cropperStart">{$this->lang->words['adjust_crop_lnk']}</a>
			</div>
		</div>
		<div id='ips_photoOptions'>
			<ul>
				<li class='ips_option row2'>
					<div class='ips_photoPreview _custom'><label>{$data['custom']['tag']}</label></div>
					<div class='ips_photoControls'>
						<input type='radio' name='photoType' id='ips_ptype_custom' value='custom' <if test="$data['type'] == 'custom'">checked='checked'</if> /> <strong>{$this->lang->words['pe_use_custom_photo']}</strong>
						<div class='ips_photoOptionText'>
							<span class='desc'>{$this->lang->words['pe_upload_desc']}.<br />{$this->lang->words['pe_upload_rec']}</span>
							<br />
							<if test="canHasUpload:|:IPSMember::canUploadPhoto( $member )">
								<br />
								<span class='desc'>{$this->lang->words['pe_upload_from_file']}</span>
								<br /><input type="file" name="upload_photo" id='upload_photo' class='input_text' value="" size="20" title="{$this->lang->words['pe_formats']}" /><br />
							</if>
							<if test="canHasURL:|:$this->settings['mem_photo_url']">
								<br />
								<span class='desc'>{$this->lang->words['pe_import_from_url']}</span>
								<br /><input type='text' class='input_text' size='20' id='url_photo' name='url_photo' /> <input type='button' id='url_import' value='{$this->lang->words['pe_import_button']}' class='ipsButton_secondary desc' /><br />
							</if>
							<div class='message error' style='display:none' id='ips_type_custom_error'></div>
							<br />
						</div>
					</div>
				</li>
				<if test="allowGravatars:|:$this->settings['allow_gravatars']">
				<li class='ips_option row2'>
					<div class='ips_photoPreview _gravatar'><label>{$data['gravatar']['tag']}</label></div>
					<div class='ips_photoControls'>
						<input type='radio' name='photoType' id='ips_ptype_gravatar' value='gravatar' <if test="$data['type'] == 'gravatar'">checked='checked'</if> /> <strong>{$this->lang->words['pe_use_gravatar']}</strong>
						<div class='ips_photoOptionText'>
							<span class='desc'><a href="http://www.gravatar.com" rel="external">{$this->lang->words['pe_what_is_gravatar']}</a></span>
							<br /><br />
							<input type="text" name="gravatar" id='gravatar' class='input_text' size="35" value="{$member['pp_gravatar']}" />
							<br /><span class='desc'>{$this->lang->words['pe_enter_gravatar_email']}</span>
						</div>
					</div>
				</li>
				</if>
				<if test="hasTwitter:|:! empty($data['twitter']['tag'])">
				<li class='ips_option row2'>
					<div class='ips_photoPreview _twitter'><label>{$data['twitter']['tag']}</label></div>
					<div class='ips_photoControls'>
						<input type='radio' name='photoType' id='ips_ptype_twitter' value='twitter' <if test="$data['type'] == 'twitter'">checked='checked'</if> /> <strong>{$this->lang->words['pe_use_twitter']}</strong>
						<div class='ips_photoOptionText'>
							<span class='desc'>{$this->lang->words['pe_twitter_desc']}</span>					
						</div>
					</div>
				</li>
				</if>
				<if test="hasFacebook:|:! empty($data['facebook']['tag'])">
				<li class='ips_option row2'>
					<div class='ips_photoPreview _facebook'><label>{$data['facebook']['tag']}</label></div>
					<div class='ips_photoControls'>
						<input type='radio' name='photoType' id='ips_ptype_facebook' value='facebook' <if test="$data['type'] == 'facebook'">checked='checked'</if> /> <strong>{$this->lang->words['pe_use_facebook']}</strong>
						<div class='ips_photoOptionText'>
							<span class='desc'>{$this->lang->words['pe_facebook_desc']}</span>					
						</div>
					</div>
				</li>
				</if>
				<li class='ipsPad_half clearfix right'>
					<input type='button' name='remove' value='{$this->lang->words['pe_remove_button']}' class='ipsButton important ips_photoRemove' />
					<input type='submit' name='saveit' value='{$this->lang->words['pe_done_button']}' class='ipsButton ips_photoSubmit' />
				</li>
			</ul>
		</div>
	</fieldset>
</div>
</div>
</form>]]></template_content>
      <template_name>photoEditor</template_name>
      <template_data>$data, $member</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="status"}
{parse js_module="rating"}
{parse js_module="profile"}
<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.profile.viewingProfile = parseInt( {$member['member_id']} );
	<if test="$this->memberData['member_id']">
		ipb.templates['remove_friend'] = "<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=remove&amp;member_id={$member['member_id']}" base="public"}' title='{$this->lang->words['remove_as_friend']}'><img src='{$this->settings['img_url']}/user_delete.png' alt='{$this->lang->words['remove_as_friend']}' />&nbsp;&nbsp; {$this->lang->words['remove_as_friend']}</a>";
		ipb.templates['add_friend'] = "<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=add&amp;member_id={$member['member_id']}" base="public"}' title='{$this->lang->words['add_me_friend']}'><img src='{$this->settings['img_url']}/user_add.png' alt='{$this->lang->words['add_me_friend']}' />&nbsp;&nbsp; {$this->lang->words['add_me_friend']}</a>";
	</if>
	ipb.templates['edit_status'] = "<span id='edit_status'><input type='text' class='input_text' style='width: 60%' id='updated_status' maxlength='150' /> <input type='submit' value='{$this->lang->words['save']}' class='input_submit' id='save_status' /> &nbsp;<a href='#' id='cancel_status' class='cancel' title='{$this->lang->words['cancel']}'>{$this->lang->words['cancel']}</a></span>";
	<if test="friendsEnabled:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
		<if test="jsIsFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
			ipb.profile.isFriend = true;
		<else />
			ipb.profile.isFriend = false;
		</if>
	</if>
//|#^#]>
</script>
<if test="hasCustomization:|:is_array($member['customization']) AND $member['customization']['type']">
	{parse template="customizeProfile" group="profile" params="$member"}
</if>
<if test="canEditUser:|:($this->memberData['member_id'] && $member['member_id'] == $this->memberData['member_id']) || $this->memberData['g_is_supmod'] == 1 || ($this->memberData['member_id'] && $member['member_id'] != $this->memberData['member_id'])">
	<ul class='topic_buttons'>
		<if test="weAreSupmod:|:$this->memberData['g_is_supmod'] == 1 && $member['member_id'] != $this->memberData['member_id']">
			<li><a href='{parse url="app=core&amp;module=modcp&amp;do=editmember&amp;auth_key={$this->member->form_hash}&amp;mid={$member['member_id']}&amp;pf={$member['member_id']}" base="public"}'>{$this->lang->words['supmod_edit_member']}</a></li>
		</if>
		<if test="weAreOwner:|:$this->memberData['member_id'] && $member['member_id'] == $this->memberData['member_id']">
			<li><a href='{parse url="app=core&amp;module=usercp&amp;tab=core" base="public"}'>{$this->lang->words['edit_profile']}</a></li>
		</if>
		<if test="supModCustomization:|:($member['member_id'] == $this->memberData['member_id'] ) AND $member['customization']['type']">
			<li class='non_button'><a href='{parse url="showuser={$member['member_id']}&amp;secure_key={$this->member->form_hash}&amp;removeCustomization=1" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'>{$this->lang->words['cust_remove']}</a></li>
		</if>
	</ul>
</if>
<div class='ipsBox clear vcard' id='profile_background'>
	<div class='ipsVerticalTabbed ipsLayout ipsLayout_withleft ipsLayout_smallleft clearfix'>
		<div class='ipsVerticalTabbed_tabs ipsLayout_left' id='profile_tabs'>
			<p class='short photo_holder'>
				<if test="canEditPic:|:($this->memberData['member_id'] && $member['member_id'] == $this->memberData['member_id']) AND (IPSMember::canUploadPhoto($member, TRUE))">
					<a data-clicklaunch="launchPhotoEditor" href="{parse url="app=members&amp;module=profile&amp;section=photo" base="public"}" id='change_photo' class='ipsType_smaller ipsPad' title='{$this->lang->words['change_photo_desc']}'>{$this->lang->words['change_photo_link']}</a>
				</if>
				<img class="ipsUserPhoto" id='profile_photo' src='{$member['pp_main_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$member['members_display_name'])"}"  />
			</p>
			<if test="haswarn:|:$member['show_warn']">
				<div class='warn_panel clear ipsType_small'>
					<strong><a href='{parse url="app=members&amp;module=profile&amp;section=warnings&amp;member={$member['member_id']}&amp;from_app=members" base="public"}' id='warn_link_xxx_{$member['member_id']}' title='{$this->lang->words['warn_view_history']}'>{parse expression="sprintf( $this->lang->words['warn_status'], $member['warn_level'] )"}</a></strong>
				</div>
			</if>
			<ul class='clear'>
				<li id='tab_link_core:info' class='tab_toggle <if test="$default_tab == 'core:info'">active</if>' data-tabid='user_info'><a href='#'>{$this->lang->words['pp_tab_info']}</a></li>
				<foreach loop="tabs:$tabs as $tab">
					<li id='tab_link_{$tab['app']}:{$tab['plugin_key']}' class='<if test="tabactive:|:$tab['app'].':'.$tab['plugin_key'] == $default_tab || $this->request['tab'] == $tab['plugin_key']">active</if> tab_toggle' data-tabid='{$tab['plugin_key']}'><a href='{parse url="showuser={$member['member_id']}&amp;tab={$tab['plugin_key']}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view']} {$tab['_lang']}'>{$tab['_lang']}</a></li>
				</foreach>
			</ul>
		</div>
		<div class='ipsVerticalTabbed_content ipsLayout_content ipsBox_container' id='profile_content'>
			<div class='ipsPad'>
				<div id='profile_content_main'>
					<div id='user_info_cell'>
						<h1 class='ipsType_pagetitle'>
							<span class='fn nickname'>{$member['members_display_name']}</span>
						</h1>
						{$this->lang->words['m_member_since']} {parse date="$member['joined']" format="DATE"}<br />
						<if test="hasWarns:|:!empty( $warns )">
							<foreach loop="warnsLoop:array( 'ban', 'suspend', 'rpa', 'mq' ) as $k">
								<if test="warnIsSet:|:isset( $warns[ $k ] )">
									<span class='ipsBadge ipsBadge_red<if test="warnClickable:|:$warns[ $k ]"> clickable</if>' <if test="warnPopup:|:$warns[ $k ]">onclick='warningPopup( this, {$warns[ $k ]} )'</if>>{$this->lang->words[ 'warnings_profile_badge_' . $k ]}</span>
								</if>
							</foreach>
						</if>
						<if test="onlineDetails:|:$member['_online'] && ($member['online_extra'] != $this->lang->words['not_online'])">
							<span class='ipsBadge ipsBadge_green reset_cursor' data-tooltip="{parse expression="strip_tags($member['online_extra'])"}">{$this->lang->words['online_online']}</span>
						<else />
							<span class='ipsBadge ipsBadge_lightgrey reset_cursor'>{$this->lang->words['online_offline']}</span>
						</if>
						<span class='desc lighter'>{$this->lang->words['m_last_active']} {$member['_last_active']}</span> 
					</div>
					<if test="userStatus:|:$status['status_id']">
					<div id='user_status_cell'>
						<div id='user_latest_status'>
							<div>
								{parse expression="IPSText::truncate( strip_tags( $status['status_content'] ), 180 )"}
								<span class='ipsType_smaller desc lighter blend_links'><a href='{parse url="app=members&amp;module=profile&amp;section=status&amp;type=single&amp;status_id={$status['status_id']}" seotitle="true" template="members_status_single" base="public"}'>{$this->lang->words['ps_updated']} {parse date="$status['status_date']" format="manual{%d %b}" relative="true"} &middot; {parse expression="intval($status['status_replies'])"} {$this->lang->words['ps_comments']}</a></span>
							</div>
						</div>
					</div>
					</if>
					<if test="allowRate:|:$this->settings['pp_allow_member_rate']">
						<span class='rating left clear' style='margin-bottom: 10px'>
							<if test="noRateYourself:|:$this->memberData['member_id'] == $member['member_id'] || !$this->memberData['member_id']">
									<if test="rate1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><span id='rating_text' class='desc'></span>
							<else />
									<a href='#' id='user_rate_1' title='{$this->lang->words['m_rate_1']}'><if test="rated1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_2' title='{$this->lang->words['m_rate_2']}'><if test="rated2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_3' title='{$this->lang->words['m_rate_3']}'><if test="rated3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_4' title='{$this->lang->words['m_rate_4']}'><if test="rated4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_5' title='{$this->lang->words['m_rate_5']}'><if test="rated5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a> <span id='rating_text' class='desc'></span>
								<script type='text/javascript'>
									rating = new ipb.rating( 'user_rate_', { 
														url: ipb.vars['base_url'] + 'app=members&module=ajax&section=rate&member_id={$member['member_id']}&md5check=' + ipb.vars['secure_hash'],
														cur_rating: <if test="hasrating:|:isset($member['pp_rating_real'])">{$member['pp_rating_real']}<else />0</if>,
														rated: null,
														allow_rate: ( {$this->memberData['member_id']} != 0 ) ? 1 : 0,
														show_rate_text: false
													  } );
								</script>
							</if>
						</span>
					</if>
					<ul class='ipsList_inline' id='user_utility_links'>
						<if test="noFriendYourself:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
							<li id='friend_toggle' class='ipsButton_secondary'>
								<if test="isFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
									<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'><img src='{$this->settings['img_url']}/user_delete.png' alt='{$this->lang->words['remove_friend']}' />&nbsp;&nbsp; {$this->lang->words['remove_as_friend']}</a>
								<else />
									<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'><img src='{$this->settings['img_url']}/user_add.png' alt='{$this->lang->words['add_friend']}' />&nbsp;&nbsp; {$this->lang->words['add_me_friend']}</a>
								</if>
							</li>
						</if>
						<if test="pmlink:|:($member['member_id'] != $this->memberData['member_id']) AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' ) AND $member['members_disable_pm'] == 0">
							<li class='pm_button' id='pm_xxx_{$member['member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['member_id']}" base="public"}' title='{$this->lang->words['pm_this_member']}' class='ipsButton_secondary'>{parse replacement="send_msg"}&nbsp;&nbsp; {$this->lang->words['send_message']}</a></li>
						</if>
						<li>
							<a href='{parse url="app=core&amp;module=search&amp;do=user_activity&amp;mid={$member['member_id']}" base="public"}' class='ipsButton_secondary'>{parse replacement="find_topics_link"}&nbsp;&nbsp;  {$this->lang->words['gbl_find_my_content']}</a>
						</li>
					</ul>
				</div>
				<div id='profile_panes_wrap' class='clearfix'>
					
					<div id='pane_core:info' class='ipsLayout ipsLayout_withright ipsLayout_largeright clearfix' <if test="$default_tab != 'core:info'">style='display: none'</if>>						
						<div class='ipsLayout_content'>
							<if test="$member['pp_about_me']">
								<div class='general_box clearfix'>
									<h3>{$this->lang->words['pp_tab_aboutme']}</h3>
									<div class='ipsPad'>
										
											{$member['pp_about_me']}
										
									</div>
								</div>
								<hr/>
							</if>
							<div class='general_box clearfix'>
								<h3>{$this->lang->words['community_stats']}</h3>
								<br />								
								<ul class='ipsList_data clearfix'>									
									<li class='clear clearfix'>
										<span class='row_title'>{$this->lang->words['m_group']}</span>
										<span class='row_data'>{$member['g_title']}</span>
									</li>
									<li class='clear clearfix'>
										<span class='row_title'>{$this->lang->words['m_posts']}</span>
										<span class='row_data'>{parse format_number="$member['posts']"}</span>
									</li>
									<li class='clear clearfix'>
										<span class='row_title'>{$this->lang->words['m_profile_views']}</span>
										<span class='row_data'>{parse format_number="$member['members_profile_views']"}</span>
									</li>
									<if test="member_title:|:$member['title'] != ''">
										<li class='clear clearfix'>
											<span class='row_title'>{$this->lang->words['m_member_title']}</span>
											<span class='row_data'>{$member['title']}</span>
										</li>
									</if>
									<li class='clear clearfix'>
										<span class='row_title'>{$this->lang->words['m_age_prefix']}</span>
										<if test="member_age:|:$member['_age'] > 0">
											<span class='row_data'>{$member['_age']} {$this->lang->words['m_years_old']}</span>
										<else />
											<span class='row_data desc lighter'>{$this->lang->words['m_age_unknown']}</span>
										</if>
									</li>
									<li class='clear clearfix'>
										<span class='row_title'>{$this->lang->words['m_birthday_prefix']}</span>
										<if test="member_birthday:|:$member['bday_day']">
											<span class='row_data'>{$member['_bday_month']} {$member['bday_day']}<if test="member_bday_year:|:$member['bday_year']">, {$member['bday_year']}</if></span>
										<else />
											<span class='row_data desc lighter'>{$this->lang->words['m_bday_unknown']}</span>
										</if>
									</li>
									<if test="pcfields:|:$member['custom_fields']['profile_info'] != """>
										<foreach loop="pcfieldsLoop:$member['custom_fields']['profile_info'] as $key => $value">
											<if test="!empty($value)">
												<li class='clear clearfix'>
													{$value}
												</li>
											</if>
										</foreach>
									</if>
								</ul>
								<br />
							</div>
							
							<if test="pcfieldsOther:|:$member['custom_fields']">
								<foreach loop="pcfieldsOtherLoop:$member['custom_fields'] as $group => $mdata">
									<if test="pcfieldsOtherLoopCheck:|:$group != 'profile_info' AND $group != 'contact'">
										<if test="pcfieldsOtherLoopCheck2:|:is_array( $member['custom_fields'][ $group ] ) AND count( $member['custom_fields'][ $group ] )">
											<div class='general_box clearfix' id='custom_fields_{$group}'>
												<h3 class='bar'>{$member['custom_field_groups'][ $group ]}</h3>
												<br />
												<ul class='ipsList_data clearfix'>
													<foreach loop="pcfieldsOtherLoopCheckInner:$member['custom_fields'][ $group ] as $key => $value">
														<li class='clear clearfix'>
															{$value}
														</li>
													</foreach>
												</ul>
												<br />
											</div>
										</if>
									</if>
								</foreach>
							</if>
							
							<if test="hasContactFields:|:$this->memberData['g_access_cp'] == 1 || is_array( $member['custom_fields']['contact'])">
								<div class='general_box clearfix'>
									<h3>{$this->lang->words['contact_info']}</h3>
									<br />
								
									<ul class='ipsList_data clearfix'>
										<if test="isadmin:|:$this->memberData['g_access_cp'] == 1">
											<li class='clear clearfix'>
												<span class='row_title'>{$this->lang->words['m_email']}</span>
												<span class='row_data'>
													<a href='mailto:{$member['email']}'>{$member['email']}</a>
												</span>
											</li>
										</if>
										<if test="member_contact_fields:|:is_array( $member['custom_fields']['contact'])">
											<foreach loop="cfields:$member['custom_fields']['contact'] as $field">
												{$field}
											</foreach>
										</if>
									</ul>
								</div>
							</if>
						</div>
						
						<div class='ipsLayout_right'>
							<if test="ourReputation:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
								<if test="RepPositive:|:$member['pp_reputation_points'] > 0">
									<div class='reputation positive' data-tooltip="{parse expression="sprintf( $this->lang->words['rep_description'], $member['members_display_name'], $member['pp_reputation_points'])"}">
								</if>
								<if test="RepNegative:|:$member['pp_reputation_points'] < 0">
									<div class='reputation negative' data-tooltip="{parse expression="sprintf( $this->lang->words['rep_description'], $member['members_display_name'], $member['pp_reputation_points'])"}">
								</if>
								<if test="RepZero:|:$member['pp_reputation_points'] == 0">
									<div class='reputation zero' data-tooltip="{parse expression="sprintf( $this->lang->words['rep_description'], $member['members_display_name'], $member['pp_reputation_points'])"}">
								</if>
										<span class='number'>{$member['pp_reputation_points']}</span>
										<if test="RepText:|:$member['author_reputation'] && $member['author_reputation']['text']">
											<span class='title'>{$member['author_reputation']['text']}</span>
										</if>
										<if test="RepImage:|:$member['author_reputation'] && $member['author_reputation']['image']">
											<span class='image'><img src='{$member['author_reputation']['image']}' alt='{$this->lang->words['m_reputation']}' /></span>
										</if>
									</div>
								
								<br />
							</if>
							
							<if test="checkModTools:|:($member['spamStatus'] !== NULL && $member['member_id'] != $this->memberData['member_id']) || ($this->memberData['g_mem_info'] && $this->settings['auth_allow_dnames']) || (($member['member_id'] != $this->memberData['member_id'] AND $this->memberData['g_is_supmod'] ) AND $member['customization']['type'])">
								<div class='general_box clearfix'>
									<h3>{$this->lang->words['user_tools']}</h3>
									<ul class='ipsPad'>	
										<if test="authorspammer:|:$member['spamStatus'] !== NULL && $member['member_id'] != $this->memberData['member_id']">
											<if test="authorspammerinner:|:$member['spamStatus'] === TRUE">
												<li><a href='#' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, false)">{parse replacement="spammer_on"} {$this->lang->words['spm_on']}</a></li>
											<else />
												<li><a href='{$this->settings['base_url']}app=core&amp;module=modcp&amp;do=setAsSpammer&amp;member_id={$member['member_id']}&amp;auth_key={$this->member->form_hash}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, true)">{parse replacement="spammer_off"} {$this->lang->words['spm_off']}</a></li>
											</if>
										</if>
										<if test="dnameHistory:|:$this->memberData['member_id'] && $this->memberData['g_mem_info'] && $this->settings['auth_allow_dnames']">
											<li id='dname_history'><a href='{parse url="app=members&amp;module=profile&amp;section=dname&amp;id={$member['member_id']}" base="public"}' title='{$this->lang->words['view_dname_history']}'>{parse replacement="display_name"} {$this->lang->words['display_name_history']}</a></li>
										</if>
								
										<if test="supModCustomizationDisable:|:($member['member_id'] != $this->memberData['member_id'] AND $this->memberData['g_is_supmod'] ) AND $member['customization']['type']">
											<li><strong><a href='{parse url="showuser={$member['member_id']}&amp;secure_key={$this->member->form_hash}&amp;removeCustomization=1" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'><img src='{$this->settings['img_url']}/delete.png' alt='-' /> {$this->lang->words['cust_remove']}</a></strong></li>
											<li><strong><a href='{parse url="showuser={$member['member_id']}&amp;secure_key={$this->member->form_hash}&amp;removeCustomization=1&amp;disableCustomization=1" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'><img src='{$this->settings['img_url']}/delete.png' alt='-' /> {$this->lang->words['cust_disable']}</a></strong></li>
										</if>
									</ul>
								</div>
							</if>
							
							<if test="$member['pp_setting_count_friends'] and $this->settings['friends_enabled']">
								<div class='general_box clearfix' id='friends_overview'>
									<h3>{$this->lang->words['m_title_friends']}</h3>
									<div class='ipsPad'>
										<if test="hasFriends:|:count($friends) AND is_array($friends)">
											<foreach loop="friendsLoop:$friends as $friend">
												<a href='{parse url="showuser={$friend['member_id']}" base="public" template="showuser" seotitle="{$friend['members_seo_name']}"}' class='ipsUserPhotoLink'>
													<img src='{$friend['pp_mini_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' data-tooltip='{$friend['members_display_name']}' />
												</a>
											</foreach>
										<else />
											<p class='desc'>
												{$member['members_display_name']} {$this->lang->words['no_friends_yet']}
											</p>
										</if>
									</div>
								</div>
							</if>
							
							<if test="latest_visitors:|:$member['pp_setting_count_visitors']">
								<div class='general_box clearfix'>
									<h3>{$this->lang->words['latest_visitors']}</h3>
									<if test="has_visitors:|:is_array( $visitors ) && count( $visitors )">
										<ul class='ipsList_withminiphoto ipsPad'>
											<foreach loop="latest_visitors_loop:$visitors as $visitor">
											<li class='clearfix'>
												<if test="visitorismember:|:$visitor['member_id']">
													<a href='{parse url="showuser={$visitor['member_id']}" seotitle="{$visitor['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$visitor['pp_mini_photo']}' alt='{$this->lang->words['photo']}' class='ipsUserPhoto ipsUserPhoto_mini' /></a>
												<else />
													<img src='{$visitor['pp_mini_photo']}' alt='{$this->lang->words['photo']}' class='ipsUserPhoto ipsUserPhoto_mini left' />
												</if>
												<div class='list_content'>
													{parse template="userHoverCard" group="global" params="$visitor"}
													<br />
													<span class='desc lighter'>{$visitor['_visited_date']}</span>
												</div>
											</li>
											</foreach>
										</ul>
									<else />
										<p class='ipsPad desc'>{$this->lang->words['no_latest_visitors']}</p>
									</if>
								</div>
							</if>
						</div>
					</div>
					
					<if test="$default_tab != 'core:info'">
					<div id='pane_{$default_tab}'>
						{$default_tab_content}
					</div>
					</if>
				</div>
				
			</div>
		</div>
		
	</div>
</div>
<if test="thisIsNotUs:|:($this->memberData['member_id'] && $member['member_id'] != $this->memberData['member_id'])">
	<br />
	<ul class='topic_buttons'>
		<li class='non_button clearfix'><a href='{parse url="app=core&amp;module=reports&amp;section=reports&amp;rcom=profiles&amp;member_id={$member['member_id']}" base="public"}'>{$this->lang->words['report_member']}</a></li>
	</ul>
</if>
<script type='text/javascript'>
	$("profile_content").setStyle( { minHeight: $('profile_tabs').measure('margin-box-height') + 138 + "px" } );
</script>

<!-- ******************************************************************************************* -->
{parse template="include_highlighter" group="global" params=""}]]></template_content>
      <template_name>profileModern</template_name>
      <template_data><![CDATA[$tabs=array(), $member=array(), $visitors=array(), $default_tab='status', $default_tab_content='', $friends=array(), $status=array(), $warns=array()]]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="like"}
<h1 class='ipsType_pagetitle'>{$this->lang->words[ $langBit ]}</h1>
<br />
<div class='general_box'>
	<if test="hasMoreThanOneApp:|:count( $supportedApps ) > 1">
		<div class='maintitle ipsFilterbar clearfix'>
			<ul class='ipsList_inline ipsType_smaller left'>
				<foreach loop="apps:$supportedApps as $_app">
					<li <if test="isTheActiveApp:|:$_app['app_directory'] == $currentApp">class='active'</if>>
						<a href='{parse url="app=members&amp;module=reputation&amp;section=most&amp;app_tab={$_app['app_directory']}" base="public" template="most_liked" seotitle="most_liked"}'>
							{IPSLib::getAppTitle($_app['app_directory'])}
						</a>
					</li>
				</foreach>
			</ul>
		</div>
	</if>
	<if test="hasResults:|:$processedResults">
		{$processedResults}
	<else />
		<div class='no_messages'>{$this->lang->words['reputation_empty']}</div>
	</if>
</div>]]></template_content>
      <template_name>reputationPage</template_name>
      <template_data><![CDATA[$langBit, $currentApp='', $supportedApps=array(), $processedResults='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='vcard userpopup'>
	<h3><a href="{parse url="showuser={$member['member_id']}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}" class="fn nickname url">{$member['members_display_name']}</a></h3>
	<div class='side left ipsPad'>
		<a href="{parse url="showuser={$member['member_id']}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}" class="ipsUserPhotoLink">
			<img src="{$member['pp_thumb_photo']}" alt="{$this->lang->words['get_photo']}" class='ipsUserPhoto ipsUserPhoto_large' />
		</a>
		<br />
		<if test="cardRep:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
			<if test="cardRepPos:|:$member['pp_reputation_points'] > 0">
				<div class='reputation positive'>
			</if>
			<if test="cardRepNeg:|:$member['pp_reputation_points'] < 0">
				<div class='reputation negative'>
			</if>
			<if test="cardRepZero:|:$member['pp_reputation_points'] == 0">
				<div class='reputation zero'>
			</if>
					<span class='number'>{$member['pp_reputation_points']}</span>
				</div>
		</if>
		<a href='{parse url="app=core&amp;module=search&amp;do=user_activity&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['gbl_find_my_content']}' class='ipsButton_secondary ipsType_smaller'>{$this->lang->words['gbl_find_my_content']}</a>
		<if test="cardSendPm:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' ) AND $member['members_disable_pm'] == 0">
			<a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['member_id']}" base="public"}' title='{$this->lang->words['pm_this_member']}' id='pm_xxx_{$member['member_id']}' class='pm_button ipsButton_secondary ipsType_smaller'>{$this->lang->words['pm_this_member']}</a>
		</if>
	</div>
	<div class='ipsPad'>
		<if test="cardStatus:|:$member['_status']['status_content']">
			<p class='message user_status'>{$member['_status']['status_content']}</p>
		</if>
		<div class='info'>			
			<dl>
				<dt>{$this->lang->words['m_group']}</dt>
				<dd>{$member['_group_formatted']}</dd>
				<dt>{$this->lang->words['m_posts']}</dt>
				<dd>{parse format_number="$member['posts']"}</dd>
				<dt>{$this->lang->words['m_member_since']}</dt>
				<dd>{parse date="$member['joined']" format="joined"}</dd>
				<dt>{$this->lang->words['m_last_active']}</dt>
				<dd><if test="cardOnline:|:$member['_online']"><span class='ipsBadge ipsBadge_green'>{$this->lang->words['online_online']}</span><else /><span class='ipsBadge ipsBadge_grey'>{$this->lang->words['online_offline']}</span></if> {$member['_last_active']}</dd>
				<if test="cardWhere:|:$member['_online'] && ($member['online_extra'] != $this->lang->words['not_online'])">
					<dt>{$this->lang->words['m_currently']}</dt>
					<dd>
						{$member['online_extra']}
					</dd>
				</if>
				<if test="isadmin:|:$this->memberData['g_access_cp'] == 1">
					<dt>{$this->lang->words['m_email']}</dt>
					<dd><a href='mailto:{$member['email']}'>{$member['email']}</a></dd>
				</if>
			</dl>
		</div>
		<ul class='user_controls clear'>
			<if test="authorspammer:|:$member['spamStatus'] !== NULL && $member['member_id'] != $this->memberData['member_id']">
				<if test="authorspammerinner:|:$member['spamStatus'] === TRUE">
					<li><a href='#' title='{$this->lang->words['spm_on']}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, false)">{parse replacement="spammer_on"}</a></li>
				<else />
					<li><a title='{$this->lang->words['spm_off']}' href='{$this->settings['base_url']}app=core&amp;module=modcp&amp;do=setAsSpammer&amp;member_id={$member['member_id']}&amp;auth_key={$this->member->form_hash}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, true)">{parse replacement="spammer_off"}</a></li>
				</if>
			</if>
			<if test="cardFriend:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
				<if test="cardIsFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
					<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'>{parse replacement="remove_friend"}</a></li>
				<else />
					<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'>{parse replacement="add_friend"}</a></li>								
				</if>
			</if>			
			<if test="cardBlog:|:$member['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
				<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}'>{parse replacement="blog_link"}</a></li>
			</if>
			<if test="cardGallery:|:$member['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
				<li><a href='{parse url="app=gallery&amp;user={$member['member_id']}" seotitle="{$member['members_seo_name']}" template="useralbum" base="public"}' title='{$this->lang->words['view_gallery']}'>{parse replacement="gallery_link"}</a></li>
			</if>
		</ul>
	</div>
</div>]]></template_content>
      <template_name>showCard</template_name>
      <template_data>$member, $download=0</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="!$no_wrapper">
	<ul class='ipsList_withtinyphoto clear'>
</if>
<foreach loop="innerLoop:$replies as $reply">
	<li id='statusReply-{$reply['reply_id']}' class='ipsPad row2'>
		<a href='{parse url="showuser={$reply['member_id']}" seotitle="{$reply['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$reply['pp_mini_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$reply['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_tiny' /></a>	
		<div class="status_mini_content list_content">
			<h5><strong>{parse template="userHoverCard" group="global" params="$reply"}</strong></h5>
			{$reply['reply_content']}
			<br />
			<span class='desc lighter'>{$reply['reply_date_formatted']}</span>
			<span class='desc mod_links'>
				<if test="canDelete:|:$reply['_canDelete']"> &middot; <a href="{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=deleteReply&amp;status_id={$reply['reply_status_id']}&amp;reply_id={$reply['reply_id']}&amp;k={$this->member->form_hash}" id="statusReplyDelete-{$reply['reply_status_id']}-{$reply['reply_id']}" class="__sDR __dr{$reply['reply_status_id']}-{$reply['reply_id']}">{$this->lang->words['status_delete_link']}</a></if>
			</span>
		</div>
	</li>
</foreach>
<if test="!$no_wrapper">
	</ul>
</if>]]></template_content>
      <template_name>statusReplies</template_name>
      <template_data>$replies=array(), $no_wrapper=false</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<foreach loop="outerLoop:$updates as $id => $status">
	<if test="$this->memberData['member_id'] AND $latestOnly AND $status['member_id'] == $this->memberData['member_id']">
	<script type="text/javascript">
		ipb.status.myLatest = {$status['status_id']};
	</script>
	</if>
	<div class='ipsBox_container ipsPad' id='statusWrap-{$status['status_id']}'>
		<a href='{parse url="showuser={$status['member_id']}" seotitle="{$status['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'>
			<img src='{$status['pp_small_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$status['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_medium' />
		</a>	
		<div class="ipsBox_withphoto status_content">
			<div id="statusContent-{$status['status_id']}">
				<h4>
					{parse template="userHoverCard" group="global" params="$status"}
					<if test="forSomeoneElse:|:$status['status_member_id'] != $status['status_author_id']">
						&rarr;
						{parse template="userHoverCard" group="global" params="$status['owner']"}
					</if>
				</h4>
				<div class='status_status'>
					{$status['status_content']}
				</div>
				<span class='desc lighter blend_links'>
					<img src="{$this->settings['img_url']}/icon_lock.png" id='statusLockImg-{$status['status_id']}' alt="{$this->lang->words['status__locked']}" <if test="noLocked:|:!$status['status_is_locked']">style='display: none'</if> />
					<if test="cImg:|:! $smallSpace AND $status['_creatorImg']"><img src="{$status['_creatorImg']}" alt='' /></if>
					<a href='{parse url="app=members&amp;module=profile&amp;section=status&amp;type=single&amp;status_id={$status['status_id']}" seotitle="true" template="members_status_single" base="public"}'>{$status['status_date_formatted_short']}</a><if test="creatorText:|:$smallSpace AND $status['_creatorText'] AND $status['status_creator'] AND $status['status_creator'] != 'ipb'"> {$this->lang->words['su_via']} {$status['_creatorText']}</if>
				</span>
				<span class='mod_links'>
					<if test="canDelete:|:$status['_canDelete']"> &middot; <a rel="nofollow" href="{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=deleteStatus&amp;status_id={$status['status_id']}&amp;k={$this->member->form_hash}" id="statusDelete-{$status['status_id']}" class="__sD __d{$status['status_id']}">{$this->lang->words['status_delete_link']}</a></if>
					<span id='statusUnlock-{$status['status_id']}' <if test="isLocked:|:$status['_isLocked'] AND $status['_canUnlock']">style='display:inline'<else />style='display:none'</if>> &middot; <a rel="nofollow"  href="{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=unlockStatus&amp;status_id={$status['status_id']}&amp;k={$this->member->form_hash}" id="statusUnlockLink-{$status['status_id']}" class="__sU __u{$status['status_id']}">{$this->lang->words['status_unlock_link']}</a></span>
					<span id='statusLock-{$status['status_id']}' <if test="canLock:|:$status['_canLock'] AND ! $status['_isLocked']">style='display:inline'<else />style='display:none'</if>> &middot; <a rel="nofollow"  href="{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=lockStatus&amp;status_id={$status['status_id']}&amp;k={$this->member->form_hash}" id="statusLockLink-{$status['status_id']}" class="__sL __l{$status['status_id']}">{$this->lang->words['status_lock_link']}</a></span>
				</span>
			</div>
			<div id="statusFeedback-{$status['status_id']}" class='status_feedback'>
				<if test="$status['status_replies'] AND count( $status['replies'] )">
					<if test="hasMore:|:$status['status_replies'] > 3">
						<div class='status_mini_wrap row2 altrow' id='statusMoreWrap-{$status['status_id']}'>
							<img src="{$this->settings['img_url']}/comments.png" alt="" /> &nbsp;<a href="#" id="statusMore-{$status['status_id']}" class='__showAll __x{$status['status_id']}'>{parse expression="sprintf( $this->lang->words['status_show_all_x'], $status['status_replies'] )"}</a>
						</div>
					</if>
					<ul id='statusReplies-{$status['status_id']}' class='ipsList_withtinyphoto clear'>
						{parse template="statusReplies" group="profile" params="$status['replies'], 1"}
					</ul>
				</if>
				<div id='statusReplyBlank-{$status['status_id']}'></div>
				<div id='statusReply-{$status['status_id']}'>
				<if test="$status['_userCanReply']">
					<ul class='ipsList_withtinyphoto reply row2 ipsPad'>
						<li>
							<form id='statusReplyForm-{$status['status_id']}' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=reply&amp;status_id={$status['status_id']}&amp;k={$this->member->form_hash}&amp;id={$this->memberData['member_id']}' method='post'>
								<a href='{parse url="showuser={$this->memberData['member_id']}" seotitle="{$this->memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink left'><img src='{$this->memberData['pp_mini_photo']}' alt="{parse expression="sprintf($this->lang->words['users_photo'],$this->memberData['members_display_name'])"}" class='ipsUserPhoto ipsUserPhoto_tiny' /></a>
								<div class='list_content'>
									<div class="status_mini_content">
										<textarea class='status_textarea input_text' rows='3' cols='50' name='comment-{$status['status_id']}' id='statusText-{$status['status_id']}'></textarea>
										<div class="status_submit"><input type='submit' class='__submit input_submit' id='statusSubmit-{$status['status_id']}' value='{$this->lang->words['status__dfcomment']}' /></div>
									</div>									
								</div>
							</form>
							<a href='#' class='__showform' id='statusReplyFormShow-{$status['status_id']}' style='display: none'>{$this->lang->words['status__addcomment']}</a>
						</li>
					</ul>
					<script type='text/javascript'>
						if( $('statusReplyForm-{$status['status_id']}') )
						{
							$('statusReplyForm-{$status['status_id']}').hide();
						}
						
						if( $('statusReplyFormShow-{$status['status_id']}') )
						{
							$('statusReplyFormShow-{$status['status_id']}').show();
						}
					</script>
				</if>
				</div>
				<div class='status_mini_wrap row2 altrow' id='statusMaxWrap-{$status['status_id']}' <if test="maxReplies:|:$status['status_replies'] < $this->settings['su_max_replies']">style='display:none'</if>>
					<img src="{$this->settings['img_url']}/locked_replies.png" title="{$this->lang->words['status_too_many_replies']}" alt='x' /> {$this->lang->words['status_too_many_replies']}
				</div>
			</div>
		</div>
	</div>
</foreach>]]></template_content>
      <template_name>statusUpdates</template_name>
      <template_data>$updates=array(), $smallSpace=0, $latestOnly=0</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="status"}
{parse striping="recent_status" classes="row1,row2 altrow"}
<h1 class='ipsType_pagetitle'>{$this->lang->words['status_updates__overview']}</h1>
<br />
<div id='status_standalone_page'>
	<div class='maintitle ipsFilterbar'>
		<ul class='ipsList_inline'>
			<li id='status_all' class='<if test="tabactive:|:! $this->request['status_id'] AND ! $this->request['member_id'] AND ! $this->request['type'] OR $this->request['type'] == 'all'">active</if>'><a href='{parse url="app=members&amp;module=profile&amp;section=status&amp;type=all" seotitle="true" template="members_status_all" base="public"}'>{$this->lang->words['status__all_updates']}</a></li>
			<if test="$this->memberData['member_id'] AND $this->settings['friends_enabled']">
				<li id='status_all' class='tab_toggle <if test="tabactive2:|:$this->request['type'] == 'friends'">active</if>'><a href='{parse url="app=members&amp;module=profile&amp;section=status&amp;type=friends" seotitle="true" template="members_status_friends" base="public"}'>{$this->lang->words['status__myfriends']}</a></li>
			</if>
			<if test="$this->request['member_id']">
				<li id='status_by_id' class='active'><a href='#'>{$this->lang->words['status__membersupdats']}</a></li>
			</if>
			<if test="$this->request['status_id']">
				<li id='status_by_sid' class='active'><a href='#'>{$this->lang->words['status__singleupdate']}</a></li>
			</if>
		</ul>
	</div>
	<if test="canCreate:|:$this->memberData['member_id'] AND $this->registry->getClass('memberStatus')->canCreate( $this->memberData )">
		<div class='status_update row2'>
			<form id='statusForm' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=new&amp;k={$this->member->form_hash}&amp;id={$this->memberData['member_id']}' method='post'>
			<input type='text' id='statusUpdate_page' name='content' style='width:60%' class='input_text'> <input type='submit' class='ipsButton' id='statusSubmit_page' value='{$this->lang->words['gbl_post']}' />
			<if test="update:|:(IPSLib::twitter_enabled() OR IPSLib::fbc_enabled() ) AND ( $this->memberData['fb_uid'] OR $this->memberData['twitter_id'] )">
				<p class='desc' style='padding-top:5px;'>{$this->lang->words['st_update']}
					<if test="updateTwitter:|:IPSLib::twitter_enabled() AND ( $this->memberData['twitter_id'] )"><input type='checkbox' id='su_Twitter' value='1' name='su_Twitter' /> <img src="{$this->settings['public_dir']}style_status/twitter.png" style='vertical-align:top' alt='' /></if>
					<if test="updateFacebook:|:IPSLib::fbc_enabled() AND ( $this->memberData['fb_uid'] )"><input type='checkbox' id='su_Facebook' value='1' name='su_Facebook' /> <img src="{$this->settings['public_dir']}style_status/facebook.png" style='vertical-align:top' alt='' /></if>
				</p>
			</if>
			</form>
		</div>
	</if>
	<div id="status_wrapper" class='ipsBox'>
		<if test="hasUpdates:|:count( $updates )">
			{parse template="statusUpdates" group="profile" params="$updates"}
		<else />
			<p class='no-status'>{$this->lang->words['status_updates_none']}</p>
		</if>
	</div>
	<div class='topic_controls clearfix'>
		{$pages}
	</div>
</div>]]></template_content>
      <template_name>statusUpdatesPage</template_name>
      <template_data><![CDATA[$updates=array(), $pages='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='general_box'>
	<if test="friends:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends'] AND $member['pp_setting_count_friends']">
		<div class='friend_list clear' id='friend_list'>
			<h3 class='bar'>{$this->lang->words['m_title_friends']}</h3>
			<if test="friends_loop:|:is_array($friends) and count($friends)">
				<ul class='clearfix'>
				<foreach loop="friends:$friends as $friend">
					<li>
						<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' class='ipsUserPhotoLink'>
							<img src='{$friend['pp_small_photo']}' alt='{$this->lang->words['photo']}' class='ipsUserPhoto ipsUserPhoto_medium' />
						</a><br />
						<span class='name'>
							{parse expression="IPSMember::makeProfileLink($friend['members_display_name_short'], $friend['member_id'], $friend['members_seo_name'])"}
						</span>
					</li>
				</foreach>
				</ul>				
			<else />
				<p>
					<em>{$member['members_display_name']} {$this->lang->words['no_friends_yet']}</em>
				</p>
			</if>
		</div>
		<br />
		{$pagination}
	</if>
</div>]]></template_content>
      <template_name>tabFriends</template_name>
      <template_data><![CDATA[$friends=array(), $member=array(), $pagination='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='no_messages'>{$this->lang->words[ $langkey ]}</div>]]></template_content>
      <template_name>tabNoContent</template_name>
      <template_data>$langkey</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='maintitle'>{$this->lang->words['posts_made']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		{$content}
	</div>
</div>]]></template_content>
      <template_name>tabPosts</template_name>
      <template_data>$content</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='general_box'>
	<div class='maintitle ipsFilterbar clearfix'>
		<if test="hasMoreThanOneApp:|:count( $supportedApps ) > 1">
			<ul class='ipsList_inline ipsType_smaller left'>
				<foreach loop="apps:$supportedApps as $_app">
					<li <if test="isTheActiveApp:|:$_app['app_directory'] == $currentApp">class='active'</if>>
						<a href='{parse url="showuser={$member['member_id']}&amp;tab=reputation&amp;app_tab={$_app['app_directory']}&amp;type={$type}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'>
							{IPSLib::getAppTitle($_app['app_directory'])}
						</a>
					</li>
				</foreach>
			</ul>
		</if>
		<ul class='ipsList_inline ipsType_smaller right'>
			<li <if test="currentIsGiven:|:$type == 'given'">class='active'</if>>
				<a href='{parse url="showuser={$member['member_id']}&amp;tab=reputation&amp;app_tab={$currentApp}&amp;type=given" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'>
					{$this->lang->words['reputation_given']}
				</a>
			</li>
			<li <if test="currentIsReceived:|:$type == 'received'">class='active'</if>>
				<a href='{parse url="showuser={$member['member_id']}&amp;tab=reputation&amp;app_tab={$currentApp}&amp;type=received" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}'>
					{$this->lang->words['reputation_received']}
				</a>
			</li>
		</ul>
	</div>
	<if test="hasResults:|:$processedResults">
		{$processedResults}
	<else />
		<div class='no_messages'>{$this->lang->words['reputation_empty']}</div>
	</if>
	<if test="bottomPagination:|:$pagination">
		<br />
		{$pagination}
		<br class='clear' />
	</if>
</div>]]></template_content>
      <template_name>tabReputation</template_name>
      <template_data><![CDATA[$member, $currentApp='', $type='', $supportedApps=array(), $processedResults='', $pagination='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='ipsBox'>
	<foreach loop="$results as $data">
		<if test="$data['type'] == 'comment_id'">
			<div class='post_block hentry clear no_sidebar ipsBox_container'>
				<div class='post_wrap'>
					<if test="postMid:|:$data['comment_mid']">
						<h3 class='row2'>
					<else />
						<h3 class='guest row2'>
					</if>
						<a href="{parse url="app=calendar&amp;module=calendar&amp;section=view&amp;do=showevent&amp;event_id={$data['event_id']}" template="cal_event" seotitle="{$data['event_title_seo']}" base="public"}">{IPSText::truncate( $data['event_title'], 80)}</a>
					</h3>
					<div class='post_body'>
						<p class='posted_info desc lighter ipsType_small'>
							<img src='{$data['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_tiny' /> {$this->lang->words['posted']} {$this->lang->words['by']}
							<if test="postMember:|:$data['member_id']"><span class="author vcard">{parse template="userHoverCard" group="global" params="$data"}</span><else />{$data['members_display_name']}</if>
							{$this->lang->words['on']} <abbr class="published" title="{parse expression="date( 'c', $data['comment_date'] )"}">{parse date="$data['comment_date']" format="long"}</abbr>
							{$this->lang->words['cal_in']}
							<a href="{parse url="app=calendar&amp;module=calendar&amp;section=view&amp;do=showevent&amp;event_id={$data['event_id']}" template="cal_event" seotitle="{$data['event_title_seo']}" base="public"}">{$data['event_title']}</a>
						</p>
						<div class='post entry-content clearfix'>
							{$data['comment_text']}
							<br />
							{parse template="repButtons" group="global_other" params="$data, array_merge( array( 'primaryId' => $data['comment_id'], 'domLikeStripId' => 'like_comment_id_' . $data['comment_id'], 'domCountId' => 'rep_comment_id_' . $data['comment_id'], 'app' => 'calendar', 'type' => 'comment_id', 'likeFormatted' => $data['repButtons']['formatted'] ), $data )"}
						</div>
					</div>
				</div>
				<br />
			</div>
			<br />
		<else />
			<div class='post_block hentry clear no_sidebar ipsBox_container'>
				<div class='post_wrap'>
					<if test="postMid:|:$data['event_member_id']">
						<h3 class='row2'>
					<else />
						<h3 class='guest row2'>
					</if>
						<a href="{parse url="app=calendar&amp;module=calendar&amp;section=view&amp;do=showevent&amp;event_id={$data['event_id']}" template="cal_event" seotitle="{$data['event_title_seo']}" base="public"}">{IPSText::truncate( $data['event_title'], 80)}</a>
					</h3>
					<div class='post_body'>
						<p class='posted_info desc lighter ipsType_small'>
							<img src='{$data['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_tiny' /> {$this->lang->words['posted']} {$this->lang->words['by']}
							<if test="postMember:|:$data['member_id']"><span class="author vcard">{parse template="userHoverCard" group="global" params="$data"}</span><else />{$data['members_display_name']}</if>
							{$this->lang->words['on']} <abbr class="published" title="{parse expression="date( 'c', $data['event_saved'] )"}">{parse date="$data['event_saved']" format="long"}</abbr>
						</p>
						<div class='post entry-content clearfix'>
							{$data['event_content']}
							<br />
							{parse template="repButtons" group="global_other" params="$data, array_merge( array( 'primaryId' => $data['event_id'], 'domLikeStripId' => 'like_event_id_' . $data['event_id'], 'domCountId' => 'rep_event_id_' . $data['event_id'], 'app' => 'calendar', 'type' => 'event_id', 'likeFormatted' => $data['repButtons']['formatted'] ), $data )"}
						</div>
					</div>
				</div>
				<br />
			</div>
			<br />
		</if>
	</foreach>
</div>]]></template_content>
      <template_name>tabReputation_calendar</template_name>
      <template_data>$results</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='ipsBox'>
	<foreach loop="$results as $data">
		<div class='post_block hentry clear no_sidebar ipsBox_container'>
			<div class='post_wrap'>
				<if test="postMid:|:$data['author_id']">
					<h3 class='row2'>
				<else />
					<h3 class='guest row2'>
				</if>
					<span class='post_id right ipsType_small desc blend_links'><a href='{parse url="showtopic={$data['topic_id']}&amp;view=findpost&amp;p={$data['pid']}" template="showtopic" seotitle="{$data['title_seo']}" base="public"}' rel='bookmark' title='{$this->lang->words['link_to_post']} #{$data['pid']}'>#{$data['pid']}</a></span>
					<a href="{parse url="showtopic={$data['tid']}" seotitle="{$data['title_seo']}" template="showtopic" base="public"}">{IPSText::truncate( $data['topic_title'], 80)}</a>
				</h3>
				<div class='post_body'>
					<p class='posted_info desc lighter ipsType_small'>
						<img src='{$data['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_tiny' /> {$this->lang->words['posted']} {$this->lang->words['search_by']}
						<if test="postMember:|:$data['member_id']"><span class="author vcard">{parse template="userHoverCard" group="global" params="$data"}</span><else />{$data['members_display_name']}</if>
						{$this->lang->words['on']} <abbr class="published" title="{parse expression="date( 'c', $data['post_date'] )"}">{parse date="$data['post_date']" format="long"}</abbr>
						<if test="hasForumTrail:|:$data['_forum_trail']">
							in
							<foreach loop="topicsForumTrail:$data['_forum_trail'] as $i => $f">
								<if test="notLastFtAsForum:|:$i+1 == count( $data['_forum_trail'] )"><a href='{parse url="{$f[1]}" template="showforum" seotitle="{$f[2]}" base="public"}'>{$f[0]}</a></if>
							</foreach>
						</if>
					</p>
					<div class='post entry-content clearfix'>
						{$data['post']}
						<br />
						{parse template="repButtons" group="global_other" params="$data, array_merge( array( 'primaryId' => $data['pid'], 'domLikeStripId' => 'like_post_' . $data['pid'], 'domCountId' => 'rep_post_' . $data['pid'], 'app' => 'forums', 'type' => 'pid', 'likeFormatted' => $data['repButtons']['formatted'], 'has_given_rep' => $data['repButtons']['iLike'] ), $data )"}
					</div>
				</div>
			</div>
			<br />
		</div>
		<br />
	</foreach>
</div>]]></template_content>
      <template_name>tabReputation_posts</template_name>
      <template_data>$results</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='post_block no_sidebar'>
	<div class='post_wrap'>
		<if test="singleColumnTitle:|:$title">
			<if test="singleColumnUrl:|:$url">
				<h3 class='row2'><a href="$url" title="{$this->lang->words['view_topic']}">{parse expression="IPSText::truncate( $title, 90 )"}</a></h3>
			<else />
				<h3 class='row2'>{parse expression="IPSText::truncate( $title, 90 )"}</h3>
			</if>
		</if>
		<div class='post_body'>
			<p class='posted_info'>
				<if test="date:|:$row['_raw_date']">{parse date="$row['_raw_date']" format="long"}<else />{$this->lang->words['posted']} {$row['_date_array']['mday']} {$row['_date_array']['smonth']} {$row['_date_array']['year']}</if>
			</p>
			<div class='post'>
				{$row['post']}
			</div>
		</div>
	</div>
	<br />
</div>]]></template_content>
      <template_name>tabSingleColumn</template_name>
      <template_data><![CDATA[$row=array(), $read_more_link='', $url='', $title='']]></template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse striping="recent_status" classes="row1,row2"}
<h2 class='maintitle'>{$this->lang->words['pp_tab_statusupdates']}</h2>
<if test="canCreate:|:$this->memberData['member_id'] AND ( $this->memberData['member_id'] == $member['member_id'] ) AND $this->registry->getClass('memberStatus')->canCreate( $member )">
	<div class='status_update'>
		<form id='statusForm' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=new&amp;k={$this->member->form_hash}&amp;id={$this->memberData['member_id']}&amp;forMemberId={$member['member_id']}' method='post'>
		<input type='text' name='content' id='statusUpdate_page' class='input_text' /> <input type='submit' class='ipsButton' id='statusSubmit_page' value='{$this->lang->words['gbl_post']}' />
		<if test="update:|:( IPSLib::loginMethod_enabled('facebook') AND $this->memberData['fb_uid'] ) OR ( IPSLib::loginMethod_enabled('twitter') AND $this->memberData['twitter_id'] )">
			<p class='desc' style='padding-top:5px;'>{$this->lang->words['st_update']}
				<if test="updateTwitter:|:IPSLib::loginMethod_enabled('twitter') AND $this->memberData['twitter_id']"><input type='checkbox' id='su_Twitter' value='1' name='su_Twitter' /> <img src="{$this->settings['public_dir']}style_status/twitter.png" style='vertical-align:top' alt='' /></if>
				<if test="updateFacebook:|:IPSLib::loginMethod_enabled('facebook') AND $this->memberData['fb_uid']">&nbsp;<input type='checkbox' id='su_Facebook' value='1' name='su_Facebook' /> <img src="{$this->settings['public_dir']}style_status/facebook.png" style='vertical-align:top' alt='' /></if>
			</p>
		</if>
		</form>
	</div>
</if>
<if test="leave_comment:|:$this->memberData['member_id'] && $this->memberData['member_id'] != $member['member_id'] && $member['pp_setting_count_comments']">
	<div class='status_update'>
		<form id='commentForm' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status&amp;do=new&amp;k={$this->member->form_hash}&amp;id={$this->memberData['member_id']}&amp;forMemberId={$member['member_id']}' method='post'>
				<input type='hidden' name='member_id' value='{$member['member_id']}' />
				<input type='hidden' name='auth_key' value='{$this->member->form_hash}' />
				<div id='post_comment'>
					<input type='text' class='input_text' cols='50' rows='3' id='statusUpdate_page' name='content' data-for-member-id="{$member['member_id']}" />
					<input type='submit' class='ipsButton' value='{$this->lang->words['comment_submit_post']}' data-for-member-id="{$member['member_id']}" id='statusSubmit_page' />
				</div> 
		</form>
	</div>
</if>
<div class='ipsBox clearfix'>
	<div id="status_wrapper" data-member="{$member['member_id']}">
		<if test="hasUpdates:|:count( $updates )">
			{parse template="statusUpdates" group="profile" params="$updates"}
			<div style='text-align: center'>
				<a href='{parse url="app=members&amp;module=profile&amp;section=status&amp;member_id={$member['member_id']}" seotitle="true" template="members_status_all" base="public"}' class='ipsButton_secondary'>{$this->lang->words['status__viewall']}</a>
			</div>
		<else />
			<p class='ipsBox_container ipsPad'>{$this->lang->words['status_updates_none']}</p>
		</if>
	</div>
</div>]]></template_content>
      <template_name>tabStatusUpdates</template_name>
      <template_data>$updates=array(), $actions, $member=array()</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='maintitle'>{$this->lang->words['topics_started']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		{$content}
	</div>
</div>]]></template_content>
      <template_name>tabTopics</template_name>
      <template_data>$content</template_data>
      <template_updated>1339584003</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
  </templategroup>
  <templategroup group="skin_ucp">
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<h3 class='ipsType_subtitle'>{$this->lang->words['m_attach']}</h3>
<br />
<div class='row1'>	
	<if test="hasAttachLimit:|:$info['has_limit'] == 1">
		<div id='space_allowance' class='general_box'>
			<p><strong>{$info['attach_space_used']}</strong></p>
			<p class='progress_bar <if test="attachAlmostFull:|:$info['full_percent'] > 80">limit</if>' title='{$this->lang->words['ucp_attach_allowance']} {$info['full_percent']}% {$this->lang->words['ucp_full']}'>
				<span style='width: {$info['full_percent']}%'>{$info['full_percent']}%</span>
			</p>
			<p class='desc'>{$info['attach_space_count']}</p>
		</div>
	</if>
	<if test="hasPagesTop:|:$pages">
		<div class='topic_controls'>
			{$pages}
		</div>
		<br class='clear' />
	</if>
	<!-- ATTACHMENTS TABLE -->
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=updateAttachments&amp;do=saveIt" base="public"}" id="checkBoxForm" method="post">
	<table class='ipb_table' summary="{$this->lang->words['ucp_user_attach']}">
		<tr class='header'>
				<th scope='col' style='width: 2%'>&nbsp;</th>
				<th scope='col' style='width: 35%'>{$this->lang->words['attach_title']}</th>
				<th scope='col' style='width: 7%'>{$this->lang->words['attach_hsize']}</th>
				<th scope='col' style='width: 27%'>{$this->lang->words['attach_topic']}</th>
				<th scope='col' class='short' style='width: 3%'><input class='input_check' id="checkAllAttachments" type="checkbox" value="{$this->lang->words['check_all']}" /></th>
			</tr>
			<if test="hasAttachments:|:count($attachments)">
				{parse striping="attach" classes="row1,row2"}
				<foreach loop="attach:$attachments as $idx => $data">
					<tr id="a{$data['attach_id']}" class='{parse striping="attach"}'>
							<td class='short altrow'>
								<if test="attachmentThumbLocation:|:$data['attach_thumb_location']">
									<a href="{parse url="app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['_type']}&amp;attach_id={$data['attach_id']}" base="public"}" title="{$data['attach_file']}"><img src="{$this->settings['upload_url']}/{$data['attach_thumb_location']}" width="30" height="30" alt='{$this->lang->words['attached_file']}' /></a>
								<else />
									<img src="{$this->settings['mime_img']}/{$data['image']}" alt="{$this->lang->words['attached_file']}" />
								</if>
							</td>
							<td>
								<a href="{parse url="app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['_type']}&amp;attach_id={$data['attach_id']}" base="public"}" title="{$data['attach_file']}">{$data['short_name']}</a><br />
								<span class="desc">( {$this->lang->words['attach_hits']}: {$data['attach_hits']} )</span>
							</td>
							<td class='short altrow'>{$data['real_size']}</td>
							<td>
								<if test="attachmentPost:|:$data['attach_rel_id'] > 0 AND $data['attach_rel_module'] == 'post'">
									<a href="{parse url="showtopic={$data['tid']}&amp;view=findpost&amp;p={$data['attach_rel_id']}" base="public"}" title='{$this->lang->words['ucp_view_org']}'>{$data['title']}</a>
								<else />
									{$data['title']}
								</if>
								<br />
								<span class="desc">{$data['attach_date']}</span>
							</td>
							<td class='altrow short'><input type="checkbox" name="attach[{$data['attach_id']}]" value="1" class="input_check checkall" /></td>
						</tr>
				</foreach>
			<else />
				<tr>
					<td colspan="5" class='no_messages'>{$this->lang->words['splash_noattach']}</td>
				</tr>
			</if>
		</table>
		<if test="attachmentMultiDelete:|:count($attachments)">
			<div class='moderation_bar rounded with_action clear' id='topic_mod'>
				<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
				<input type="submit" value="{$this->lang->words['attach_delete']}" class="input_submit alt" />
			</div>
		</if>
	</form>
</div>
<if test="hasPagesBottom:|:$pages">
	<div class='topic_controls'>
		{$pages}
	</div>
	<br class='clear' />
</if>
<script type='text/javascript'>
	ipb.global.registerCheckAll( 'checkAllAttachments', 'checkall' );
</script>]]></template_content>
      <template_name>coreAttachments</template_name>
      <template_data><![CDATA[$info="",$pages="",$attachments]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<if test="dnameOkMessage:|:$okmessage != """>
	<p class='message'>{$okmessage}</p>
</if>
<fieldset class='row1'>
	<h3 class='ipsType_subtitle'>{$this->lang->words['dname_title']}</h3>
	<p class='ipsType_pagedesc'>{$form['_lang_string']}</p>
	<br />
	<if test="$form['_noPerm']">
		<p class='message error'>{$form['_noPerm']}</p>
	<else />
		<ul class='ipsForm ipsForm_horizontal'>
			<li class='ipsField'>
				<label for='displayName' class='ipsField_title'>{$this->lang->words['dname_choose']}</label>
				<p class='ipsField_content'>
					<input class='input_text' type="text" maxlength='{$this->settings['max_user_name_length']}' name="displayName" id="displayName" value="{$this->request['displayName']}" size='30' /><br />
					<span class='desc lighter'>{$this->lang->words['dname_choose2']}</span>
				</p>
			</li>
			<if test="dnameFbUser:|:!$isFB">
			<li class='ipsField'>
				<label for='displayPassword' class='ipsField_title'>{$this->lang->words['dname_password']}</label>
				<p class='ipsField_content'>
					<input class='input_text' type="password" name="displayPassword" id="displayPassword" value="" size='30' /> <br />
					<span class='desc lighter'>{$this->lang->words['dname_password2']}</span>
				</p>
			</li>
			</if>
		</ul>
	</if>
</fieldset>]]></template_content>
      <template_name>displayNameForm</template_name>
      <template_data><![CDATA[$form=array(),$error="",$okmessage="", $isFB=false]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type="text/javascript">
var msg = "$_message";
	if ( msg != ""){
		alert(msg);
	}
</script>
<fieldset class='row1'>
<h3 class='ipsType_subtitle'>{$this->lang->words['m_email_pass_change']}</h3>
<if test="hideMessageIfAdmin:|:!$this->memberData['g_access_cp']"><p class='ipsType_pagedesc'>{$this->lang->words['m_email_pass_change_desc']}</p></if>
</fieldset>
<if test="emailIsAdmin:|:$this->memberData['g_access_cp']">
	<p class='message unspecific'>
		{$this->lang->words['admin_emailpassword']}
	</p>
</if>
<if test="emailIsNotAdmin:|:!$this->memberData['g_access_cp']">
	<fieldset class='row1'>
		<h3 class='ipsType_subtitle'>{$this->lang->words['change_email_title']}</h3>
		<p class='ipsType_pagedesc'>
			{$txt}
		</p>
		<br />
		<ul class='ipsForm ipsForm_horizontal'>
			<li class='ipsField clearfix'>
				<span class='ipsField_title'>{$this->lang->words['ce_current']}</span>
				<div class='ipsField_content'>
					<strong style='line-height: 1.8'>{$this->memberData['email']}</strong>
				</div>
			</li>
			<li class='ipsField clearfix'>
				<label for='in_email_1' class='ipsField_title'>{$this->lang->words['ce_new_email']}</label>
				<p class='ipsField_content'>
					<input type="text" size='30' name="in_email_1" id='in_email_1' class='input_text' value="" />
				</p>
			</li>
			<li class='ipsField clearfix'>
				<label for='in_email_2' class='ipsField_title'>{$this->lang->words['ce_new_email2']}</label>
				<p class='ipsField_content'>
					<input type="text" size='30' name="in_email_2" id='in_email_2' class='input_text' value="" />
				</p>
			</li>
			<if test="passFbUser:|:!$isFB">
			<li class='ipsField clearfix'>
				<label for='password' class='ipsField_title'>{$this->lang->words['ec_passy']}</label>
				<p class='ipsField_content'>
					<input type="password" size='30' id='password' class='input_text' name="password" value="" />
				</p>
			</li>
			</if>
		</ul>
	</fieldset>
	<fieldset class='row1'>
		<h3 class='ipsType_subtitle'>{$this->lang->words['account_pass_title']}</h3>
		<p class='ipsType_pagedesc'>
			<if test="removeUser:|:! $this->memberData['bw_local_password_set'] AND $this->memberData['members_created_remote']">
				{$this->lang->words['remote_pass_set']}
			<else />
				{$this->lang->words['pass_change_text']}
			</if>
		</p>
		<br />
		<ul class='ipsForm ipsForm_horizontal'>
			<if test="removeUser2:|:$this->memberData['bw_local_password_set'] OR ! $this->memberData['members_created_remote']">
			<li class='ipsField'>
				<label for='current_pass' class='ipsField_title'>{$this->lang->words['account_pass_old']}</label>
				<p class='ipsField_content'>
					<input type="password" name="current_pass" value="" id='current_pass' class='input_text' size='30' />
				</p>
			</li>
			</if>
			<li class='ipsField'>
				<label for='new_pass_1' class='ipsField_title'><if test="removeUser3:|:$this->memberData['bw_local_password_set'] OR ! $this->memberData['members_created_remote']">{$this->lang->words['account_pass_new']}<else />{$this->lang->words['enter_pass_remote1']}</if></label>
				<p class='ipsField_content'>
					<input type="password" name="new_pass_1" value="" id='new_pass_1' class='input_text' size='30' />
				</p>
			</li>
			<li class='ipsField'>
				<label for='new_pass_2' class='ipsField_title'><if test="removeUser4:|:$this->memberData['bw_local_password_set'] OR ! $this->memberData['members_created_remote']">{$this->lang->words['account_pass_new2']}<else />{$this->lang->words['enter_pass_remote2']}</if></label>
				<p class='ipsField_content'>
					<input type="password" name="new_pass_2" value="" id='new_pass_2' class='input_text' size='30' />
				</p>
			</li>
		</ul>
	</fieldset>
</if>]]></template_content>
      <template_name>emailPasswordChangeForm</template_name>
      <template_data>$txt, $_message, $isFB=false</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<select name="{$name}" class='input_select'>
	{$options}
</select>]]></template_content>
      <template_name>field_dropdown</template_name>
      <template_data><![CDATA[$name="",$options=""]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<li class='custom'>
	<label for='field_{$id}' class='ipsSettings_fieldtitle'>{$title}</label>
	<if test="stristr($content, 'radio') || stristr($content, 'checkbox')">
		<p class='wrap'>{$content}</p>
		<if test="cfieldDesc:|:$desc"><span class='desc'>{$desc}</span></if>
	<else />
		{$content}
		<if test="cfieldDesc:|:$desc"><br /><span class='desc'>{$desc}</span></if>
	</if>
	
</li>]]></template_content>
      <template_name>field_entry</template_name>
      <template_data><![CDATA[$title="",$desc="",$content="",$id=""]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<textarea cols="80" rows="5" wrap="soft" name="$name" class='input_text'>{$value}</textarea>]]></template_content>
      <template_name>field_textarea</template_name>
      <template_data><![CDATA[$name="",$value=""]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<input type="text" size="50" name="{$name}" value='{$value}' class='input_text' />]]></template_content>
      <template_name>field_textinput</template_name>
      <template_data><![CDATA[$name="",$value=""]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse striping="usercp" classes="row1,row2"}
<if test="fbMismatch:|:$fbuid AND $linkedMemberData['member_id'] AND $linkedMemberData['member_id'] != $this->memberData['member_id']">
	<!-- currently logged in FB user is linked to a different account -->
	<div class='message error'>
		<strong>{$this->lang->words['fb_connect_mismatch']}</strong>
		<p>{$this->lang->words['fb_connect_mismatch_desc']}</p>
	</div>
<else />
	<if test="! $fbUserData['id']">
		<div id='fbUserBox'>
			<p class='message'>{$this->lang->words['fb_config']}</p>
			<br />
			<br />
			<a href="{$this->settings['_original_base_url']}/interface/facebook/index.php"><img src="{$this->settings['img_url']}/facebook_login.png" alt="" /></a>
		</div>
	<else />
		<div>
			<fieldset class='ipsPad_half row2'>
				<div class='left ipsUserPhoto' style='margin-right:4px;'>
					<img src="{$fbUserData['pic_square']}" alt="" />
				</div>
				<div class='desc'>
				{$this->lang->words['fb_logged_in_as']} <strong>{$fbUserData['name']}</strong>
				<if test="fbShowStatus:|:is_array($fbUserData['status']) AND $fbUserData['status']['message']">
					<br /><br />{$fbUserData['status']['message']}
				</if>
				</div>
			</fieldset>
			<br />
			<fieldset class='row1'>
				<h3 class='ipsType_subtitle'>{$this->lang->words['fb_sync_options']}</h3>
				<ul>
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_pic' value='1' <if test="fbSyncPic:|:$this->memberData['fbc_s_pic'] > 0">checked='checked'</if> id='fbc_s_pic' /><label for='fbc_s_pic'>{$this->lang->words['fb_sync_photo']}</label><br />
						<span class='desc lighter'>{$this->lang->words['fb_sync_photo_info']}</span>
					</li>
					<if test="canUpdateStatus:|:$this->memberData['can_updated_status']">
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_status' value='1' <if test="fbSyncStatus:|:$this->memberData['fbc_s_status'] > 0">checked='checked'</if> id='fbc_s_status' /><label for='fbc_s_status'>{$this->lang->words['fb_sync_status']}</label>
					</li>
					</if>
					<if test="statusImportGroup:|: ! $this->memberData['gbw_no_status_import']">
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_si_status' value='1' <if test="fbSyncStatus:|:$this->memberData['fbc_si_status'] > 0">checked='checked'</if> id='fbc_si_status' /><label for='fbc_si_status'>{$this->lang->words['fb_sync_status_in']}</label>
					</li>
					</if>
				</ul>
				<p class='desc'>
					{$this->lang->words['fb_last_syncd']}
					<if test="fbLastSync:|:$this->memberData['fb_lastsync']">
						{parse date="$this->memberData['fb_lastsync']" format="long"}
					<else />
						{$this->lang->words['fb_never']}
					</if>
				</p>
				<br />
				<p><input type='submit' class='input_submit alt' id='fbc_sync' value='{$this->lang->words['fb_sync_now']}' /></p>
			</fieldset>
			<br />
			<fieldset class='row1'>
				<h3 class='ipsType_subtitle'>{$this->lang->words['fbp_title']}</h3>
				<ul>
					<li class='field checkbox'>
						<img src="{$this->settings['img_url']}/<if test="pImgOA:|:$perms['offline_access']">accept.png<else />cross.png</if>" style='vertical-align:top' alt='' />&nbsp;{$this->lang->words['fbp_offline_access']}
						<if test="pCheckOA:|:!$perms['offline_access']">&nbsp;(<fb:prompt-permission perms="offline_access">{$this->lang->words['fbp_request']}</fb:prompt-permission>)</if>
						<p class='desc' style='left:0px'>{$this->lang->words['fbp_offline_access_desc']}</p>
					</li>
					<li class='field checkbox'>
						<img src="{$this->settings['img_url']}/<if test="pImgE:|:$perms['email']">accept.png<else />cross.png</if>" style='vertical-align:top' alt='' />&nbsp;{$this->lang->words['fbp_email_access']}
						<if test="pCheckE:|:!$perms['email']">&nbsp;(<fb:prompt-permission perms="email">{$this->lang->words['fbp_request']}</fb:prompt-permission>)</if>
						<p class='desc' style='left:0px'>{$this->lang->words['fbp_email_access_desc']}</p>
					</li>
					<li class='field checkbox'>
						<img src="{$this->settings['img_url']}/<if test="pImgPS:|:$perms['publish_stream']">accept.png<else />cross.png</if>" style='vertical-align:top' alt='' />&nbsp;{$this->lang->words['fbp_publish_stream']}
						<if test="pCheckPS:|:!$perms['publish_stream']">&nbsp;(<fb:prompt-permission perms="publish_stream">{$this->lang->words['fbp_request']}</fb:prompt-permission>)</if>
						<p class='desc' style='left:0px'>{$this->lang->words['fbp_publish_stream_desc']}</p>
					</li>
					<li class='field checkbox'>
						<img src="{$this->settings['img_url']}/<if test="pImgRS:|:$perms['read_stream']">accept.png<else />cross.png</if>" style='vertical-align:top' alt='' />&nbsp;{$this->lang->words['fbp_read_stream']}
						<if test="pCheckRS:|:!$perms['read_stream']">&nbsp;(<fb:prompt-permission perms="read_stream">{$this->lang->words['fbp_request']}</fb:prompt-permission>)</if>
						<p class='desc' style='left:0px'>{$this->lang->words['fbp_read_stream_desc']}</p>
					</li>
				</ul>
			</fieldset>
			<fieldset class='row1'>
				<if test="fbPassword:|:! $this->memberData['bw_local_password_set'] AND $this->memberData['members_created_remote']">
					<div class='message'>
						<strong>{$this->lang->words['remote_no_password']}</strong>
						<p>{$this->lang->words['remote_no_password_1']} <a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=email" base="public"}'>{$this->lang->words['remote_no_password_2']}</a>
						</p>
					</div>
					<br />
				</if>
				<h3 class='ipsType_subtitle'>{$this->lang->words['fb_disassociate']}</h3>
				<p class='desc'>{$this->lang->words['fb_disassociate_desc']}</p>
				<if test="fbDefaultEmail:|:strstr( $this->memberData['email'], '@proxymail.facebook.com' )">
					<div class='message'>
						<strong>{$this->lang->words['fb_using_email']}</strong>
						<p>{$this->lang->words['fb_disassociate_info_1']} <a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=email" base="public"}'>{$this->lang->words['fb_disassociate_info_2']}</a> {$this->lang->words['fb_disassociate_info_3']}
						</p>
					</div>
					<br />
				</if>
				<br />
				<p><input type='button' class='input_submit alt' id='fbc_remove' value='{$this->lang->words['fb_disassociate_now']}' /></p>
				<br />
			</fieldset>
		</div>
		<script type="text/javascript">
		$('fbc_remove').observe( 'click', usercp_remove );
		function usercp_remove(){
			window.location = ipb.vars['base_url'] + 'app=core&module=usercp&tab=core&area=facebookRemove&do=custom&secure_key=' + ipb.vars['secure_hash'];
		}
		</script>
	</if>
</if>]]></template_content>
      <template_name>membersFacebookConnect</template_name>
      <template_data>$fbuid, $fbUserData, $linkedMemberData, $perms</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.templates['autocomplete_wrap'] = new Template("<ul id='#{id}' class='ipbmenu_content' style='width: 250px;'></ul>");
	ipb.templates['autocomplete_item'] = new Template("<li id='#{id}'><img src='#{img}' alt='' width='#{img_w}' height='#{img_h}' />&nbsp;&nbsp;#{itemvalue}</li>");
//|#^#]>
</script>
<!--<h2 class='ipsType_subtitle'>{$this->lang->words['ucp_global_prefs']}</h2>-->
<div class='ipsPad'>
	<input type='checkbox' name='donot_view_sigs' id='donot_view_sigs' value='1' <if test="canSee:|: ! $this->memberData['view_sigs']">checked='checked'</if> />
	<label class='desc' for='donot_view_sigs'>{$this->lang->words['ucp_global_prefs_desc']}</label>
</div>
<br />
<h2 class='ipsType_subtitle'>{$this->lang->words['mi5_title']}</h2>
<br />
<if test="topPagination:|:$pagination">
	{$pagination}
	<br class='clear' />
	<br />
</if>
<table class='ipb_table' summary="{$this->lang->words['ucp_ignored_users']}">
	<tr class='header'>
		<th scope='col' width="30%">{$this->lang->words['mi5_name']}</th>
		<th scope='col' width="30%">{$this->lang->words['mi5_group']}</th>
		<th scope='col' class='short'>{$this->lang->words['ucp_ignore_posts']}</th>
		<th scope='col' class='short'>{$this->lang->words['ucp_ignore_sigs']}</th>
		<th scope='col' class='short'>{$this->lang->words['ucp_ignore_msgs']}</th>
		<if test="hasChat:|:IPSLib::appIsInstalled('ipchat')"><th scope='col' class='short'>{$this->lang->words['ucp_ignore_chats']}</th></if>
		<th scope='col' class='short'>&nbsp;</th>
	</tr>
	{parse striping="members" classes="row1,row2"}
	<if test="count( $members )">
		<foreach loop="members:$members as $member">
			<tr class='{parse striping="members"}'>
				<td>
					<img src='{$member['pp_small_photo']}' class='ipsUserPhoto ipsUserPhoto_mini left' style='margin-right: 5px' />
					<strong>{parse template="userHoverCard" group="global" params="$member"}</strong><br />
					<span class='desc lighter'>{$this->lang->words['m_joined']} {parse date="$member['joined']" format="joined"}</span>
				</td>
				<td>{$member['g_title']}</td>
				<td class='short'>
					<if test="ignoreMemberTopics:|:$member['ignoreData']['ignore_topics'] == 1">
						<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=topics" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:red'>{$this->lang->words['ucp_hide_disallow']}</span></a>
					<else />
						<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=topics" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:green'>{$this->lang->words['ucp_hide_allow']}</span></a>
					</if>
				</td>
				<td class='short'>
					<if test="ignoreGlobal:|:! $this->memberData['view_sigs']">
						<span class='desc'>{$this->lang->words['ucp_ignore_sigs_glb']}</span>
					<else />
						<if test="ignoreMemberSigs:|:$member['ignoreData']['ignore_signatures'] == 1">
							<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=signatures" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:red'>{$this->lang->words['ucp_hide_disallow']}</span></a>
						<else />
							<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=signatures" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:green'>{$this->lang->words['ucp_hide_allow']}</span></a>
						</if>
					</if>
				</td>
				<td class='short'>
					<if test="ignoreMemberPms:|:$member['ignoreData']['ignore_messages'] == 1">
						<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=messages" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:red'>{$this->lang->words['ucp_hide_disallow_msg']}</span></a>
					<else />
						<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=messages" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:green'>{$this->lang->words['ucp_hide_allow_msg']}</span></a>
					</if>
				</td>
				<if test="hasChatRow:|:IPSLib::appIsInstalled('ipchat')">
					<td class='short'>
						<if test="ignoreUserchats:|:$member['ignoreData']['ignore_chats'] == 1">
							<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=chats" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:red'>{$this->lang->words['ucp_hide_disallow_msg']}</span></a>
						<else />
							<a class='ipsButton_secondary' href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=chats" base="public"}" title="{$this->lang->words['click_toggle']}"><span style='color:green'>{$this->lang->words['ucp_hide_allow_msg']}</span></a>
						</if>
					</td>
				</if>
				<td class='short'><a href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=removeIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}" base="public"}" class='ipsButton_secondary' class='delete_ignored'>{$this->lang->words['mi5_remove']}</a></td>
			</tr>
		</foreach>
	<else />
		<tr>
			<td colspan='<if test="hasChatNone:|:IPSLib::appIsInstalled('ipchat')">7<else />6</if>' class='no_messages desc'>{$this->lang->words['no_ignored_users']}</td>
		</tr>
	</if>
</table>
<if test="bottomPagination:|:$pagination">
	<br />
	{$pagination}
	<br class='clear' />
</if>
<br />
<div class='row2 ipsPad'>
	<h3 class='ipsType_subtitle' style='margin-bottom: 15px'>{$this->lang->words['mi5_addem']}</h3>
	<input type="text" class='input_text' size='40' name="newbox_1" id="newbox_1" value="{$this->request['newbox_1']}" />
	 &nbsp;&nbsp;<strong>{$this->lang->words['ucp_add_prefix']}</strong>&nbsp;
	<input type='checkbox' class='input_check' name='ignore_topics' id='ignore_topics' value='1' />
	<label class='desc' for='ignore_topics'>{$this->lang->words['ucp_ignore_posts']}</label>
	&nbsp;&nbsp;
	<input type='checkbox' class='input_check' name='ignore_signatures' id='ignore_signatures' value='1' />
	<label class='desc' for='ignore_signatures'>{$this->lang->words['ucp_ignore_sigs']}</label>
	&nbsp;&nbsp;
	<input type='checkbox' class='input_check' name='ignore_messages' id='ignore_messages' value='1' />
	<label class='desc' for='ignore_messages'>{$this->lang->words['ucp_ignore_pc']}</label>
	<if test="hasChatRowCheckbox:|:IPSLib::appIsInstalled('ipchat')">
		&nbsp;&nbsp;
		<input type='checkbox' class='input_check' name='ignore_chats' id='ignore_chats' value='1' />
		<label class='desc' for='ignore_chats'>{$this->lang->words['ucp_ignore_chats']}</label>
	</if>
</div>
<script type="text/javascript">
	$('newbox_1').defaultize( "{$this->lang->words['ucp_members_name']}" );
	
	ipb.delegate.register('.delete_ignored', confirmIgnoredDelete);
	
	var confirmIgnoredDelete = function(e, elem){
		if( !confirm("{$this->lang->words['ignore_del_areusure']}") ){
			Event.stop(e);
		}
	};
	
	document.observe("dom:loaded", function(){
		var url = ipb.vars['base_url'] + 'app=core&module=ajax&section=findnames&do=get-member-names&secure_key=' + ipb.vars['secure_hash'] + '&name=';
		new ipb.Autocomplete( $('newbox_1'), { multibox: false, url: url, templates: { wrap: ipb.templates['autocomplete_wrap'], item: ipb.templates['autocomplete_item'] } } );
	});
</script>]]></template_content>
      <template_name>membersIgnoredUsersForm</template_name>
      <template_data>$members, $pagination</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/colorpicker/jscolor.js'></script>
<h3 class='ipsType_subtitle ipsSettings_pagetitle'>{$this->lang->words['ucp_cust_bg']}</h3>
<p class='ipsType_pagedesc'>{$this->lang->words['ucp_customize_msg']}</p>
<br />
<if test="$input['_preview']">
	<fieldset class='ipsSettings_section'>
		<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_cust_bg_preview']}</h3>
		<div>
			<div style='width:98%; height: 100px; background-image:url("{$input['_preview']}");<if test="!$options['bg_tile']">background-repeat:no-repeat</if>'>&nbsp;</div>
		</div>
	</fieldset>
</if>
<fieldset class='ipsSettings_section'>
	<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_cust_remove_t']}</h3>
	<div>
		<a href="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=customize&amp;do=save&amp;secure_hash={$this->member->form_hash}&amp;bg_nix=1" base="public"}" class="ipsButton_secondary">{$this->lang->words['ucp_cust_remove']}</a>
	</div>
</fieldset>
<if test="$this->memberData['gbw_allow_url_bgimage'] OR $this->memberData['gbw_allow_upload_bgimage']">
	<fieldset class='ipsSettings_section'>
		<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_cust_bg_title']}</h3>
		<div>
			<ul>
				<if test="$this->memberData['gbw_allow_url_bgimage']">
					<li>
						<label for='bg_img' class='ipsSettings_fieldtitle'>{$this->lang->words['ucp_cust_bg_image']}</label>
						<input type="text" name="bg_url" id='bg_url' class='input_text' size='50' value="{$input['bg_url']}" /><br />
						<p class='desc lighter'>{$this->lang->words['ucp_cust_bg_image_img_d']}</p>
					</li>
				</if>
				<if test="$this->memberData['gbw_allow_upload_bgimage']">
					<li>
						<label for='bg_img' class='ipsSettings_fieldtitle'>{$this->lang->words['ucp_cust_bg_image_upl']}</label>
						<input type="file" name="bg_upload" id='bg_upload' value="" size="70" /><br />
						<p class='desc lighter'>{parse expression="sprintf($this->lang->words['ucp_cust_bg_image_upl_d'], intval($this->memberData['g_max_bgimg_upload']) ? intval($this->memberData['g_max_bgimg_upload']) : $this->lang->words['pf__unlimited'] )"}</p>
					</li>
				</if>
			</ul>
		</div>
	</fieldset>
	<fieldset class='ipsSettings_section'>
		<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['background_options']}</h3>
		<div>
			<ul>
				<if test="$this->memberData['gbw_allow_url_bgimage'] OR $this->memberData['gbw_allow_upload_bgimage']">
					<li>
						<input type="checkbox" name="bg_tile" id='bg_tile' class='input_check' value="1" <if test="$input['bg_tile']">checked='checked'</if>/> &nbsp;<label for='bg_tile'>{$this->lang->words['ucp_cust_bg_tile']}</label>
					</li>
				</if>
				<li>
					<label for='bg_color' class='ipsSettings_fieldtitle'>{$this->lang->words['ucp_cust_bg_color']} </label>
					#<input type="text" name="bg_color" id='bg_color' class='input_text color' size='10' value="{$input['bg_color']}" />
					<p class="desc lighter">{$this->lang->words['ucp_cust_bg_color_d']}</p>
				</li>
			</ul>
		</div>
	</fieldset>
</if>]]></template_content>
      <template_name>membersProfileCustomize</template_name>
      <template_data>$options, $input, $errors</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<h2 class='ipsType_subtitle ipsSettings_pagetitle'>{$this->lang->words['general_account_settings']}</h2>
<div class='ipsSettings'>
	<if test="canUploadPhoto:|:IPSMember::canUploadPhoto( $this->memberData )">
		<fieldset class='ipsSettings_section'>
			<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_photo_title']}</h3>
			<div>
				<a data-clicklaunch="launchPhotoEditor" href="{parse url="app=members&amp;module=profile&amp;section=photo" base="public"}" class='ipsButton_secondary'>{$this->lang->words['ucp_photo_change']}</a>
			</div>
		</fieldset>
	</if>
	
	<fieldset class='ipsSettings_section'>
		<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['settings_time']}</h3>
		<div>
			<ul class='ipsForm ipsForm_horizontal'>
				<li class='ipsField'>
					<label for='timezone'>{$this->lang->words['ucp_timzeone']}</label>
					<select name='timeZone' id='timezone' class='input_select'>
					<foreach loop="timezones:$times as $off => $words">
						<option value='{$off}' <if test="isOurTimezone:|:$off == $this->memberData['time_offset']"> selected="selected"</if>>{$words}</option>
					</foreach>
					</select><br />
					<span class='desc lighter'>{$this->lang->words['settings_time_txt2']} {parse date="" format="LONG" relative="false"}</span>
				</li>
				<if test="$this->settings['time_dst_auto_correction']">
					<li>
						<if test="dstError:|:$this->request['dsterror'] == 1">
							{$this->lang->words['dst_error']}
						</if>
						<input type='checkbox' class='input_check' id='dst' name="dstCheck" onclick='toggle_dst()' value="1"<if test="doAutoDst:|:$this->memberData['members_auto_dst']"> checked="checked"</if>/> &nbsp;<label for='dst'>{$this->lang->words['dst_correction_title']}</label>
					</li>
					<li id='dst-manual'>
						<input type='checkbox' class='input_check' id='dstManual' name="dstOption" value="1"<if test="doManualDst:|:$this->memberData['dst_in_use']"> checked="checked"</if>/> &nbsp;<label for='dstManual'>{$this->lang->words['ucp_dst_now']}</label>
					</li>
				<else />
					<li>
						<input type='checkbox' class='input_check' id='dstManual' name="dstOption" value="1"<if test="doManualDst:|:$this->memberData['dst_in_use']"> checked="checked"</if>/> &nbsp;<label for='dstManual'>{$this->lang->words['ucp_dst_now']}</label><br />
						<span class='desc lighter'>{$this->lang->words['ucp_dst_effect']}</span>
					</li>
				</if>
			</ul>
		</div>
	</fieldset>

	<fieldset class='ipsSettings_section'>
		<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_comments']}</h3>
		<div>
			<ul>
				<li>
					<input class='input_check' type='checkbox' value='1' name='pp_setting_count_comments' value='1' <if test="showComments:|:$this->memberData['pp_setting_count_comments'] > 0">checked='checked'</if> id='comments_enable' /> &nbsp;<label for='comments_enable'>{$this->lang->words['ucp_enable_comments']}</label>
				</li>
				<!-- proposing removal -->
				<li id='approve_comments'>
					<input class='input_check' type='checkbox' value='1'  name='pp_setting_moderate_comments' id='pp_setting_moderate_comments' <if test="yesModComments:|:$this->memberData['pp_setting_moderate_comments']">checked="checked"</if> /> &nbsp;<label for='pp_setting_moderate_comments'>{$this->lang->words['op_dd_enabled']}</label>
				</li>
				<li>
					<input class='input_check' type='checkbox' value='1' name='pp_setting_count_visitors' value='1' <if test="showLastVisitors:|:$this->memberData['pp_setting_count_visitors'] > 0">checked='checked'</if> id='pp_latest_visitors' /> &nbsp;<label for='pp_latest_visitors'>{$this->lang->words['ucp_show_x_latest']}</label>
				</li>
			</ul>
		</div>
	</fieldset>
	<if test="friendsEnabled:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
		<fieldset class='ipsSettings_section'>
			<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['ucp_friends']}</h3>
			<div>
				<ul>
					<li>
						<input class='input_check' type='checkbox' value='1' name='pp_setting_count_friends' value='1' <if test="showFriends:|:$this->memberData['pp_setting_count_friends'] > 0">checked='checked'</if> id='friends_enable' /> &nbsp;<label for='friends_enable'>{$this->lang->words['ucp_show_friends_profile']}</label>
					</li>
					<li>
						<input class='input_check' type='checkbox' value='1' name='pp_setting_moderate_friends' id='pp_setting_moderate_friends' <if test="yesModFriends:|:$this->memberData['pp_setting_moderate_friends']">checked="checked"</if> /> &nbsp;<label for='pp_setting_moderate_friends'>{$this->lang->words['ucp_friend_approve']}</label>
					</li>
				</ul>
			</div>
		</fieldset>
	</if>
	<if test="showProfileInfo:|:($day && $mon && $year) || ($this->settings['post_titlechange'] && ($this->memberData['posts'] >= $this->settings['post_titlechange']))">
		<fieldset class='ipsSettings_section'>
			<h3 class='ipsSettings_sectiontitle'>{$this->lang->words['profile_information']}</h3>
			<div>
				<ul>
					<li><a href='#' class='ipsButton_secondary' id='edit_aboutme'>{$this->lang->words['edit_my_about_me']}</a></li>
				</ul>
				<if test="changeMemberTitle:|:$this->settings['post_titlechange'] && ($this->memberData['posts'] >= $this->settings['post_titlechange'])">
					<br />
					<ul>
						<li>
							<label for='member_title' class='ipsSettings_fieldtitle'>{$this->lang->words['member_title']}</label>
							<input type='text' class='input_text' size='40' id='member_title' name='member_title' value='{$this->memberData['title']}' />
							<br />
							<span class='desc'>{$this->lang->words['member_title_desc']}</span>
						</li>
					</ul>
				</if>
				<if test="birthdayFields:|:$day AND $mon AND $year">
					<br />
					<ul>
						<li>
							<label for='birthday' class='ipsSettings_fieldtitle'>{$this->lang->words['ucp_birthday_select']}</label>
							<select name="month">&nbsp;
								<foreach loop="months:$mon as $m">
									<option value='{$m[0]}'<if test="monthSelected:|:$m[0] == $this->memberData['bday_month']"> selected="selected"</if>>{$m[1]}</option>
								</foreach>
							</select>			
							<select name="day">&nbsp;
								<foreach loop="days:$day as $d">
									<option value='{$d[0]}'<if test="daySelected:|:$d[0] == $this->memberData['bday_day']"> selected="selected"</if>>{$d[1]}</option>
								</foreach>
							</select> 
							<select name="year">&nbsp;
								<foreach loop="years:$year as $y">
									<option value='{$y[0]}'<if test="yearSelected:|:$y[0] == $this->memberData['bday_year']"> selected="selected"</if>>{$y[1]}</option>
								</foreach>
							</select> <br />
							<span class='desc'>{$this->lang->words['ucp_birthday_optional']}</span>
						</li>
					</ul>
				</if>
			</div>
		</fieldset>
	</if>
	
	<if test="count( $custom_fields )">
		<foreach loop="$custom_fields as $cgroup => $cfields">
			<if test="count( $cfields )">
				<fieldset class='ipsSettings_section'>
					<h3 class='ipsSettings_sectiontitle'>{$group_titles[ $cgroup ]}</h3>
					<div>
						<ul>
							<foreach loop="$cfields as $fid => $cfield">
								{$cfield['field']}
							</foreach>
						</ul>
					</div>
				</fieldset>
			</if>
		</foreach>
	</if>
	
	<div id='aboutme_editor' style='display: none'>
		<h3>{$this->lang->words['cp_edit_aboutme']}</h3>
		<div>
			{$amEditor}
		</div>
		<div class='ipsForm_submit' style='margin-top: 0;'>
			<a href='#' id='close_aboutme_editor' class='ipsButton'>{$this->lang->words['finish_aboutme_edit']}</a>
		</div>
	</div>
	<if test="requiredCfields:|:$required_output">
		<fieldset class='{parse striping="usercp"}'>
			<h3>{$this->lang->words['ucp_required_info']}</h3>
			<ul>
				{$required_output}
			</ul>
		</fieldset>
	</if>
	<if test="optionalCfields:|:$optional_output">
		<fieldset class='{parse striping="usercp"}'>
			<h3>{$this->lang->words['ucp_other_info']}</h3>
			<ul>
				{$optional_output}
			</ul>
		</fieldset>
	</if>
</div>
<script type="text/javascript">
//<!#^#|CDATA|
function toggle_dst()
{
	if ( $( 'dst' ) )
	{
		if ( $( 'dst' ).checked ){
			$( 'dst-manual' ).style.display = 'none';
		} else {
			$( 'dst-manual' ).style.display = 'block';
		}
	}
}
toggle_dst();
//|#^#]>
</script>]]></template_content>
      <template_name>membersProfileForm</template_name>
      <template_data><![CDATA[$custom_fields='',$group_titles='',$day='',$mon='',$year='', $amEditor='', $times=array()]]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<h3 class='ipsType_subtitle'>{$this->lang->words['cp_current_sig']}</h3>
<div class='row1 signature'>{$signature}</div>
<br />
<input type='hidden' name='removeattachid' value='0' />
{parse striping="usercp" classes="row1,row2"}
<fieldset class='{parse striping="usercp"}'>
	<h3 class='ipsType_subtitle'>{$this->lang->words['cp_edit_sig']}</h3>
	<if test="hasSignatureLimits:|:$this->memberData['g_signature_limits']">
		<div class='ipsType_pagedesc'>
			{$this->lang->words['sig_restrictions_contain']}<br />
			<ul class='ipsList_inline' style='display: inline'>
				<if test="$sig_restrictions[1] !== ''">
					<li>&bull; {parse expression="sprintf( $this->lang->words['sig_max_imagesr'], $sig_restrictions[1] )"}</li>
				<else />
					<li>&bull; {$this->lang->words['sig_max_imagesr_nl']}</li>
				</if>
				<if test="$sig_restrictions[2] !== '' || $sig_restrictions[3] !== ''">
					<li>&bull; {parse expression="sprintf( $this->lang->words['sig_max_imgsize'], $sig_restrictions[2], $sig_restrictions[3] )"}</li>
				<else />
					<li>&bull; {$this->lang->words['sig_max_imgsize_nl']}</li>
				</if>
				<if test="$sig_restrictions[4] !== ''">
					<li>&bull; {parse expression="sprintf( $this->lang->words['sig_max_urls'], $sig_restrictions[4] )"}</li>
				<else />
					<li>&bull; {$this->lang->words['sig_max_urls_nl']}</li>
				</if>
				<if test="$sig_restrictions[5] !== ''">
					<li>&bull; {parse expression="sprintf( $this->lang->words['sig_max_lines'], $sig_restrictions[5] )"}</li>
				<else />
					<li>&bull; {$this->lang->words['sig_max_lines_nl']}</li>
				</if>
			</ul>
		</div><br />
	</if>
	<div>
		{$editor_html}
	</div>
</fieldset>
<if test="disablelightbox:|:!$this->settings['disable_lightbox']">
{parse template="include_lightbox" group="global" params=""}
</if>
{parse template="include_highlighter" group="global" params="1"}]]></template_content>
      <template_name>membersSignatureForm</template_name>
      <template_data><![CDATA[$editor_html="",$sig_restrictions=array(),$signature='']]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='row1'>
	<h3>{$this->lang->words['cp_edit_sig']}</h3>
	<br />
	<if test="$form['_noPerm']">
		<p class='message error'>{$form['_noPerm']}</p>
	</if>
</fieldset>]]></template_content>
      <template_name>membersSignatureFormError</template_name>
      <template_data>$form</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse striping="usercp" classes="row1,row2"}
<if test="! $isConnected">
<div>
	<p class='message'>{$this->lang->words['twitter_config']}</p>
	<br />
	<br />
	<a href="{$this->settings['_original_base_url']}/interface/twitter/index.php"><img src="{$this->settings['img_url']}/twitter_connect.png" alt="" /></a>
	<br />
</div>
<else />
<div>
	<div class='ipsPad row2 clearfix'>
		<if test="tcHasPic:|:$twitterUser['profile_image_url']">	
			<img src="{$twitterUser['profile_image_url']}" alt='' class='left ipsUserPhoto ipsUserPhoto_medium' />
			<div class='ipsBox_withphoto'>
		</if>
		<h2 class='ipsType_subtitle'>
			{$this->lang->words['tc_logged_in_as']} <strong>{$twitterUser['screen_name']}</strong> ({$twitterUser['name']})
		</h2>
		<if test="tcShowStatus:|:is_array($twitterUser['status']) AND $twitterUser['status']['text']">
			<p class='desc'>{$twitterUser['status']['text']}</p>
		</if>
		<if test="tcHasPic:|:$twitterUser['profile_image_url']">
			</div>
		</if>
	</div>
	
	<br />
	<div class='right row2 ipsPad clearfix' style='width: 250px'>
		<span class='ipsType_smaller'>
			{$this->lang->words['tc_last_syncd']}
			<if test="tcLastSync:|:$this->memberData['tc_lastsync']">
				{parse date="$this->memberData['tc_lastsync']" format="long"}
			<else />
				{$this->lang->words['fb_never']}
			</if>
		</span>
		<br /><br />
		<input type='submit' class='ipsButton_secondary' id='tc_sync' value='{$this->lang->words['fb_sync_now']}' />
		<br /><br />
		<input type='button' class='ipsButton_secondary' id='tc_remove_start' value='{$this->lang->words['tc_disassociate']}' />
		
		<div id='tc_remove_popup' style='display: none'>
			<h3>{$this->lang->words['tc_disassociate']}</h3>
			<div class='ipsPad'>
				<p>{$this->lang->words['twitter_revoke']}</p>
				<p class='desc'>{$this->lang->words['tc_disassociate_desc']}</p>
				<br />
				<input type='button' class='ipsButton' id='tc_remove' value='{$this->lang->words['tc_disassociate_now']}' />
			</div>
		</div>
	</div>
	<div>
		<h2 class='ipsType_subtitle'>{$this->lang->words['tc_sync_options']}</h2>
		<p class='desc'>{$this->lang->words['tc_sync_options_desc']}</p>
		<ul class='ipsForm ipsForm_vertical ipsPad'>
			<li class='ipsField ipsField_checkbox'>
				<input class='input_check' type='checkbox' value='1' name='tc_s_pic' value='1' <if test="tcSyncPic:|:$this->memberData['tc_s_pic'] > 0">checked='checked'</if> id='tc_s_pic' />
				<p class='ipsField_content'>
					<label for='tc_s_pic'>{$this->lang->words['tc_sync_photo']}</label><br />
					<span class='desc lighter'>{$this->lang->words['tc_sync_photo_info']}</span>
				</p>
			</li>
			<li class='ipsField ipsField_checkbox'>
				<input class='input_check' type='checkbox' value='1' name='tc_s_status' value='1' <if test="tcSyncStatus:|:$this->memberData['tc_s_status'] > 0">checked='checked'</if> id='tc_s_status' />
				<p class='ipsField_content'>
					<label for='tc_s_status'>{$this->lang->words['tc_sync_status_out']}</label>
				</p>
			</li>
			<if test="statusImportGroup:|: ! $this->memberData['gbw_no_status_import']">
			<li class='ipsField ipsField_checkbox'>
				<input class='input_check' type='checkbox' value='1' name='tc_si_status' value='1' <if test="tcSyncIStatus:|:$this->memberData['tc_si_status'] > 0">checked='checked'</if> id='tc_si_status' />
				<p class='ipsField_content'>
					<label for='tc_si_status'>{$this->lang->words['tc_sync_status_in']}</label>
				</p>
			</li>
			</if>
			<li class='ipsField ipsField_checkbox'>
				<input class='input_check' type='checkbox' value='1' name='tc_s_aboutme' value='1' <if test="tcSyncAboutMe:|:$this->memberData['tc_s_aboutme'] > 0">checked='checked'</if> id='tc_s_aboutme' />
				<p class='ipsField_content'>
					<label for='tc_s_aboutme'>{$this->lang->words['tc_sync_aboutme']}</label>
				</p>
			</li>
			<if test="canBG:|:$this->memberData['gbw_allow_customization'] AND ! $this->memberData['bw_disable_customization']">
				<li class='ipsField ipsField_checkbox'>
					<input class='input_check' type='checkbox' value='1' name='tc_s_bgimg' value='1' <if test="tcSyncBgImg:|:$this->memberData['tc_s_bgimg'] > 0">checked='checked'</if> id='tc_s_bgimg' />
					<p class='ipsField_content'>
						<label for='tc_s_bgimg'>{$this->lang->words['tc_sync_bgimg']}</label>
					</p>
				</li>
			</if>
		</ul>
	</div>
	
	<if test="twitterPassword:|:! $this->memberData['bw_local_password_set'] AND $this->memberData['members_created_remote']">
		<div class='message'>
			<strong>{$this->lang->words['remote_no_password']}</strong>
			<p>{$this->lang->words['remote_no_password_1']} <a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=email" base="public"}'>{$this->lang->words['remote_no_password_2']}</a>
			</p>
		</div>
		<br />
	</if>
	
</div>
<script type="text/javascript">
	$('tc_remove').observe( 'click', usercp_remove );
	function usercp_remove(){
		window.location = ipb.vars['base_url'] + 'app=core&module=usercp&tab=core&area=twitterRemove&do=custom&secure_key=' + ipb.vars['secure_hash'];
	}
	
	$('tc_remove_start').on('click', function(e){
		new ipb.Popup( 'sign_in_popup', {	type: 'pane',
											initial: $('tc_remove_popup').show(),
											hideAtStart: false,
											hideClose: false,
											modal: true,
											w: '600px' } );
	});
</script>
</if>]]></template_content>
      <template_name>membersTwitterConnect</template_name>
      <template_data>$isConnected, $twitterUser=array()</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<h3 class='ipsType_subtitle'>{$this->lang->words['board_prefs']}</h3>
<fieldset class='row1'>
	<h3>{$this->lang->words['privacy_settings']}</h3>
	<ul>
		<li class='field checkbox'>
			<input type='checkbox' class='input_check' id='admin_updates' name='admin_send' value='1'<if test="allowAdminMails:|:$this->memberData['allow_admin_mails']"> checked="checked"</if>/> <label for='admin_updates'>{$this->lang->words['admin_send']}</label><br />
			<span class='desc lighter'>{$this->lang->words['admin_send_desc']} {$time}</span>
		</li>
	</ul>
</fieldset>
<fieldset class='row1'>
	<span class='desc'><strong>{$this->lang->words['notifications_info_acp']}</strong></span>
	<php>
		$this->notifyGroups = array(
			'topics_posts' => array( 'followed_topics', 'followed_forums', 'followed_topics_digest', 'followed_forums_digest', 'post_quoted', 'new_likes' ),
			'status_updates' => array( 'reply_your_status', 'reply_any_status', 'friend_status_update' ),
			'profiles_friends' => array( 'profile_comment', 'profile_comment_pending', 'friend_request', 'friend_request_pending', 'friend_request_approve' ),
			'private_msgs' => array( 'new_private_message', 'reply_private_message', 'invite_private_message' )
		);
		
		$this->_config = $config;
		
		$this->_colCount = IPSMember::canReceiveMobileNotifications() ? 4 : 3;
		
		$this->_lastApp	= '';
	</php>
	<table class='ipb_table notification_table'>
		<tr>
			<th>&nbsp;</th>
			<th style='width: 15%' class='short'><span class='notify_icon inline'>&nbsp;</span> {$this->lang->words['notify_type_inline']}</th>
			<th style='width: 15%' class='short'><span class='notify_icon email'>&nbsp;</span> {$this->lang->words['notify_type_email']}</th>
			<if test="IPSMember::canReceiveMobileNotifications()">
			<th style='width: 15%' class='short'><span class='notify_icon mobile'>&nbsp;</span> {$this->lang->words['notify_type_mobile']}</th>
			</if>
		</tr>
		<foreach loop="notifyGroupsList:$this->notifyGroups as $groupKey => $group">
			<tr class='row2'>
				<td colspan='{$this->_colCount}'>
					<h3>{$this->lang->words[ 'notifytitle_' . $groupKey ]}</h3>
					<if test="isPrivateMsg:|:$groupKey == 'private_msgs'">
						<p class='ipsPad_half checkbox ipsType_smaller desc '>
							<input type='checkbox' class='input_check' id='show_notification_popup' name='show_notification_popup' value='1' <if test="$this->memberData['_cache']['show_notification_popup']">checked='checked'</if> /> <label for='show_notification_popup' />{$this->lang->words['show_notification_popup']}</label><br />
						</p>
					</if>
					<if test="isTopicsOrPosts:|:$groupKey == 'topics_posts'">
						<p class='ipsPad_half checkbox ipsType_smaller desc '>
							<input class='input_check' type="checkbox" id='auto_track' name="auto_track" value="1" {$emailData['auto_track']} /> <label for='auto_track' />{$this->lang->words['auto_track']}</label>
							<select name="trackchoice" id='track_choice' class='input_select'>
								<option value="none" {$emailData['trackOption']['none']}>{$this->lang->words['like_notify_freq_none']}</option>
								<option value="immediate" {$emailData['trackOption']['immediate']}>{$this->lang->words['like_notify_freq_immediate']}</option>
								<option value="offline" {$emailData['trackOption']['offline']}>{$this->lang->words['like_notify_freq_offline']}</option>
								<option value="daily" {$emailData['trackOption']['daily']}>{$this->lang->words['like_notify_freq_daily']}</option>
								<option value="weekly" {$emailData['trackOption']['weekly']}>{$this->lang->words['like_notify_freq_weekly']}</option>
							</select>
							<if test="badConfig:|:$emailData['auto_track'] AND $emailData['trackOption']['none']">
								<br />{$this->lang->words['auto_but_no_email']}
							</if>
						</p>
					</if>
				</td>
			</tr>
			<foreach loop="groupKeys:$group as $key">
				<if test="keyExists:|:$this->_config[ $key ]">
					<tr>
						<td class='notify_title desc'>{$this->lang->words['notify__' . $key]}</td>
						<td class='short'>
							<span class='notify_icon inline' title='{$this->lang->words['notify_type_inline']}'>&nbsp;</span>
							<if test="$groupKey == 'private_msgs'">
								<input type='checkbox' class='input_check' name='' checked='checked' disabled='disabled' /> <span class='ipsBadge ipsBadge_lightgrey ipsType_smaller' data-tooltip='{$this->lang->words['nots_pm_whatthef']}'>{$this->lang->words['nots_pm_list']}</span>
							<else />
								<if test="isset( $this->_config[$key]['options']['inline'] ) && $groupKey != 'private_msgs'">
									<input type='checkbox' class='input_check' id='inline_{$key}' name="config_{$key}[]" value="inline"<if test="hasconfignotify:|:is_array($this->_config[$key]['defaults']) AND in_array('inline',$this->_config[$key]['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$this->_config[$key]['disabled']"> disabled="disabled"</if> />
								<else />
									<input type='checkbox' class='input_check' name='' disabled='disabled' />
								</if>
							</if>
						</td>
						<td class='short'>
							<span class='notify_icon email' title='{$this->lang->words['notify_type_email']}'>&nbsp;</span>
							<if test="isset( $this->_config[$key]['options']['email'] )">
								<input type='checkbox' class='input_check' id='email_{$key}' name="config_{$key}[]" value="email"<if test="hasconfignotify:|:is_array($this->_config[$key]['defaults']) AND in_array('email',$this->_config[$key]['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$this->_config[$key]['disabled']"> disabled="disabled"</if> />
							<else />
								<input type='checkbox' class='input_check' name='' disabled='disabled' />
							</if>
						</td>
						<if test="IPSMember::canReceiveMobileNotifications()">
						<td class='short'>
							<span class='notify_icon mobile' title='{$this->lang->words['notify_type_mobile']}'>&nbsp;</span>
							<if test="isset( $this->_config[$key]['options']['mobile'] )">
								<input type='checkbox' class='input_check' id='mobile_{$key}' name="config_{$key}[]" value="mobile"<if test="hasconfignotify:|:is_array($this->_config[$key]['defaults']) AND in_array('mobile',$this->_config[$key]['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$this->_config[$key]['disabled']"> disabled="disabled"</if> />
							<else />
								<input type='checkbox' class='input_check' name='' disabled='disabled' />
							</if>
						</td>
						</if>
					</tr>
					<if test="$this->_config[$key]['_done'] = 1"></if>
				</if>
			</foreach>							
		</foreach>
		<foreach loop="notifyOther:$this->_config as $key => $_config">
			<if test="keyNotDone:|:!isset( $_config['_done'] ) && $_config['_done'] != 1">
				<if test="newNotApp:|:$this->_lastApp != $_config['app']">
					<tr class='row2'>
						<td colspan='{$this->_colCount}'>
							<h3><if test="isCoreNot:|:$_config['app'] == 'core'">{$this->lang->words['notifytitle_other']}<else />{IPSLib::getAppTitle( $_config['app'] )}</if></h3>
						</td>
					</tr>
					<if test="updateLastApp:|:$this->_lastApp = $_config['app']"></if>
				</if>
				<tr>
					<td class='notify_title desc'>{$this->lang->words['notify__' . $_config['key'] ]}</h3></td>
					<td class='short'>
						<span class='notify_icon inline' title='{$this->lang->words['notify_type_inline']}'>&nbsp;</span>
						<if test="isset( $_config['options']['inline'] )">
							<input type='checkbox' class='input_check' id='inline_{$key}' name="config_{$key}[]" value="inline"<if test="hasconfignotify:|:is_array($_config['defaults']) AND in_array('inline',$_config['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$_config['disabled']"> disabled="disabled"</if> />
						<else />
							<input type='checkbox' class='input_check' name='' disabled='disabled' />
						</if>
					</td>
					<td class='short'>
						<span class='notify_icon email' title='{$this->lang->words['notify_type_email']}'>&nbsp;</span>
						<if test="isset( $_config['options']['email'] )">
							<input type='checkbox' class='input_check' id='email_{$key}' name="config_{$key}[]" value="email"<if test="hasconfignotify:|:is_array($_config['defaults']) AND in_array('email',$_config['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$_config['disabled']"> disabled="disabled"</if> />
						<else />
							<input type='checkbox' class='input_check' name='' disabled='disabled' />
						</if>
					</td>
					<if test="IPSMember::canReceiveMobileNotifications()">
					<td class='short'>
						<span class='notify_icon mobile' title='{$this->lang->words['notify_type_mobile']}'>&nbsp;</span>
						<if test="isset( $_config['options']['mobile'] )">
							<input type='checkbox' class='input_check' id='mobile_{$key}' name="config_{$key}[]" value="mobile"<if test="hasconfignotify:|:is_array($this->_config[$key]['defaults']) AND in_array('mobile',$this->_config[$key]['defaults'])"> checked="checked"</if> <if test="hasconfigdisable:|:$this->_config[$key]['disabled']"> disabled="disabled"</if> />
						<else />
							<input type='checkbox' class='input_check' name='' disabled='disabled' />
						</if>
					</td>
					</if>
				</tr>
			</if>
		</foreach>
	</table>
</fieldset>]]></template_content>
      <template_name>notificationsForm</template_name>
      <template_data>$config, $emailData</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<if test="hasnotifyerror:|:$error">
<p class='message error'>
	{$error}
</p>
<else />
	<if test="hasconfirm:|:$this->request['confirm']">
	<p class='message'>
		{$this->lang->words['notify_rem_suc']}
	</p>
	</if>
</if>
<div id='notificationlog'>
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=removeNotifications&amp;do=remove" base="public"}" id="checkBoxForm" method="post">
	<input type="hidden" name="secure_key" value="{$this->member->form_hash}" />
	<if test="hasNotifications:|:is_array( $notifications ) AND count( $notifications )">
		<div class='right ipsPad'>
			<input id="checkAllNotifications" type="checkbox" value="{$this->lang->words['check_all']}" />
		</div>
		<h2 class='ipsType_subtitle'>{$this->lang->words['arch_notifications_head']}</h2>
		<br />
		<table class='ipb_table' summary="{$this->lang->words['notifications_table_head']}">
			<tr class='header hide'>
				<th scope='col' width="5%">&nbsp;</th>
				<th scope='col' width="70%">{$this->lang->words['th_notification']}</th>
				<th scope='col' width="25%">{$this->lang->words['th_sent']}</th>
				<th scope='col' align="center" width="5%" class='short'>&nbsp;</th>
			</tr>
			{parse striping="notify" classes="row2,row1"}
			<foreach loop="categories:$notifications as $notification">
				<tr class='{parse striping="notify"} <if test="hasReadNotify:|:!$notification['notify_read']">unread</if>'>
					<td class="col_n_icon altrow short"><if test="hasReadNotify:|:$notification['notify_read']">{parse replacement="t_read_dot"}<else />{parse replacement="t_unread_dot"}</if></td>
					<td class='col_n_photo short'>
						<if test="$notification['member']['member_id']">
							<a href='{parse url="showuser={$notification['member']['member_id']}" template="showuser" seotitle="{$notification['member']['members_seo_name']}" base="public"}' class='ipsUserPhotoLink'>
								<img src='{$notification['member']['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
							</a>
						<else />
							{IPSMember::buildNoPhoto(0, 'mini' )}
						</if>
					</td>
					<td>
						<h4><if test="strpos( $notification['notify_title'], '<a href' ) === false"><a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=viewNotification&amp;do=view&amp;view={$notification['notify_id']}" base="public"}'></if>
						{$notification['notify_title']}
						<if test="strpos( $notification['notify_title'], '<a href' ) === false"></a></if>
						</h4>
					</td>
					<td class="col_n_date desc"><a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=viewNotification&amp;do=view&amp;view={$notification['notify_id']}" base="public"}' title='{$this->lang->words['view_notification_logentry']}'>{$this->lang->words['th_sent']} {parse date="$notification['notify_sent']" format="long"}</a></td>
					<td class="short col_n_mod"><input class='input_check checkall' type="checkbox" name="notifications[]" value="{$notification['notify_id']}" /></td>
				</tr>
			</foreach>
		</table>
		<script type='text/javascript'>
			ipb.global.registerCheckAll('checkAllNotifications', 'checkall');
		</script>
	<else />
		<p class='no_messages'>{$this->lang->words['notifications_none']}</p>
	</if>
	<if test="hasNotifyForMod:|:count($notifications)">
		<br />
		<a href='{parse url="app=core&amp;module=usercp&amp;area=markNotification&amp;do=mark&amp;mark=all" base="public"}' id='ack_pm_notification' class='input_submit left'>{$this->lang->words['notificationlog_mar']}</a>
		<div class='moderation_bar rounded with_action'>
			<input type="submit" class="input_submit alt" value="{$this->lang->words['ndel_selected']}" />
		</div>
		<br />
		<div class='topic_controls'>
			{$pages}
		</div>
	</if>
</form>
</div>]]></template_content>
      <template_name>notificationsLog</template_name>
      <template_data><![CDATA[$notifications, $error='', $pages='']]></template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='ipsPad row2'>
	<h2>{$notification['notify_title']}</h2>
	<ul>
		<li class='field'>
			{$this->lang->words['notifyview_date']}
			<em>{parse date="$notification['notify_sent']" format="long"}</em>
		</li>
	</ul>
</fieldset>
<fieldset class='ipsPad row1'>
	<ul>
		<li class='field'>
			{$notification['notify_text']}
		</li>
	</ul>
</fieldset>
<fieldset class='ipsPad row2'>
	<ul>
		<li class='field short'>
			<a href='{parse url="app=core&amp;module=usercp&amp;area=notificationlog" base="public"}' class='input_submit'>{$this->lang->words['goback']}</a>	
			<a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=removeNotifications&amp;do=remove&amp;secure_key={$this->member->form_hash}&amp;notifications[]={$notification['notify_id']}" base="public"}' class='input_submit delete'>{$this->lang->words['deletenotification']}</a>
		</li>
	</ul>
</fieldset>]]></template_content>
      <template_name>showNotification</template_name>
      <template_data>$notification</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse js_module="ucp"}
<php>
$hasMoreTabs = (is_array($tabs[ $current_tab ]['_menu']) && count($tabs[ $current_tab ]['_menu']) > 1) ? true : false;
</php>
<if test="usercp_form:|:$hide_form == 0">
	<if test="has_max_upload:|:$maxUpload">
		<form method='post' enctype="multipart/form-data" action='{parse url="app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}" base="public"}' id='userCPForm'>
	<else />
		<form method='post' action='{parse url="app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}" base="public"}' id='userCPForm'>
	</if>
</if>
	<fieldset>
		<input type="hidden" name="MAX_FILE_SIZE" value="{$maxUpload}" />
		<input type='hidden' name='do' value='save' />
		<input type='hidden' name='secure_hash' value='{$this->member->form_hash}' />
		<input type='hidden' name='s' value='{$this->request['s']}' />
	</fieldset>
<h1 class='ipsType_pagetitle'>{$this->lang->words['ucp_title']}</h1>
<br />
<if test="count($tabs) > 1">
	<div class='maintitle ipsFilterbar clearfix'>
		<ul class='ipsList_inline'>
			<foreach loop="tabs:$tabs as $tab_app => $tab">
				<if test="active_tab:|:$tab_app == $current_tab">
					<li class='active'><a href="{parse url="module=usercp&amp;tab={$tab_app}" base="publicWithApp"}" title="<if test="isSettings:|:$tab_app=='core'">{$this->lang->words['settings_for_coretab']}<else />{parse expression="sprintf( $this->lang->words['settings_for_ucp'], $tab['_name'] )"}</if>">{$tab['_name']}</a></li>
				<else />
					<li><a href="{parse url="module=usercp&amp;tab={$tab_app}" base="publicWithApp"}" title="<if test="isSettingsInactive:|:$tab_app=='core'">{$this->lang->words['settings_for_coretab']}<else />{parse expression="sprintf( $this->lang->words['settings_for_ucp'], $tab['_name'] )"}</if>">{$tab['_name']}</a></li>
				</if>
			</foreach>
		</ul>
	</div>
</if>
<div class='ipsBox'>
	<div class='ipsLayout<if test="hasMoreThanOneTabClass:|:$hasMoreTabs"> ipsLayout_withleft ipsLayout_smallleft ipsVerticalTabbed</if> clearfix usercp_body'>
		<if test="hasMoreThanOneTabSidebar:|:$hasMoreTabs">
			<div class='ipsVerticalTabbed_tabs ipsLayout_left' id='usercp_tabs'>
				<ul>
					<foreach loop="items:$tabs[ $current_tab ]['_menu'] as $idx => $item">
						<if test="tabsMenus_active:|:$item['area'] == $current_area OR $item['active']">
							<li class='active'><a href="{parse url="module=usercp&amp;tab={$current_tab}&amp;{$item['url']}" base="publicWithApp"}">{$item['title']}</a></li>
						<else />
							<li><a href="{parse url="module=usercp&amp;tab={$current_tab}&amp;{$item['url']}" base="publicWithApp"}">{$item['title']}</a></li>
						</if>
					</foreach>
				</ul>
			</div>
		</if>
		<div class='<if test="hasMoreThanOneTabClassContent:|:$hasMoreTabs">ipsVerticalTabbed_content </if>ipsLayout_content ipsBox_container' id='usercp_content'>
			<div class='ipsPad'>
				<if test="has_errors:|:is_array( $errors ) AND count( $errors )">
					<p class='message error'>
						<foreach loop="errors:$errors as $error">
							{$error}<br />
						</foreach>
					</p>
					<br />
				</if>
				<if test="didSave:|:$this->request['saved'] == 1">
					<p class='message'>{$this->lang->words['ucp__settings_saved']}</p>
					<br />
				</if>
				{$html}
		
				<if test="submit_button:|:$hide_form == 0">
				<fieldset class='submit'>
					<input type='submit' class='input_submit' name='submitForm' value='{$this->lang->words['ucp__save_changes']}' /> {$this->lang->words['or']} <a href='{parse url="app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}" base="public"}' title='{$this->lang->words['cancel_edit']}' class='cancel'>{$this->lang->words['cancel']}</a>
				</fieldset>
				</if>
			</div>
		</div>
	</div>
</div>
<if test="end_form:|:$hide_form == 0">
</form>
</if>]]></template_content>
      <template_name>userCPTemplate</template_name>
      <template_data>$current_tab, $html, $tabs, $current_area, $errors=array(), $hide_form=0, $maxUpload=0</template_data>
      <template_updated>1339584004</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </template>
  </templategroup>
</templates>
