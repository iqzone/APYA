<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 2               */
/* CACHE FILE: Generated: Wed, 29 Aug 2012 14:14:59 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_blog_portal_2 extends skinMaster{

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	parent::__construct( $registry );
	

$this->_funcHooks = array();
$this->_funcHooks['blogFollowedWrapper'] = array('followedResults','hasResults');
$this->_funcHooks['commentSearchResult'] = array('showcomment');
$this->_funcHooks['entrySearchResult'] = array('showcontent');
$this->_funcHooks['followedContentBlogs'] = array('filerate','ratingLoop','isUnread','isEntryAuthor','newdata','blogRatingEnabled','hasDrafts','isFollowedStuff','submitterIsMemberStart','submitterIsMemberEnd','hasEntries','isFollowedStuff','followedResults');
$this->_funcHooks['recentEntries'] = array('newcomment');


}

/* -- bbCodeEntry --*/
function bbCodeEntry($entry) {
$IPBHTML = "";
$IPBHTML .= "<div class='_sharedMediaBbcode'>
	<div class='bbcode_mediaWrap'>
		<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\"><img src='{$this->settings['img_url']}/sharedmedia/entries.png' alt='{$this->lang->words['entry_sharedimg']}' class='sharedmedia_image' /></a>
		<div class='details'>
			<h5><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\">" . IPSText::truncate( $entry['entry_name'], 60 ) . "</a></h5>
			<div><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}", "public",'' ), "{$entry['blog_seo_name']}", "showblog" ) . "\">{$this->lang->words['sharedmedia_blogprefix']} {$entry['blog_name']}</a></div>
			<div>{$this->lang->words['sharedmedia_elu']} " . $this->registry->getClass('class_localization')->getDate($entry['entry_last_update'],"short", 0) . "</div>
		</div>
	</div>
</div>
<br />";
return $IPBHTML;
}

/* -- blogFollowedWrapper --*/
function blogFollowedWrapper($rows) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_blog_portal', $this->_funcHooks['blogFollowedWrapper'] ) )
{
$count_744e34e3a70e655c02ae01b5824715f3 = is_array($this->functionData['blogFollowedWrapper']) ? count($this->functionData['blogFollowedWrapper']) : 0;
$this->functionData['blogFollowedWrapper'][$count_744e34e3a70e655c02ae01b5824715f3]['rows'] = $rows;
}
$IPBHTML .= "" . ((is_array($rows) && count($rows)) ? ("
	<table class='ipb_table topic_list' id='forum_table'>
		".$this->__f__b15dbfd9189c74ffc1e998751fc3251c($rows)."	</table>
") : ("")) . "";
return $IPBHTML;
}


function __f__b15dbfd9189c74ffc1e998751fc3251c($rows)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $rows as $row )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			{$row['html']}
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- commentSearchResult --*/
function commentSearchResult($r, $indent, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_blog_portal', $this->_funcHooks['commentSearchResult'] ) )
{
$count_ee2806bb8a4e986ebedcf8bad42d3107 = is_array($this->functionData['commentSearchResult']) ? count($this->functionData['commentSearchResult']) : 0;
$this->functionData['commentSearchResult'][$count_ee2806bb8a4e986ebedcf8bad42d3107]['r'] = $r;
$this->functionData['commentSearchResult'][$count_ee2806bb8a4e986ebedcf8bad42d3107]['indent'] = $indent;
$this->functionData['commentSearchResult'][$count_ee2806bb8a4e986ebedcf8bad42d3107]['resultAsTitle'] = $resultAsTitle;
}
$IPBHTML .= "<span class='gutter rounded'><img src='{$this->settings['public_dir']}style_extra/app_icons/blog.png' alt='' /> {$this->lang->words['comment']}</span>
<div>
	<div class='date' style='float:right;'>
		{$this->lang->words['posted_by']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", "public",'' ), "", "" ) . "'>{$r['members_display_name']}</a> @ " . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "
	</div>
</div>
<h3><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blogid={$r['type_id']}&amp;showentry={$r['type_id_2']}#comment{$r['misc']}", "public",'' ), "", "" ) . "'>{$r['content_title']}</a></h3>
" . ((!$resultAsTitle) ? ("
<p>
	{$r['content']}
</p>
") : ("")) . "";
return $IPBHTML;
}

/* -- entrySearchResult --*/
function entrySearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_blog_portal', $this->_funcHooks['entrySearchResult'] ) )
{
$count_7528ca5ed7eb1013a87ec8969d3330db = is_array($this->functionData['entrySearchResult']) ? count($this->functionData['entrySearchResult']) : 0;
$this->functionData['entrySearchResult'][$count_7528ca5ed7eb1013a87ec8969d3330db]['r'] = $r;
$this->functionData['entrySearchResult'][$count_7528ca5ed7eb1013a87ec8969d3330db]['resultAsTitle'] = $resultAsTitle;
}
$IPBHTML .= "<div class='result_info'>
	<h3><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blogid={$r['blog_id']}&amp;showentry={$r['type_id_2']}", "public",'' ), "", "" ) . "'>{$r['content_title']}</a></h3>
	" . ((!$resultAsTitle) ? ("
	<p>
		{$r['content']}
	</p>
	") : ("")) . "
</div>
<div class='result_details desc'>
	<ul>
		<li>{$this->lang->words['posted_by']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", "public",'' ), "", "" ) . "'>{$r['members_display_name']}</a></li>
		<li>{$this->lang->words['search_posted_on']} " . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</li>
	</ul>
</div>";
return $IPBHTML;
}

/* -- followedContentBlogs --*/
function followedContentBlogs($rows) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_blog_portal', $this->_funcHooks['followedContentBlogs'] ) )
{
$count_d2db9abc33a186bcc6c8ff30c993a961 = is_array($this->functionData['followedContentBlogs']) ? count($this->functionData['followedContentBlogs']) : 0;
$this->functionData['followedContentBlogs'][$count_d2db9abc33a186bcc6c8ff30c993a961]['rows'] = $rows;
}
$IPBHTML .= "<table class='ipb_table topic_list' id='forum_table'>
	".$this->__f__32dfc35ffffec5ca3181ff4b9fe2781e($rows)."</table>";
return $IPBHTML;
}


function __f__c3367ecefa88af018464ecb3784f3b17($rows,$data='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( array(1,2,3,4,5) as $_rating )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							" . (($data['blog_rating_total'] >= $_rating) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__32dfc35ffffec5ca3181ff4b9fe2781e($rows)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $rows as $data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
		<tr" . (($data['newpost']) ? (" class='unread'") : ("")) . ">
			<td class='col_f_icon short altrow'>
				" . (($data['newpost']) ? ("<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$data['blog_id']}", "public",'' ), "{$data['blog_seo_name']}", "showblog" ) . "\">
						" . (($this->memberData['member_id'] && $this->memberData['member_id'] == $data['member_id']) ? ("
							" . $this->registry->getClass('output')->getReplacement("t_unread_dot") . "
						") : ("
							" . $this->registry->getClass('output')->getReplacement("t_unread") . "
						")) . "
					</a>") : ("")) . "
			</td>
			<td valign='top'>
				" . (($this->settings['blog_enable_rating']) ? ("
					<div class='right'>
						".$this->__f__c3367ecefa88af018464ecb3784f3b17($rows,$data)."					</div>
				") : ("")) . "
				" . (($data['_hasDrafts']) ? ("
					<span class='ipsBadge ipsBadge_red reset_cursor' data-tooltip=\"" . sprintf( ( $data['blog_num_drafts'] == 1 ? $this->lang->words['badge_x_drafts_tooltip_s'] : $this->lang->words['badge_x_drafts_tooltip_p']), $data['blog_num_drafts'] ) . "\">" . sprintf( $this->lang->words['badge_x_drafts'], $data['blog_num_drafts'] ) . "</span>
				") : ("")) . "
				<h4><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$data['blog_id']}", "public",'' ), "{$data['blog_seo_name']}", "showblog" ) . "'>{$data['blog_name']}</a></h4>
				<div class='desc lighter toggle_notify_off'>{$data['blog_desc']}</div>
				" . ((count($data['_followData'])) ? ("
					" . ( method_exists( $this->registry->getClass('output')->getTemplate('search'), 'followData' ) ? $this->registry->getClass('output')->getTemplate('search')->followData($data['_followData']) : '' ) . "
				") : ("")) . "
			</td>
			<td class='col_f_views ipsType_small'>
				<strong>" . $this->registry->getClass('class_localization')->formatNumber( $data['blog_num_entries'] ) . "</strong> {$this->lang->words['entries_fn']}<br />
				<strong>" . $this->registry->getClass('class_localization')->formatNumber( $data['blog_num_comments'] ) . "</strong> {$this->lang->words['blog_num_comments']}<br />
				<strong>" . $this->registry->getClass('class_localization')->formatNumber( $data['blog_num_views'] ) . "</strong> {$this->lang->words['blog_num_views_prefix']}
			</td>
			<td class='col_f_post'>
				" . (($data['member']['member_id']) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$data['member']['member_id']}", "public",'' ), "{$data['member']['members_seo_name']}", "showuser" ) . "' class='ipsUserPhotoLink'>") : ("")) . "
					<img src='{$data['member']['pp_small_photo']}' class='ipsUserPhoto ipsUserPhoto_mini left' />
				" . (($data['member']['member_id']) ? ("</a>") : ("")) . "
				<ul class='last_post ipsType_small'>
					" . (($data['blog_last_entry']) ? ("
						<li>
							<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$data['blog_id']}&amp;showentry={$data['blog_last_entry']}", "public",'' ), "{$data['entry_name_seo']}", "showentry" ) . "\" title='{$this->lang->words['entry_view']}'>
								" . IPSText::truncate( $blog['blog_last_entryname'], 28 ) . "
							</a>
						</li>
						<li>{$this->lang->words['by_ucfirst']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($data['member']) : '' ) . "</li>
						<li class='desc lighter'>" . $this->registry->getClass('class_localization')->getDate($data['blog_last_update'],"DATE", 0) . "</li>
					") : ("
						<li class='desc lighter'><em>{$this->lang->words['profile_noblogentries']}</em></li>
					")) . "
				</ul>
			</td>
			" . ((count($data['_followData'])) ? ("
				<td class='col_f_mod'>
					<input class='input_check checkall toggle_notify_on' type=\"checkbox\" name=\"likes[]\" value=\"{$data['_followData']['like_app']}-{$data['_followData']['like_area']}-{$data['_followData']['like_rel_id']}\" />
				</td>
			") : ("")) . "
		</tr>
	
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- moderatorPanel --*/
function moderatorPanel($results, $pages='') {
$IPBHTML = "";
$IPBHTML .= "<!--no data in this master skin-->";
return $IPBHTML;
}

/* -- profileBlock --*/
function profileBlock($entries) {
$IPBHTML = "";
$IPBHTML .= "<h3 class='maintitle'>{$this->lang->words['portal_blog_entries']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		".$this->__f__f0c20e6e3a2b92feeec10c44178ce24d($entries)."	</div>
</div>";
return $IPBHTML;
}


function __f__f0c20e6e3a2b92feeec10c44178ce24d($entries)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $entries as $entry )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			<div class='post_block no_sidebar'>
				<div class='post_wrap'>
					<h3 class='row2'>
						<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blogid={$entry['blog_id']}", "public",'' ), "{$entry['blog_seo_name']}", "showblog" ) . "\">{$entry['blog_name']}</a> &gt;
						<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\">" . IPSText::truncate( $entry['entry_name'], 90 ) . "</a>
					</h3>
					<div class='post_body'>
						<p class='posted_info'>{$this->lang->words['posted']} {$entry['entry_date_short']}</p>
						<div class='post'>
							{$entry['entry_short']}
							" . (($entry['_hasMore']) ? ("
								<br />
								<div class='right'>
									<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\">
										<span class='ipsButton_secondary'>{$this->lang->words['read_more_go_on']} {$this->lang->words['_rarr']}</span>
									</a>
								</div>
								<br class='clear' />
							") : ("")) . "
						</div>
					</div>
				</div>
				<br />
			</div>
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- recentEntries --*/
function recentEntries($entries=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_blog_portal', $this->_funcHooks['recentEntries'] ) )
{
$count_54a5ca3993cd9d4f1421c2de96367d02 = is_array($this->functionData['recentEntries']) ? count($this->functionData['recentEntries']) : 0;
$this->functionData['recentEntries'][$count_54a5ca3993cd9d4f1421c2de96367d02]['entries'] = $entries;
}

if ( ! isset( $this->registry->templateStriping['recententries'] ) ) {
$this->registry->templateStriping['recententries'] = array( FALSE, "row1","row2");
}
$IPBHTML .= "<div class='ipsSideBlock clearfix'>
		<h3>" . ((isset($this->lang->words['recently_added_entries'])) ? ("{$this->lang->words['recently_added_entries']}") : ("{$this->lang->words['latest_entries_title']}")) . "</h3>
	<ul class='ipsList_withminiphoto hfeed'>
		" . ((is_array( $entries )) ? ("".$this->__f__4b50a7ef0d6787a1a8e8b209b14aaf3d($entries)."		") : ("")) . "
	</ul>
</div>";
return $IPBHTML;
}


function __f__4b50a7ef0d6787a1a8e8b209b14aaf3d($entries=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $entries as $eid => $entry )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				<li class='clearfix'>
					<img src='{$entry['pp_thumb_photo']}' alt='' class='ipsUserPhoto ipsUserPhoto_mini left' />
					<div class='list_content'>
						" . (($entry['newpost']) ? ("
						 <a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}&amp;show=newcomment", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\">" . $this->registry->getClass('output')->getReplacement("f_newpost") . "</a>&nbsp;
						") : ("")) . "
						<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}&amp;showentry={$entry['entry_id']}", "public",'' ), "{$entry['entry_name_seo']}", "showentry" ) . "\">{$entry['entry_name']}</a>
						<p class='desc ipsType_smaller'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;blogid={$entry['blog_id']}", "public",'' ), "{$entry['blog_seo_name']}", "showblog" ) . "'>{$entry['blog_name']}</a> <span class='desc lighter ipsType_smaller'>" . $this->registry->getClass('class_localization')->getDate($entry['entry_date'],"manual{%d %b}", 0) . "</span>
						</p>
					</div>
				</li>
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- unapprovedComments --*/
function unapprovedComments($comments, $pages='') {
$IPBHTML = "";
$IPBHTML .= "<!--no data in this master skin-->";
return $IPBHTML;
}


}


/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>