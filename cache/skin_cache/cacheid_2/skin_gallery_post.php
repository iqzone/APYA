<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 2               */
/* CACHE FILE: Generated: Wed, 29 Aug 2012 14:14:59 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_gallery_post_2 extends skinMaster{

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	parent::__construct( $registry );
	

$this->_funcHooks = array();
$this->_funcHooks['uploadForm'] = array('canCreate1','canCreate');


}

/* -- attachiFrameMediaThumb --*/
function attachiFrameMediaThumb($id, $JSON='{}') {
$IPBHTML = "";
$IPBHTML .= "<html>
<body style='background-color: transparent;'>
<form id='mtiframeUploadForm' method='post' enctype=\"multipart/form-data\" action=''>
<script type='text/javascript'>
	parent.ipb.gallery.mediaUpload._setJSON( '$id', $JSON );
</script>
<input type='file' id='mtiframeUploadBox_$id' style='display: inline' name='FILE_UPLOAD' /> <input type='reset' value='{$this->lang->words['clear_selection']}' style='display: inline' />
</form>
</body>
</html>";
return $IPBHTML;
}

/* -- attachiFrameUpload --*/
function attachiFrameUpload($id, $JSON='{}') {
$IPBHTML = "";
$IPBHTML .= "<html>
<head>
	<style type=\"text/css\">
		* {
			margin: 0px;
			padding: 0px;
		}
		
		#waitImg {
			position: relative;
			top: 4px;
		}
		
		.input {
			padding: 4px;
			background-color: #1D3652;
			border-color: #4F7298 #113051 #113051 #4F7298;
			color: white;
		}
	</style>
</head>
<body style='background-color: transparent; width: 400px;'>
<form id='iframeUploadForm' method='post' enctype=\"multipart/form-data\" action=''>
<script type='text/javascript'>
	parent.ipb.uploader._jsonPass( '$id', $JSON );
</script>
<input type='file' id='iframeUploadBox_$id' style='display: inline' class='input' name='FILE_UPLOAD' /> <input type='reset' class='input' value='{$this->lang->words['clear_selection']}' style='display: inline' />
<img src=\"{$this->settings['img_url']}/loading.gif\" style='display: none' id=\"waitImg\" />
</form>
</body>
</html>";
return $IPBHTML;
}

/* -- editImageForm --*/
function editImageForm($image) {
$IPBHTML = "";
$IPBHTML .= "<h3>Edit</h3>
<div class='general_box'>
	<fieldset>
		<ul>
			<li class='field' style='margin-left:0px'>
				{$this->lang->words['title_ucfirst']}<br />
				<input type=\"text\" style='width:99%' name=\"caption\" id=\"form_caption\" class=\"input_text\" value=\"{$image['caption']}\" />
			</li>
			<li class='field' style='margin-left:0px'>
				{$this->lang->words['description_ucfirst']}<br />
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('editors'), 'editorShell' ) ? $this->registry->getClass('output')->getTemplate('editors')->editorShell('description', 'description', $image['description'], 1, 1) : '' ) . "
				<script type=\"text/javascript\">
					ipb.editors['description'] = new ipb.editor( 'description', USE_RTE );
					$('editor_description').setStyle( { 'margin': '0px' } );
				</script>
			</li>
			<li class=\"submit\" style=\"float:right\">
				<input type=\"submit\" value=\"Save\" class=\"input_submit _edsubmit\" />
			</li>
		</ul>
	</fieldset>
</div>";
return $IPBHTML;
}

/* -- uploadForm --*/
function uploadForm($sessionKey='', $album=array(), $stats=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_gallery_post', $this->_funcHooks['uploadForm'] ) )
{
$count_5c3c437e9f4da8cbe26b8d1afb7583d7 = is_array($this->functionData['uploadForm']) ? count($this->functionData['uploadForm']) : 0;
$this->functionData['uploadForm'][$count_5c3c437e9f4da8cbe26b8d1afb7583d7]['sessionKey'] = $sessionKey;
$this->functionData['uploadForm'][$count_5c3c437e9f4da8cbe26b8d1afb7583d7]['album'] = $album;
$this->functionData['uploadForm'][$count_5c3c437e9f4da8cbe26b8d1afb7583d7]['stats'] = $stats;
}
$IPBHTML .= "<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/swfupload.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.swfobject.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.cookies.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.queue.js'></script>
<script type='text/javascript'>
//<![CDATA[
	ipb.lang['used_space'] = \"" . sprintf( $this->lang->words['used_space_js'], "{$stats['maxItemHuman']}" ) . "\";
//]]>
</script>
" . $this->registry->getClass('output')->addJSModule("gallery_uploader", "0" ) . "
" . ( method_exists( $this->registry->getClass('output')->getTemplate('gallery_albums'), 'inlineAlbumSelector' ) ? $this->registry->getClass('output')->getTemplate('gallery_albums')->inlineAlbumSelector() : '' ) . "
<ul id=\"wizard_progress\" class=\"row2\">
	<li class=\"active\">{$this->lang->words['review_step_upload']}</li>
	<li>{$this->lang->words['review_step_publish']}</li>
</ul>
<h2 class='maintitle'>Upload Media</h2>
<div class='generic_bar'></div>
<div id='albumBoxWrap'>
	<div id='albumWrap'></div>
	<div id='albumWrapNone' style='display: none'>
		<img src=\"{$this->settings['img_url']}/gallery/missingphotothumb.png\" class=\"galattach\" />
		<h4>No Album Selected</h4>
		<p class='desc'>
			" . (($this->registry->gallery->helper('albums')->canCreate()) ? ("<a href='#' class='input_submit alt _albumNew'>New Album</a>") : ("&nbsp;")) . "
			<a href='#' class='input_submit alt _albumSelector'>Select Album</a>
		</p>
	</div>
</div>
<div class='ipsPad row2 altrow' id='uploadBoxWrapParent'>
	<div id='uploadBoxWrap' style='display:none'>
		<div id='attachWrap' class='block_inner'>
			<h3 class='header'>{$this->lang->words['uploaded_media']}</h3>
			<ul id='attachments'><li style='display: none'></li></ul>
		</div>
	</div>
	<div id='attach_error_box' class='message error' style='display:none'></div>
	<!-- Traditional uploader needs those lines -->
	<input type='file' id='nojs_attach_{$sessionKey}_1' class='input_upload' name='FILE_UPLOAD' tabindex='1' />
	<input type='file' id='nojs_attach_{$sessionKey}_2' class='input_upload' name='FILE_UPLOAD' tabindex='1' />
	<div id='uploadFieldWrap' style='display:none'>
	<h3 class='header'>{$this->lang->words['upload_ucfirst']}</h3>
	<div class='block_inner pad'>
		<div class='galleryNextButton' style='display:none'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&module=images&section=review&do=show&sessionKey={$sessionKey}", "public",'' ), "", "" ) . "'>Review &amp; Publish &rarr;</a></div>
		<span id='buttonPlaceholder'></span>
		<input type='button' id='add_files_attach_{$sessionKey}' class='input_submit ipsType_small clear' value='{$this->lang->words['upload_ucfirst']}' style='display: none;' tabindex='1' /> <span class='desc' id='space_info_attach_{$sessionKey}'>" . sprintf( "You have used %s of %s (max per upload: %s)", IPSLib::sizeFormat( $stats['used'] ), "{$stats['maxTotalHuman']}", IPSLib::sizeFormat( $stats['maxItem'] )) . "</span>
		<p class='desc' style='padding-top:4px'>
			<div id='helperTextFlash' style='display:none' class='desc'>
				{$this->lang->words['select_several']}<br />
				{$this->lang->words['trouble_uploading']} <a href='#' onclick=\"switchUploader('simple')\" title='{$this->lang->words['switch']}' tabindex='1'>{$this->lang->words['switch_to_basic']}</a>
			</div>
			<div id='helperTextNormal' class='desc'>
				<a href='#' onclick=\"switchUploader('swf')\" title='{$this->lang->words['switch']}' tabindex='1'>{$this->lang->words['switch_to_advanced']}</a>
			</div>
		</p>
	</div>
</div>
</div>
<script type='text/javascript'>
//<![CDATA[
	function switchUploader( whichOneThen )
	{
		window.location = window.location + '&uploadPref=' + whichOneThen;
	}
	
	// Show the button and info
	$('add_files_attach_{$sessionKey}').show();
	$('space_info_attach_{$sessionKey}').show();
	
	/* Have we a preference */
	var cookie        = ipb.Cookie.get('galuploader');
	
	if ( 'simple' == \"{$this->request['uploadPref']}\" )
	{
		cookie = 'simple';
		ipb.Cookie.set('galuploader', cookie );
	}
	else if ( 'swf' == \"{$this->request['uploadPref']}\" )
	{
		cookie = 'swf';
		ipb.Cookie.set('galuploader', cookie );
	}
	
	var useType       = 'simple';
	var uploadURL     = ipb.vars['base_url'] + \"app=gallery&module=post&section=image&do=upload&type=album&sessionKey={$sessionKey}&album_id={$album['album_id']}&fetch_all=1\";
	var albumTemplate = new Template( \"<div id='albumWrap_#{album_id}'>#{thumb}<h4>Selected Album: #{album_name}</h4><p class='desc'>#{album_count_imgs} images, #{album_count_comments} comments<br />" . (($this->registry->gallery->helper('albums')->canCreate()) ? ("<a href='#' class='input_submit alt _albumNew'>New Album</a>") : ("&nbsp;")) . "<a href='#' class='input_submit alt _albumSelector'>Change Album</a></p></div>\" );
	
	if ( cookie == 'swf' || ( cookie != 'simple' && jaaulde.utils.flashsniffer.meetsMinVersion( 9 ) && ( ipb.vars['swfupload_enabled'] ) ) )
	{
		ipb.vars['use_swf_upload'] = true;
		useType = 'swf';
		var uploadURL = \"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&module=post&section=image&do=process&sessionKey={$sessionKey}&album_id={$album['album_id']}&_nsc=1", "public",'' ), "", "" ) . "\";
		
		$('helperTextFlash').show();
		$('helperTextNormal').hide();
		
		$('add_files_attach_{$sessionKey}').observe('mouseover', function(e){  } );
	}
	
	ipb.uploader.template = \"<li id='ali_[id]' class='attach_row' style='display: none'><div><h4 class='attach_name'>[name]</h4><p class='info'>[info]</p><span class='img_holder'></span><p class='progress_bar'><span style='width: 0%'>0%</span></p><p class='links'> <a href='#' class='cancel delete' title='{$this->lang->words['attach_delete_title']}'>{$this->lang->words['attach_delete']}</a></p></div></li>\"; 
	
	document.observe('dom:loaded', function(){
		/* Load album box */
		ipb.uploader.setCurrentAlbumId( " . intval($album['album_id']) . " );
		ipb.uploader.buildAlbumBox( " . intval($album['album_id']) . ", albumTemplate, 'albumWrap' );
		
		/* Load up uploaders */
		ipb.uploader.registerUploader( 'attach_{$sessionKey}', useType, 'attachments', {
			'upload_url': uploadURL,
			'album_id': \"" . intval($album['album_id']) . "\",
			'sessionKey': \"{$sessionKey}\",
			'file_size_limit': \"{$stats['maxItem']}\"
		} )});
//]]>
</script>";
return $IPBHTML;
}


}


/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>