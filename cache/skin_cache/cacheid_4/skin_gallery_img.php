<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 4               */
/* CACHE FILE: Generated: Wed, 29 Aug 2012 14:15:07 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_gallery_img_4 extends skinMaster{

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	parent::__construct( $registry );
	

$this->_funcHooks = array();
$this->_funcHooks['meta_html'] = array('exif_data');
$this->_funcHooks['show_image'] = array('voteImageRate','voteRatingLoop','viewImageRate','viewRatingLoop','hasFollow','filevotes','fileyourvote','jsRated','canRate','hasTags','showSizesLink','metahtml','setascover','makeProfilePhoto','onOffPrev','onOffNext','unApproved','isMedia','hasDescription','showImageOptions','is_approved','approve_button','edit_button','move_button','delete_button','showImageModerationOptions','canReportImage','hasOptions','hasComments','set_cleancaption','isNotMedia');


}

/* -- ajaxDetail --*/
function ajaxDetail($image, $album="") {
$IPBHTML = "";
$IPBHTML .= "<h3>{$image['caption']}</h3>
<div class='ipsBox short'>
	{$image['small']}
	<br /><br />
	<p class='desc'>
		{$this->lang->words['in_ucfirst']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;album={$album['album_id']}", "public",'' ), "{$album['album_name_seo']}", "viewalbum" ) . "'>{$album['album_name']}</a>
		<br />{$this->lang->words['by_lower']}: " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($image) : '' ) . "
	</p>
<div>";
return $IPBHTML;
}

/* -- mediaEmbedPlayer --*/
function mediaEmbedPlayer($file, $playerOptions=array()) {
$IPBHTML = "";
$IPBHTML .= "<embed autoplay=\"true\" showcontrols=\"true\" showstatusbar=\"true\" showtracker=\"true\" src=\"{$file}\" width=\"640\" height=\"480\">";
return $IPBHTML;
}

/* -- mediaFlashPlayer --*/
function mediaFlashPlayer($file, $playerOptions=array()) {
$IPBHTML = "";
$IPBHTML .= "<script type=\"text/javascript\" src=\"{$this->settings['public_dir']}flowplayer/example/flowplayer-3.2.6.min.js\"></script>
<div id=\"player\" style=\"display:block;width:640px;height:480px;margin:0 auto\"></div>
<script language=\"JavaScript\">
	ipb.gallery.flashPlayerInit( \"$file\", \"{$this->settings['public_dir']}flowplayer/flowplayer-3.2.7.swf\" );
</script>";
return $IPBHTML;
}

/* -- meta_html --*/
function meta_html($content="") {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_gallery_img', $this->_funcHooks['meta_html'] ) )
{
$count_35f438111a899695b949be6386d84723 = is_array($this->functionData['meta_html']) ? count($this->functionData['meta_html']) : 0;
$this->functionData['meta_html'][$count_35f438111a899695b949be6386d84723]['content'] = $content;
}

if ( ! isset( $this->registry->templateStriping['meta'] ) ) {
$this->registry->templateStriping['meta'] = array( FALSE, "row1","row2");
}
$IPBHTML .= "<div id='metacontent' style='display: none'>
	<h3>{$this->lang->words['meta_table_header']}</h3>
	<div class='fixed_inner'>
		<table class='ipb_table'>
			".$this->__f__1185bb105e142594b5c6684831eceeb3($content)."		</table>
	</div>
</div>";
return $IPBHTML;
}


function __f__1185bb105e142594b5c6684831eceeb3($content="")
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $content as $key => $value )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				<tr class='" .  IPSLib::next( $this->registry->templateStriping["meta"] ) . "'>
					<td class='altrow'><strong>{$key}</strong></td>
					<td>{$value}</td>
				</tr>
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- moveDialogue --*/
function moveDialogue($image, $album) {
$IPBHTML = "";
$IPBHTML .= "<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=move&amp;imageid={$image['id']}&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "\" method=\"post\">
<h3>{$this->lang->words['img_move_title']}</h3>
<div class='row2 pad' style='text-align: center'>
 {$this->lang->words['img_move_to_album']}
 <input type='hidden' id='albumParentId' name='move_to_album_id' value=0 /><div class='albumSelected' id='asDiv'>{$album['_parent']['album_name']}</div>
 <a href='#' class='ipsButton_secondary' data-album-selector-auto-update='{\"field\": \"albumParentId\", \"div\": \"asDiv\"}' data-album-selector='type=moveImage&moderate=1&album_id={$album['album_id']}'>{$this->lang->words['as_select_album']}</a>
 <br /><br />
 <input type='submit' class=\"input_submit\" value=\"{$this->lang->words['img_move_submit']}\" />
</div>
</form>";
return $IPBHTML;
}

/* -- newSticker --*/
function newSticker($size=24) {
$IPBHTML = "";
$IPBHTML .= "<div class=\"img_new_sticker_{$size}\"></div>";
return $IPBHTML;
}

/* -- photostrip --*/
function photostrip($album, $images=array()) {
$IPBHTML = "";

/* Always return as UTF-8 */
	array_walk_recursive( $images, array( 'IPSText', 'arrayWalkCallbackConvert' ) );
	$jsonEncoded = json_encode( $images );
	$jsonEncoded = IPSText::convertCharsets($jsonEncoded, "UTF-8", IPS_DOC_CHAR_SET);
$IPBHTML .= "<div id='photostripwrap'>
	<div id='photostrip'>
		<ul id='strip'></ul>
	</div>
</div>
" . $this->registry->getClass('output')->addJSModule("gallery_photostrip", "0" ) . "
<script type=\"text/javascript\">
	ipb.vars['img_url'] = \"{$this->settings['img_url']}\";
	
	document.observe(\"dom:loaded\", function(){
		ipb.photostrip.setPhotoData( {$jsonEncoded} );
		ipb.photostrip.display();
	} );
</script>";
return $IPBHTML;
}

/* -- show_image --*/
function show_image($info=array(), $author=array(), $can_do_avatar=0, $photostrip, $comments, $nextPrev=array(), $follow, $album) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_gallery_img', $this->_funcHooks['show_image'] ) )
{
$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31 = is_array($this->functionData['show_image']) ? count($this->functionData['show_image']) : 0;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['info'] = $info;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['author'] = $author;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['can_do_avatar'] = $can_do_avatar;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['photostrip'] = $photostrip;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['comments'] = $comments;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['nextPrev'] = $nextPrev;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['follow'] = $follow;
$this->functionData['show_image'][$count_056ec2f6bc6e3ba21ee0ec6cca6a2e31]['album'] = $album;
}
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("editor", "0" ) . "
" . $this->registry->getClass('output')->addJSModule("imagenotes", "0" ) . "
" . $this->registry->getClass('output')->addJSModule("gallery_lightbox", "0" ) . "
" . $this->registry->getClass('output')->addJSModule("gallery_albumchooser", "0" ) . "
<link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"{$this->settings['public_dir']}js/3rd_party/cropper/cropper.css\" />
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/cropper/cropper.uncompressed.js'></script>
<script type=\"text/javascript\">
//<![CDATA[
	ipb.gallery.inSection = 'image';
	ipb.gallery.imageID = parseInt( {$info['id']} );
	ipb.gallery.isMedia = parseInt( {$info['media']} );
	var curnotes = \$H( {
	".$this->__f__ea862c3bc928d9e9d47e8d1eacb0722f($info,$author,$can_do_avatar,$photostrip,$comments,$nextPrev,$follow,$album)."						});
								
	var noteTemplate = new Template(\"<div id='note_#{id}' class='note_wrap rounded ipsPad_half'><div id='note_box_#{id}' class='note_box'><div class='internal'><div id='note_fill_#{id}' class='note_fill'><div id='note_handle_#{id}' class='handle'></div></div></div></div><div id='note_text_#{id}' class='note_text ipsPad_half rounded' style='display: none'>#{text}</div></div>\");
	var editTemplate = new Template(\"<div id='note_form_#{id}' class='note_form rounded ipsPad ipsType_small'><textarea rows='3' cols='20' id='note_content_#{id}'>#{content}</textarea><br /><input type='submit' class='input_submit' value='{$this->lang->words['save']}' id='note_save_#{id}' /> <input type='submit' class='input_submit alt' value='{$this->lang->words['cancel']}' id='note_cancel_#{id}' />&nbsp;&nbsp;<a href='#' class='cancel' id='note_delete_#{id}'>{$this->lang->words['delete']}</a></div>\");
//]]>
</script>
<div class='topic_controls right'>
	" . (($follow) ? ("
		{$follow}
		<br /><br /><br />
	") : ("")) . "
	<ul class='topic_buttons'>
		<li><a id='imageOptions' class='ipbmenu' href='#imageOptions'>{$this->lang->words['options_ucfirst']} &nbsp;<img src='{$this->settings['img_url']}/opts_arrow.png' alt='&gt;' /></a></li>
	</ul>
</div>
<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$author['member_id']}", "public",'' ), "{$author['members_seo_name']}", "showuser" ) . "' class='ipsUserPhotoLink'>
	<img src='{$author['pp_small_photo']}' class='ipsUserPhoto ipsUserPhoto_medium left' />
</a>
<div class='ipsBox_withphoto'>
	<span class='rating ipsType_smaller'>
		" . (($this->registry->gallery->helper('rate')->canRate($album) !== false && $this->memberData['member_id'] != $info['member_id']) ? ("<strong>{$this->lang->words['rate_image']}</strong>&nbsp;&nbsp;
			".$this->__f__8ddc0ff824a71fb9f81d73db26669acc($info,$author,$can_do_avatar,$photostrip,$comments,$nextPrev,$follow,$album)."			<span id='rating_text' class='desc'>
				" . (($info['ratings_count'] > 0) ? ("{$info['ratings_count']} {$this->lang->words['votes_cnt']}") : ("")) . "
				" . (($info['rate']) ? ("({$this->lang->words['you_voted']} {$info['rate']})") : ("")) . "
			</span>
			<script type='text/javascript'>
				rating = new ipb.rating( 'album_rate_', { 
									url: 		'" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=ajax&amp;section=rate&amp;id={$info['id']}&where=image", "public",'' ), "", "" ) . "&md5check=' + ipb.vars['secure_hash'],
									cur_rating: " . intval($info['rating']) . ",
									rated: 		" . (($info['ratings_count']) ? ("1") : ("0")) . ",
									allow_rate: 1
								  } );
			</script>") : ("
			".$this->__f__ff8199cc04266fd50c9948b359851641($info,$author,$can_do_avatar,$photostrip,$comments,$nextPrev,$follow,$album)."		")) . "
	</span>
	
	<h1 class='ipsType_pagetitle'>{$info['caption']}</h1>
	<div class='desc lighter blend_links'>
		 {$this->lang->words['viewimg_uploaded_by']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($author) : '' ) . ", " . $this->registry->getClass('class_localization')->getDate($info['idate'],"SHORT", 0) . "
	</div>
	" . ((is_array($info['tags'])) ? ("
		{$info['tags']['formatted']['parsedWithoutComma']}
	") : ("")) . "
</div>
<ul class=\"ipbmenu_content\" id='imageOptions_menucontent' style='display:none' >
	" . ((!$info['media']) ? ("
		<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}&amp;size=medium", "public",'' ), "{$info['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['view_all_sizes']}</a></li>
	") : ("")) . "
	" . (($info['metahtml'] != '') ? ("
		<li><a href='#metaInfo' data-clicklaunch=\"showMeta\" data-scope=\"gallery\" title='{$this->lang->words['view_exif_prop']}'>{$this->lang->words['view_exif_prop']}</a></li>
	") : ("")) . "
	" . (($info['set_as_cover']) ? ("
		<li id='menu_set_cover'><a data-clicklaunch=\"imageSetAsCover\" data-scope=\"gallery\" href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;imageId={$info['id']}&amp;do=setAsCover", "public",'' ), "", "" ) . "' title='{$this->lang->words['cover_set_title']}'> {$this->lang->words['set_as_cover']}</a></li>
	") : ("")) . "
	" . (($info['can_set_as_profile_photo'] && $info['image']) ? ("
		<li><a href='#' id='profileTrigger'>{$this->lang->words['set_as_photo']}</a></li>
	") : ("")) . "
	<li><a href='#shareLinks' data-clicklaunch=\"showShareLinks\" data-scope=\"gallery\">{$this->lang->words['gallery_share_links']}</a></li>
</ul>

<br class='clear' />
<div class=''>
	<div class='ipsLayout_content' id='image_content'>
		<div class=''>
			<div class='ipsBox_container ipsPad short'>
				<div id='theImage'>
					<ul id='image_nav_links' class='ipsPad'>
						" . (($nextPrev['prev'] !== null) ? ("
							<li><a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$nextPrev['prev']['id']}", "public",'' ), "{$nextPrev['prev']['caption_seo']}", "viewimage" ) . "'>&larr; {$this->lang->words['previous_ucfirst']}</a></li>
						") : ("
							<li class=\"off\">&larr; {$this->lang->words['previous_ucfirst']}</li>
						")) . "
						" . (($nextPrev['next'] !== null) ? ("
							<li><a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$nextPrev['next']['id']}", "public",'' ), "{$nextPrev['next']['caption_seo']}", "viewimage" ) . "'>{$this->lang->words['next_ucfirst']} &rarr;</a></li>
						") : ("
							<li class=\"off\">{$this->lang->words['next_ucfirst']} &rarr;</li>
						")) . "
					</ul>
					" . ((! $info['approved']) ? ("
						<div class='message error'>" . sprintf($this->lang->words['gallery_unapproved_image_view'], $this->registry->output->buildUrl("app=gallery&amp;module=images&amp;section=mod&amp;do=approveToggle&amp;val=1&amp;imageid={$info['id']}&amp;auth_key={$this->member->form_hash}", 'public') ) . "</div>
						<br />
					") : ("")) . "
					" . (($info['media']) ? ("
						{$info['movie']}
					") : ("
						{$info['image']}
					")) . "	
				</div>
				
				" . (($info['description']) ? ("
					<p class='ipsPad'>
						{$info['description']}
					</p>
				") : ("")) . "
				<br />
				" . (($info['mod_buttons'] || $info['image_control_mod'] || $info['_canReport']) ? ("<ul class='ipsList_inline left'>
						" . (($info['image_control_mod']) ? ("
							<li id='add_note'><a href='#' title='{$this->lang->words['add_note']}' class='ipsButton_secondary'><img src=\"{$this->settings['img_url']}/gallery/add_note.png\"></a></li>
							<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;imageId={$info['id']}&amp;do=rotate&amp;dir=left", "public",'' ), "", "" ) . "' id='rotate_left' title='{$this->lang->words['rotate_left']}' class='ipsButton_secondary'><img src=\"{$this->settings['img_url']}/gallery/rotate_left.png\"></a></li>
							<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;imageId={$info['id']}&amp;do=rotate&amp;dir=right", "public",'' ), "", "" ) . "' id='rotate_right' title='{$this->lang->words['rotate_right']}' class='ipsButton_secondary'><img src=\"{$this->settings['img_url']}/gallery/rotate_right.png\"></a></li>
						") : ("")) . "
						" . (($info['mod_buttons']) ? ("<li><a href='#modOptions' id='modOptions' class='ipsButton_secondary ipbmenu'>{$this->lang->words['image_moderation']}</a></li>
							<ul class='ipbmenu_content' id='modOptions_menucontent' style='display:none'>
								" . (($info['approve_button']) ? ("<li>
										" . (($info['approved']) ? ("
											<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=approveToggle&amp;val=0&amp;imageid={$info['id']}&amp;auth_key={$this->member->form_hash}", "public",'' ), "", "" ) . "'>{$this->lang->words['unapprove_image']}</a>
										") : ("
											<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=approveToggle&amp;val=1&amp;imageid={$info['id']}&amp;auth_key={$this->member->form_hash}", "public",'' ), "", "" ) . "'>{$this->lang->words['approve_image']}</a>
										")) . "
									</li>") : ("")) . "
								" . (($info['edit_button']) ? ("
									<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=post&amp;section=image&amp;do=editImage&amp;img={$info['id']}", "public",'' ), "", "" ) . "'>{$this->lang->words['edit_post']}</a></li>
								") : ("")) . "
								" . (($info['move_button']) ? ("
									<li><a data-clicklaunch=\"imageMoveDialogue\" data-scope=\"gallery\" href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=move&amp;imageid={$info['id']}", "public",'' ), "", "" ) . "\">{$this->lang->words['submit_move']}</a></li>
								") : ("")) . "
								" . (($info['delete_button']) ? ("
									<li><a data-clicklaunch=\"imageDeleteDialogue\" data-scope=\"gallery\" href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=delete&amp;imageid={$info['id']}&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "\">{$this->lang->words['delete_image']}</a></li>
								") : ("")) . "
							</ul>") : ("")) . "
						" . (($info['_canReport']) ? ("
							<li><a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;rcom=gallery&amp;imageId={$info['id']}&amp;ctyp=image", "public",'' ), "", "" ) . "'>{$this->lang->words['report_image']}</a></li>
						") : ("")) . "
					</ul>") : ("")) . "
				<!-- Reputation: -->
				<div class='clearfix'>
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('global_other'), 'repButtons' ) ? $this->registry->getClass('output')->getTemplate('global_other')->repButtons($info, array_merge( array( 'primaryId' => $info['id'], 'domLikeStripId' => 'like_post_' . $info['id'], 'domCountId' => 'rep_post_' . $info['id'], 'app' => 'gallery', 'type' => 'id', 'likeFormatted' => $info['like']['formatted'] ), $info )) : '' ) . "
				</div>
			</div>
		</div>
		
		" . (($comments) ? ("
			{$comments}
		") : ("")) . "
	</div>
</div>
<br class='clear' />
{$info['metahtml']}
<div id='share_links_content' style='display: none'>
	<h3>{$this->lang->words['gallery_share_links']}</h3>
		<table class='ipb_table'>
			" . ((!$info['media']) ? ("<tr class='" .  IPSLib::next( $this->registry->templateStriping["shareLinks"] ) . "'>
					<td class='altrow'><strong>{$this->lang->words['gal_bbcode_pre']}</strong></td>
					<td><input onclick=\"this.select();\" type='text' size='50' readonly='readonly' name='bbcode1' value='[URL=" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}", "public",'' ), "{$info['caption_seo']}", "viewimage" ) . "][IMG]{$info['image_url']}[/IMG][/URL]' class='input_text' /></td>
				</tr>
				<tr class='" .  IPSLib::next( $this->registry->templateStriping["shareLinks"] ) . "'>
					<td class='altrow'><strong>{$this->lang->words['gal_html_pre']}</strong></td>
					<td><input onclick=\"this.select();\" type='text' size='50' readonly='readonly' name='html1' value='&lt;a href=&#39;" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}", "public",'' ), "{$info['caption_seo']}", "viewimage" ) . "&#39;&gt;&lt;img src=&#39;{$info['image_url']}&#39; alt=&#39;" . (($info['clean_caption'] = htmlspecialchars( $info['caption'], ENT_QUOTES )) ? ("{$info['clean_caption']}") : ("")) . "&#39; /&gt;&lt;/a&gt;' class='input_text'/></td>
				</tr>
				<tr class='" .  IPSLib::next( $this->registry->templateStriping["shareLinks"] ) . "'>
					<td class='altrow'><strong>{$this->lang->words['gal_imgurl_pre']}</strong></td>
					<td><input onclick=\"this.select();\" type='text' size='50' readonly='readonly' name='link1' value='{$info['image_url']}' class='input_text' /></td>
				</tr>") : ("")) . "
			<tr class='" .  IPSLib::next( $this->registry->templateStriping["shareLinks"] ) . "'>
				<td class='altrow'><strong>{$this->lang->words['gal_pgurl_pre']}</strong></td>
				<td><input onclick=\"this.select();\" type='text' size='50' readonly='readonly' name='link2' value='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}", "public",'' ), "{$info['caption_seo']}", "viewimage" ) . "' class='input_text' /></td>
			</tr>
		</table>
</div>
<div id='template_sizes' style='display:none'>
	<div class='ipsBox short'>
		{$this->lang->words['view_sizes']}: <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}&amp;size=square", "public",'' ), "{$info['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['square_ucfirst']}</a> &middot;
		<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}&amp;size=small", "public",'' ), "{$info['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['small_ucfirst']}</a> &middot;
		<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}&amp;size=medium", "public",'' ), "{$info['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['medium_ucfirst']}</a> &middot;
		<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$info['id']}&amp;size=large", "public",'' ), "{$info['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['large_ucfirst']}</a>
		<br />
		<p class='ipsPad_half'>
			<a href='{$info['image_url']}' class='desc'>{$this->lang->words['img_rc_direct']}</a>
		</p>
	</div>
</div>
<div id='template_delete' style='display:none'>
	<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=mod&amp;do=delete&amp;imageid={$info['id']}&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "\" method=\"post\">
		<h3>{$this->lang->words['mod_img_del_title']}</h3>
		<div class='ipsBox short'>
			{$this->lang->words['mod_img_del_desc']}
			<br /><br />
			<input type='submit' class='input_submit' value=\"{$this->lang->words['mod_img_del_go']}\" />
		</div>
	</form>
</div>
<div id='template_photo' style='display:none'>
	<h3>{$this->lang->words['set_as_photo']}</h3>
	<div class='ipsBox short'>
		<div id='ipsPad'>" . str_replace( 'image_view_', 'photo_view_', $info['image']) . "</div>
		<br />
		<div class='ipsPad'>
			<span id='setAsPhoto_accept' class='input_submit'>{$this->lang->words['save_ucfirst']}</span>&nbsp;&nbsp;<span id='setAsPhoto_cancel' class='input_submit alt'>{$this->lang->words['cancel_ucfirst']}</span>
		</div>
	</div>
</div>
<script type='text/javascript'>
	document.observe(\"dom:loaded\", function()
	{
		var notes = new ipb.imagenotes( $('theImage').down('img'), curnotes, { editable: " . (($info['image_control_mod']) ? ("true") : ("false")) . ", add_note: $('add_note') } );
	} );
	
	" . (($info['image_gps_show']) ? ("
		ipb.gallery.latLon = \"{$info['_latLon']}\";
	") : ("")) . "
</script>
<style type=\"text/css\">
 @import url(\"{$this->settings['public_dir']}style_css/{$this->registry->output->skin['_csscacheid']}/ipgallery_lightbox.css\");
</style>
<div id=\"ips_lightbox\" style='display:none' setup=\"false\" available=\"true\" dimensions=\"{$info['_data']['sizes']['full'][0]}-{$info['_data']['sizes']['full'][1]}\" caption=\"{$info['caption']}\" fullimage=\"{$info['image_url-full']}\"></div>";
return $IPBHTML;
}


function __f__ea862c3bc928d9e9d47e8d1eacb0722f($info=array(), $author=array(), $can_do_avatar=0, $photostrip, $comments, $nextPrev=array(), $follow, $album)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $info['image_notes'] as $k => $v )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
		{$k}: { 'top': {$v['top']}, 'left': {$v['left']}, 'height': {$v['height']}, 'width': {$v['width']},
				'content': '{$v['note']}',
				'noteId': '{$v['id']}'
			}" . (($k != $info['_last_image_note']) ? (",") : ("")) . "
	
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__8ddc0ff824a71fb9f81d73db26669acc($info=array(), $author=array(), $can_do_avatar=0, $photostrip, $comments, $nextPrev=array(), $follow, $album)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( array(1,2,3,4,5) as $_rating )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;section=rate&amp;where=image&amp;id={$info['id']}&amp;rating=$_rating&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='album_rate_{$_rating}' title='{$this->lang->words[ 'rate_file_'.$_rating ]}'>" . (($info['rating'] >= $_rating) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a>
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__ff8199cc04266fd50c9948b359851641($info=array(), $author=array(), $can_do_avatar=0, $photostrip, $comments, $nextPrev=array(), $follow, $album)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( array(1,2,3,4,5) as $_rating )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				" . (($info['rating'] >= $_rating) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- sizes --*/
function sizes($image, $album="", $size="") {
$IPBHTML = "";
$IPBHTML .= "<div class='gallery_wrap'>
	<h2 class=\"gallery_title\">{$image['caption']}</h2>
	<div id=\"photo_sizes\">
		<ul class='gallery_buttons'>
			<li>
				<a " . (($size == 'square') ? ("class=\"on\"") : ("")) . " href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$image['id']}&amp;size=square", "public",'' ), "{$image['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['square_ucfirst']}</a>
				<span>({$image['_data']['sizes']['thumb'][0]} x {$image['_data']['sizes']['thumb'][1]})</span>
			</li>
	 		<li>
	 			<a " . (($size == 'small') ? ("class=\"on\"") : ("")) . " href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$image['id']}&amp;size=small", "public",'' ), "{$image['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['small_ucfirst']}</a>
	 			<span>({$image['_data']['sizes']['small'][0]} x {$image['_data']['sizes']['small'][1]})</span>
	 		</li>
	 		<li>
	 			<a " . (($size == 'medium') ? ("class=\"on\"") : ("")) . " href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$image['id']}&amp;size=medium", "public",'' ), "{$image['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['medium_ucfirst']}</a>
	 			<span>({$image['_data']['sizes']['medium'][0]} x {$image['_data']['sizes']['medium'][1]})</span>
	 		</li>
	 		<li>
	 			<a " . (($size == 'large') ? ("class=\"on\"") : ("")) . " href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;image={$image['id']}&amp;size=large", "public",'' ), "{$image['caption_seo']}", "viewsizes" ) . "'>{$this->lang->words['large_ucfirst']}</a>
	 			<span>({$image['_data']['sizes']['max'][0]} x {$image['_data']['sizes']['max'][1]})</span>
	 		</li>
	 	</ul>
	 	<p>
	 		{$image['tag']}
	 	</p>
	 </div>
</div>";
return $IPBHTML;
}


}


/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>