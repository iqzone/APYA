<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 4               */
/* CACHE FILE: Generated: Wed, 29 Aug 2012 14:15:08 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_search_4 extends skinMaster{

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	parent::__construct( $registry );
	

$this->_funcHooks = array();
$this->_funcHooks['asForumPosts'] = array('notLastFtAsForum','topicsForumTrail','postMid','postModSelected','postModCheckbox','postMember','hasForumTrail');
$this->_funcHooks['asForumTopics'] = array('notLastFtAsForum','topicsForumTrail','haslastpage','pages','archivedBadge','hasPrefix','resultIsPostTR','isNewPostTR','hasTags','multipages','bothSearchUnderTitle','isFollowedStuff','replylang','bothSearch','isArchivedCb','isAdmin','isFollowedStuff');
$this->_funcHooks['followedContentForumsWrapper'] = array('NCresultsAsForum');
$this->_funcHooks['followedContentForumsWrapperForums'] = array('showSubForumsLit','subforums','showSubForums','isFollowedStuff','hasphoto','lastPosterID','hideDateUrl','hideLastInfo','NCresultsAsForum');
$this->_funcHooks['followedContentView'] = array('appIsSearched','supportsLikes','apps','hasconfirm','haslikeserror','forumsTab','memberFollow','membersTab','memberFollow','searchedApp','forumsDigests','hasLikeForMod','NPTotal');
$this->_funcHooks['forumAdvancedSearchFilters'] = array('hasArchives');
$this->_funcHooks['forumsVncFilters'] = array('hasFiltersSet','depth','hasFiltersSet','hasTitle','forumlist','noFiltersSet','noFiltersSet');
$this->_funcHooks['helpSearchResult'] = array('showHelpContent');
$this->_funcHooks['memberCommentsSearchResult'] = array('isUpdate','hasMore','maxReplies');
$this->_funcHooks['newContentView'] = array('appIsSearched','appIsSearchable','apps','forumsTab','membersTab','helpTab','hazVNC','hazMember','checked','hasFilters','vncFilterForumsOnly','canFollowFilter','searchismod','NPTotal');
$this->_funcHooks['searchAdvancedForm'] = array('appLoop','searchTermsRemoved','searchError','isFullText','tagyouareit');
$this->_funcHooks['searchResults'] = array('subResult','results','hasResults');
$this->_funcHooks['searchResultsAsForum'] = array('NCresultsAsForum','asTawpiks','asPostsStart','asPostsEnd','isAdminBottom','isAdmin','disablelightbox','asTawpiks2');
$this->_funcHooks['searchResultsWrapper'] = array('appIsSearched','appIsSearchable','apps','hasSearchResultsCut','hasSearchResults','hasSearchResults','forumsTab','membersTab','helpTab','searchismod','noResultsTerm','hasTotal');
$this->_funcHooks['searchRowGenericFormat'] = array('showGenericContent');
$this->_funcHooks['topicPostSearchResultAsForum'] = array('whichWayToGo');
$this->_funcHooks['userPostsView'] = array('NPhasResults','NPTotal');


}

/* -- asForumPosts --*/
function asForumPosts($data) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['asForumPosts'] ) )
{
$count_7853a514eda9706e6de986a500867c80 = is_array($this->functionData['asForumPosts']) ? count($this->functionData['asForumPosts']) : 0;
$this->functionData['asForumPosts'][$count_7853a514eda9706e6de986a500867c80]['data'] = $data;
}
$IPBHTML .= "<!--Begin Msg Number {$data['pid']}-->
<div class='post_block hentry clear no_sidebar ipsBox_container' id='post_id_{$data['pid']}'>
	<div class='post_wrap'>
		" . (($data['member_id']) ? ("
			<h3 class='row2'>
		") : ("
			<h3 class='guest row2'>
		")) . "
		" . (($this->memberData['g_is_supmod']) ? ("<span class='right'>
				<label for='checkbox_{$data['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$data['pid']}' name='selectedpids[]' value='{$data['pid']}' class='post_mod right'" . ((!empty( $data['_pid_selected'] )) ? (" checked='checked'") : ("")) . " />
			</span>") : ("")) . "
			<span class='post_id right ipsType_small desc blend_links'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['topic_id']}&amp;view=findpost&amp;p={$data['pid']}", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$this->lang->words['link_to_post']} #{$data['pid']}'>#{$data['pid']}</a></span>
			<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "\">" . IPSText::truncate( $data['topic_title'], 80) . "</a>
		</h3>
		<div class='post_body'>
			<p class='posted_info desc lighter ipsType_small'>
				<img src='{$data['pp_thumb_photo']}' class='ipsUserPhoto ipsUserPhoto_tiny' /> {$this->lang->words['posted']} {$this->lang->words['search_by']}
				" . (($data['member_id']) ? ("<span class=\"author vcard\">" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($data) : '' ) . "</span>") : ("{$data['members_display_name']}")) . "
				{$this->lang->words['on']} <abbr class=\"published\" title=\"" . date( 'c', $data['_post_date'] ) . "\">" . $this->registry->getClass('class_localization')->getDate($data['_post_date'],"long", 0) . "</abbr>
				" . (($data['_forum_trail']) ? ("
					{$this->lang->words['in']}
					".$this->__f__f901781c5070b8a6841e5bca98a9c27f($data)."				") : ("")) . "
			</p>
			<div class='post entry-content'>
				{$data['post']}
				{$data['attachmentHtml']}
			</div>
		</div>
	</div>
	<br />
</div>
<hr />
<br />";
return $IPBHTML;
}


function __f__f901781c5070b8a6841e5bca98a9c27f($data)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['_forum_trail'] as $i => $f )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						" . (($i+1 == count( $data['_forum_trail'] )) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$f[1]}", "public",'' ), "{$f[2]}", "showforum" ) . "'>{$f[0]}</a>") : ("")) . "
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- asForumTopics --*/
function asForumTopics($data) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['asForumTopics'] ) )
{
$count_776d9b6a99e76f0f951df66ecc0c4921 = is_array($this->functionData['asForumTopics']) ? count($this->functionData['asForumTopics']) : 0;
$this->functionData['asForumTopics'][$count_776d9b6a99e76f0f951df66ecc0c4921]['data'] = $data;
}
$IPBHTML .= "<tr class='__topic __tid{$data['tid']} " . ((!$data['_icon']['is_read']) ? ("unread") : ("")) . " expandable " . (($data['approved'] != 1) ? (" moderated") : ("")) . "' id='trow_{$data['tid']}' data-tid=\"{$data['tid']}\">
	<td class='col_f_icon short altrow'>
		" . ( method_exists( $this->registry->getClass('output')->getTemplate('global_other'), 'generateTopicIcon' ) ? $this->registry->getClass('output')->getTemplate('global_other')->generateTopicIcon($data['_icon'], $data['_unreadUrl']) : '' ) . "
	</td>
	<td>
		" . (($this->registry->class_forums->fetchArchiveTopicType( $data ) == 'archived') ? ("
			<span class='ipsBadge ipsBadge_lightgrey'>{$this->lang->words['topic_is_archived']}</span>
		") : ("")) . "
		" . ((!empty($data['tags']['formatted']['prefix'])) ? ("
			{$data['tags']['formatted']['prefix']}
		") : ("")) . "
		<h4><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}" . (($this->request['do']=='new_posts' OR $this->request['do']=='active') ? ("&amp;view=getnewpost") : ("" . (($data['pid'] AND $data['pid'] != $data['topic_firstpost']) ? ("&amp;view=findpost&amp;p={$data['pid']}") : ("")) . "")) . "&amp;hl={$data['cleanSearchTerm']}", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['view_result']}'>{$data['_shortTitle']}</a></h4>
		<span class='desc blend_links'>
			".$this->__f__f999fe3cdad1cf1e53f1178d78560244($data)."		</span>
		<span class='desc lighter blend_links toggle_notify_off'>
			<br />{$this->lang->words['aft_started_by']} {$data['starter']}, " . $this->registry->getClass('class_localization')->getDate($data['start_date'],"DATE", 0) . "
			" . ((count($data['tags']['formatted'])) ? ("
				&nbsp;<img src='{$this->settings['img_url']}/icon_tag.png' /> {$data['tags']['formatted']['truncatedWithLinks']}
			") : ("")) . "
		</span>
		" . ((isset( $data['pages'] ) AND is_array( $data['pages'] ) AND count( $data['pages'] )) ? ("
			<ul class='mini_pagination toggle_notify_off'>
			".$this->__f__a928ac172928bdc9a4fbd9804cee78ef($data)."			</ul>
		") : ("")) . "
		" . ((IPSSearchRegistry::get('set.searchResultType') == 'both') ? ("
			<span class='desc lighter blend_links toggle_notify_off'>
				<br />{$this->lang->words['n_last_post_by']} {$data['last_poster']},
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}&amp;view=getlastpost", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['goto_last_post']}'>" . $this->registry->getClass('class_localization')->getDate($data['_last_post'],"DATE", 0) . "</a>
			</span>
		") : ("")) . "
		" . ((count($data['_followData'])) ? ("
			" . ( method_exists( $this->registry->getClass('output')->getTemplate('search'), 'followData' ) ? $this->registry->getClass('output')->getTemplate('search')->followData($data['_followData']) : '' ) . "
		") : ("")) . "
	</td>
	<td class='col_f_preview __topic_preview'>
		<a href='#' class='expander closed' title='{$this->lang->words['view_topic_preview']}'>&nbsp;</a>
	</td>
	<td class='col_f_views'>
		<ul>
			<li>" . $this->registry->getClass('class_localization')->formatNumber( $data['posts'] ) . " " . ((intval($data['posts']) == 1) ? ("{$this->lang->words['reply']}") : ("{$this->lang->words['replies']}")) . "</li>
			<li class='views desc'>" . $this->registry->getClass('class_localization')->formatNumber( $data['views'] ) . " {$this->lang->words['views']}</li>
		</ul>
	</td>
	<td class='col_f_post'>
		" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userSmallPhoto' ) ? $this->registry->getClass('output')->getTemplate('global')->userSmallPhoto($data) : '' ) . "
		<ul class='last_post ipsType_small'>
			" . ((IPSSearchRegistry::get('set.searchResultType') == 'both') ? ("
				<li>" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($data) : '' ) . "</li>
				<li>
					<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}&amp;view=getlastpost", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['goto_last_post']}'>{$this->lang->words['n_posted']} " . $this->registry->getClass('class_localization')->getDate($data['_post_date'],"DATE", 0) . "</a>
				</li>
			") : ("
				<li>{$data['last_poster']}</li>
				<li>
					<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}&amp;view=getlastpost", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['goto_last_post']}'>" . $this->registry->getClass('class_localization')->getDate($data['_last_post'],"DATE", 0) . "</a>
				</li>
			")) . "
		</ul>
	</td>
	" . ((count($data['_followData'])) ? ("
		<td class='col_f_mod'>
			<input class='input_check checkall toggle_notify_on' type=\"checkbox\" name=\"likes[]\" value=\"{$data['_followData']['like_app']}-{$data['_followData']['like_area']}-{$data['_followData']['like_rel_id']}\" />
		</td>
	") : ("" . (($this->memberData['g_is_supmod']) ? ("<td class='col_f_mod'>
				" . (($this->request['search_app_filters']['forums']['liveOrArchive'] == 'archive') ? ("
					&nbsp;
				") : ("
					<input type='checkbox' class='input_check topic_mod' id='tmod_{$data['tid']}' />
				")) . "
			</td>") : ("")) . "")) . "
</tr>
" . (($data['pid']) ? ("
<script type='text/javascript'>
ipb.global.searchResults[ {$data['tid']} ] = { pid: " . intval($data['pid']) . ", searchterm:\"{$data['cleanSearchTerm']}\" };
</script>
") : ("")) . "";
return $IPBHTML;
}


function __f__f999fe3cdad1cf1e53f1178d78560244($data)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['_forum_trail'] as $i => $f )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			" . (($i+1 == count( $data['_forum_trail'] )) ? ("<span class='desc lighter'>{$this->lang->words['search_aft_in']}</span> <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$f[1]}", "public",'' ), "{$f[2]}", "showforum" ) . "'>{$f[0]}</a>") : ("")) . "
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__a928ac172928bdc9a4fbd9804cee78ef($data)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['pages'] as $page )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
					" . (($page['last']) ? ("
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}&amp;st={$page['st']}", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "\" title='{$this->lang->words['topic_goto_page']} {$page['page']}'>{$page['page']} {$this->lang->words['_rarr']}</a></li>
					") : ("
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$data['tid']}&amp;st={$page['st']}", "public",'' ), "{$data['title_seo']}", "showtopic" ) . "\" title='{$this->lang->words['topic_goto_page']} {$page['page']}'>{$page['page']}</a></li>
					")) . "
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- followData --*/
function followData($followData) {
$IPBHTML = "";
$IPBHTML .= "<p class='notify_info toggle_notify_on'>
	<span>
		" . (($followData['like_notify_do']) ? ("
			<img src='{$this->settings['img_url']}/icon_follow_freq.png' /> &nbsp;{$this->lang->words['notify_freq_' . $followData['like_notify_freq'] ]}
		") : ("
		 	<img src='{$this->settings['img_url']}/icon_follow_freq_none.png' /> &nbsp;{$this->lang->words['notify_freq_none']}
		")) . "
	</span>
	" . (($followData['like_is_anon']) ? ("
		<span>
			<img src='{$this->settings['img_url']}/icon_follow_anon.png' /> &nbsp;{$this->lang->words['anonymous']}
		</span>
	") : ("")) . "
</p>";
return $IPBHTML;
}

/* -- followedContentForumsWrapper --*/
function followedContentForumsWrapper($results) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['followedContentForumsWrapper'] ) )
{
$count_b8fa2c074ead5f1b295c90f44539d4ae = is_array($this->functionData['followedContentForumsWrapper']) ? count($this->functionData['followedContentForumsWrapper']) : 0;
$this->functionData['followedContentForumsWrapper'][$count_b8fa2c074ead5f1b295c90f44539d4ae]['results'] = $results;
}
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("forums", "0" ) . "
<script type='text/javascript' src='{$this->settings['public_dir']}js/ips.forums.js'></script>
<table class='ipb_table topic_list' id='forum_table'>
	" . ((count($results)) ? ("".$this->__f__f0b464687aad899b6bb3ba009787d88a($results)."	") : ("")) . "
</table>";
return $IPBHTML;
}


function __f__f0b464687aad899b6bb3ba009787d88a($results)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $results as $result )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			{$result['html']}
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- followedContentForumsWrapperForums --*/
function followedContentForumsWrapperForums($results) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['followedContentForumsWrapperForums'] ) )
{
$count_b171c5ef3a7e15f1407fb4919f381d47 = is_array($this->functionData['followedContentForumsWrapperForums']) ? count($this->functionData['followedContentForumsWrapperForums']) : 0;
$this->functionData['followedContentForumsWrapperForums'][$count_b171c5ef3a7e15f1407fb4919f381d47]['results'] = $results;
}
$IPBHTML .= "<script type='text/javascript'>
//<![CDATA[
	var markerURL  = ipb.vars['base_url'] + \"app=forums&module=ajax&section=markasread&i=1\"; // Ajax URL so don't use &amp;
	var unreadIcon = \"<img src='{$this->settings['img_url']}/f_icon_read.png' />\";
//]]>
</script>
<table class='ipb_table topic_list' id='forum_table'>
	" . ((count($results)) ? ("".$this->__f__3ca7be165d342eda8a089d4ebf9dc5fd($results)."	") : ("")) . "
</table>";
return $IPBHTML;
}


function __f__15d680c0f558b61d5a409e09af94e7c2($results,$forum_data='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $forum_data['subforums'] as $__id => $__data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
								" . (($__data[3]) ? ("<li class='unread'>") : ("<li>")) . "
									<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$__data[0]}", "public",'' ), "{$__data[2]}", "showforum" ) . "\" title='{$__data[1]}'>{$__data[1]}</a>
								</li>
							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__3ca7be165d342eda8a089d4ebf9dc5fd($results)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $results as $forum_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			<tr class='" . (($forum_data['_has_unread']) ? ("unread") : ("")) . "'>
				<td class='col_c_icon altrow'>
					" . (($forum_data['_has_unread']) ? ("
						<a id='forum_img_{$forum_data['id']}' href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=markasread&amp;marktype=forum&amp;forumid={$forum_data['id']}&amp;returntoforumid={$this->request['f']}&amp;i=1", "public",'' ), "", "" ) . "\" data-tooltip=\"{$this->lang->words['bi_markread']}\" class='forum_marker'><img src='{$this->settings['img_url']}/f_icon.png' /></a>
						<script type='text/javascript'>
							ipb.global.registerMarker( \"forum_img_{$forum_data['id']}\", \"{$forum_data['img_new_post']}\", markerURL + \"&forumid={$forum_data['id']}\" );
						</script>
					") : ("
						<img src='{$this->settings['img_url']}/f_icon_read.png' />
					")) . "
				</td>
				<td class='col_c_forum'>
					<h4><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$forum_data['id']}", "public",'' ), "{$forum_data['name_seo']}", "showforum" ) . "\" title='{$forum_data['name']}'>{$forum_data['name']}</a></h4>
					
					" . (($forum_data['show_subforums'] AND count( $forum_data['subforums'] ) AND $forum_data['show_subforums']) ? ("
						<br />
						<ol class='ipsList_inline ipsType_small subforums toggle_notify_off' id='subforums_{$forum_data['id']}'>
							".$this->__f__15d680c0f558b61d5a409e09af94e7c2($results,$forum_data)."						</ol>
					") : ("")) . "
					" . ((count($forum_data['_followData'])) ? ("
						" . ( method_exists( $this->registry->getClass('output')->getTemplate('search'), 'followData' ) ? $this->registry->getClass('output')->getTemplate('search')->followData($forum_data['_followData']) : '' ) . "
					") : ("")) . "
				</td>
				<td class='col_c_stats ipsType_small'>
					<strong>{$forum_data['topics']}</strong> {$this->lang->words['topics']}<br />
					<strong>{$forum_data['posts']}</strong> {$this->lang->words['replies']}
				</td>
				<td class='col_c_post'>
					" . (($forum_data['hide_last_info']) ? ("
						<ul class='last_post'>
							<li class='desc'>{$this->lang->words['f_protected']}</li>
						</ul>
					") : ("" . (($forum_data['pp_small_photo'] AND !$forum_data['hide_last_info']) ? ("
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$forum_data['last_poster_id']}", "public",'' ), "{$forum_data['seo_last_name']}", "showuser" ) . "' class='ipsUserPhotoLink left'>
								<img src='{$forum_data['pp_small_photo']}' alt='{$this->lang->words['photo']}' class='ipsUserPhoto ipsUserPhoto_mini' />
							</a>
						") : ("")) . "
						<ul class='last_post ipsType_small'>
							" . ((!$forum_data['last_id']) ? ("
								<li class='desc lighter'><em>{$this->lang->words['f_none']}</em></li>
							") : ("<li>
									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$forum_data['last_topic_id']}&amp;view=getnewpost", "public",'' ), "{$forum_data['seo_last_title']}", "showtopic" ) . "' title=\"{$this->lang->words['view_new_post']}\">
										" . IPSText::truncate( $forum_data['last_title'], 28) . "
									</a>
								</li>
								" . (($forum_data['last_poster_id']) ? ("
									<li>{$this->lang->words['by_ucfirst']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($forum_data) : '' ) . "</li>
								") : ("")) . "
								" . (($forum_data['_hide_last_date']) ? ("
									<li class='desc lighter'>" . $this->registry->getClass('class_localization')->getDate($forum_data['last_post'],"DATE", 0) . "</li>
								") : ("
									<li class='desc lighter blend_links'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$forum_data['last_id']}&amp;view=getlastpost", "public",'' ), "{$forum_data['seo_last_title']}", "showtopic" ) . "' title='{$this->lang->words['view_last_post']}'>" . $this->registry->getClass('class_localization')->getDate($forum_data['last_post'],"DATE", 0) . "</a></li>
								")) . "")) . "
						</ul>")) . "
				</td>
				<td class='col_f_mod'>
					<input class='input_check checkall toggle_notify_on' type=\"checkbox\" name=\"likes[]\" value=\"{$forum_data['_followData']['like_app']}-{$forum_data['_followData']['like_area']}-{$forum_data['_followData']['like_rel_id']}\" />
				</td>
			</tr>
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- followedContentView --*/
function followedContentView($results, $pagination, $total, $error, $contentTypes) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['followedContentView'] ) )
{
$count_e57ddee9723752845177eb7e67e31d92 = is_array($this->functionData['followedContentView']) ? count($this->functionData['followedContentView']) : 0;
$this->functionData['followedContentView'][$count_e57ddee9723752845177eb7e67e31d92]['results'] = $results;
$this->functionData['followedContentView'][$count_e57ddee9723752845177eb7e67e31d92]['pagination'] = $pagination;
$this->functionData['followedContentView'][$count_e57ddee9723752845177eb7e67e31d92]['total'] = $total;
$this->functionData['followedContentView'][$count_e57ddee9723752845177eb7e67e31d92]['error'] = $error;
$this->functionData['followedContentView'][$count_e57ddee9723752845177eb7e67e31d92]['contentTypes'] = $contentTypes;
}
$IPBHTML .= "" . (($error) ? ("
<p class='message error'>
	{$error}
</p>
") : ("" . (($this->request['confirm']) ? ("
	<p class='message'>
		{$this->lang->words['likes_rem_suc']}
	</p>
	") : ("")) . "")) . "
<br />
<input type='hidden' name=\"usedInJsLater\" id=\"urlString\" value=\"" . base64_encode( $this->registry->output->buildUrl( "app=core&amp;module=search&amp;do=followed&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}", "public" ) ) . "\" />
<h1 class='ipsType_pagetitle'>{$this->lang->words['followed_content']}</h1>
<div class='ipsType_pagedesc'>
	{$this->lang->words['followed_content_desc']}
</div>
<br />
<div class='ipsLayout ipsLayout_withleft clearfix'>
	<div class='ipsLayout_left'>
		<div class='ipsBox'>
			<div class='ipsBox_container ipsSideMenu'>
				<h4>{$this->lang->words['filter_by_app']}</h4>
				<ul>
					" . ((IPSLib::appSupportsExtension( 'forums', array('like') )) ? ("<li " . (($this->request['search_app'] == 'forums') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=followed&amp;search_app=forums&amp;sid={$this->request['_sid']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'forums' ) . "</a></li>") : ("")) . "
					" . ((IPSLib::appSupportsExtension( 'members', array('like') )) ? ("<li " . (($this->request['search_app'] == 'members') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=followed&amp;search_app=members&amp;sid={$this->request['_sid']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'members' ) . "</a></li>") : ("")) . "
					".$this->__f__150260e0d0b3cbde655d651a86d5bd35($results,$pagination,$total,$error,$contentTypes)."				</ul>
				" . ((is_array($contentTypes) AND count( $contentTypes )) ? ("
					<h4>{$this->lang->words['filter_by_section']}</h4>
					<ul>
						".$this->__f__0850a1a543f161fe512b48566e7e326a($results,$pagination,$total,$error,$contentTypes)."					</ul>
				") : ("")) . "
			</div>
		</div>
	</div>
	<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=manageFollowed&amp;search_app={$this->request['search_app']}&amp;contentType={$this->request['contentType']}", "public",'' ), "", "" ) . "\" id=\"checkBoxForm\" method=\"post\">
	<input type=\"hidden\" name=\"secure_key\" value=\"{$this->member->form_hash}\" />
	
	<div class='right clearfix'>
		<a href='#' id='toggle_notification' class='ipsButton_secondary'>{$this->lang->words['display_edit_options']}</a>
	</div>
	<br /><br />
	
	<div class='ipsLayout_content'>
		<h2 class='maintitle'>
			<span class='right'>
				<input type='checkbox' id='checkAllLikes' class='input_check toggle_notify_on' title='{$this->lang->words['search_select_all']}' value='1' />
			</span>
			" . (($this->request['search_app']) ? ("" . IPSLib::getAppTitle( $this->request['search_app'] ) . "") : ("{$this->lang->words['search_all']}")) . "
		</h2>
		<div>
			" . (($total) ? ("{$results}
				
				" . ((count($results)) ? ("<div class='moderation_bar rounded with_action toggle_notify_on'>
						<select name='modaction' class='input_select'>
							<option value=''>{$this->lang->words['like_mod__chose']}</option>
							<option value='delete'>{$this->lang->words['like_mod__delete']}</option>
							<option value='change-donotify'>{$this->lang->words['like_mod__change_donotify']}</option>
							<option value='change-donotnotify'>{$this->lang->words['like_mod__change_nonotify']}</option>
							<option value='change-immediate'>{$this->lang->words['like_mod__change_immediate']}</option>
							<option value='change-offline'>{$this->lang->words['like_mod__change_offline']}</option>
							" . (($this->request['search_app'] == 'forums') ? ("
								<option value='change-daily'>{$this->lang->words['like_mod__change_daily']}</option>
								<option value='change-weekly'>{$this->lang->words['like_mod__change_weekly']}</option>
							") : ("")) . "
							<option value='change-anon'>{$this->lang->words['like_mod__change_anon']}</option>
							<option value='change-noanon'>{$this->lang->words['like_mod__change_noanon']}</option>
						</select>
							
						<input type=\"submit\" class=\"input_submit alt\" value=\"{$this->lang->words['update_selected']}\" />
					</div>") : ("")) . "
				<br />
				{$pagination}") : ("
				<p class='no_messages'>{$this->lang->words['followed_content_none']}</p>
			")) . "
		</div>
	</div>
	
	</form>
</div>
<br class='clear' />
<script type='text/javascript'>
	ipb.global.registerCheckAll('checkAllLikes', 'checkall');
	
	if( $('toggle_notification') ){
		$('toggle_notification').observe( 'click', function(e){
			Event.stop(e);
			$('checkBoxForm').toggleClassName('show_notify');
		});
	}
</script>";
return $IPBHTML;
}


function __f__150260e0d0b3cbde655d651a86d5bd35($results, $pagination, $total, $error, $contentTypes)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $this->registry->getApplications() as $app )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						" . ((IPSLib::appSupportsExtension( $app['app_directory'], array('like') ) AND !in_array( $app['app_directory'], array('core','forums','members') )) ? ("<li " . (($this->request['search_app'] == $app['app_directory']) ? ("class='active'") : ("")) . ">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=followed&amp;search_app={$app['app_directory']}&amp;sid={$this->request['_sid']}", "public",'' ), "", "" ) . "'>
									" . IPSLib::getAppTitle( $app['app_directory'] ) . "
								</a>
							</li>") : ("")) . "
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__0850a1a543f161fe512b48566e7e326a($results, $pagination, $total, $error, $contentTypes)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $contentTypes as $type )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							<li " . (($this->request['contentType'] == $type) ? ("class='active'") : ("")) . ">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=followed&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;contentType={$type}", "public",'' ), "", "" ) . "'>{$this->lang->words['followed_type__' . $type]}</a>
							</li>
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- forumAdvancedSearchFilters --*/
function forumAdvancedSearchFilters($forums, $archivedPostCount=0, $topic) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['forumAdvancedSearchFilters'] ) )
{
$count_145c1e08f9d91880d3ff13afd5a2a066 = is_array($this->functionData['forumAdvancedSearchFilters']) ? count($this->functionData['forumAdvancedSearchFilters']) : 0;
$this->functionData['forumAdvancedSearchFilters'][$count_145c1e08f9d91880d3ff13afd5a2a066]['forums'] = $forums;
$this->functionData['forumAdvancedSearchFilters'][$count_145c1e08f9d91880d3ff13afd5a2a066]['archivedPostCount'] = $archivedPostCount;
$this->functionData['forumAdvancedSearchFilters'][$count_145c1e08f9d91880d3ff13afd5a2a066]['topic'] = $topic;
}
$IPBHTML .= "<fieldset class='" .  IPSLib::next( $this->registry->templateStriping["search"] ) . "'>
	<span class='search_msg'>
		{$this->lang->words['s_forum_desc']}
	</span>
	<ul class='ipsForm_horizontal'>
		" . (($archivedPostCount > 0) ? ("
			<li class='ipsField clear'>
				<label class='ipsField_title' for='forums_display'>{$this->lang->words['fs_search_type_title']}</label>
				<p class='ipsField_content'>
					<input type='radio' name='search_app_filters[forums][liveOrArchive]' value='live' checked=\"checked\" /> {$this->lang->words['fs_search_type_live']}&nbsp;&nbsp;&nbsp;
					<input type='radio' name='search_app_filters[forums][liveOrArchive]' value='archive' /> {$this->lang->words['fs_search_type_archive']}
				</p>
			</li>
		") : ("")) . "
		<li class='ipsField ipsField_select clear'>
			" . ((is_null( $topic )) ? ("
				<label class='ipsField_title' for='forums_filter'>{$this->lang->words['find_forum']}</label>
				<p class='ipsField_content'>
					<select name='search_app_filters[forums][forums][]' class='input input_select' size='6' multiple='multiple'>
						{$forums}
					</select>
				</p>
			") : ("
				<input type='hidden' name='cType' value='topic' />
				<input type='hidden' name='cId' value='{$topic['tid']}' />
				<label class='ipsField_title' for='topic_checkbox'>{$this->lang->words['find_topic']}</label>
				<p class='ipsField_content'>
					{$topic['title']}
				</p>
			")) . "
		</li>
		<li class='ipsField clear'>
			<label class='ipsField_title' for='forums_display'>{$this->lang->words['s_forum_display']}</label>
			<p class='ipsField_content'>
				<input type='radio' name='search_app_filters[forums][noPreview]' value='0' /> {$this->lang->words['s_forum_asposts']}&nbsp;&nbsp;&nbsp;
				<input type='radio' name='search_app_filters[forums][noPreview]' value='1' checked=\"checked\" /> {$this->lang->words['s_forum_astopics']}
			</p>
		</li>
		<li class='ipsField clear'>
			<label class='ipsField_title' for='f_p_data'>{$this->lang->words['s_forum_stuff']}</label>
			<p class='ipsField_content'>
				" . sprintf( $this->lang->words['s_forum_stuff_2'], "<input id='f_p_count' type='text' name='search_app_filters[forums][pCount]' class='input_text' style='vertical-align: middle; width:40px' size='5' value='' />", "<input id='f_p_views' type='text' name='search_app_filters[forums][pViews]' class='input_text' style='vertical-align: middle; width:40px' size='5' value='' />") . "
			</p>
		</li>
	</ul>
</fieldset>";
return $IPBHTML;
}

/* -- forumsVncFilters --*/
function forumsVncFilters($data, $currentPrefs) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['forumsVncFilters'] ) )
{
$count_2aac84313eda8d9d400708a47271c5b9 = is_array($this->functionData['forumsVncFilters']) ? count($this->functionData['forumsVncFilters']) : 0;
$this->functionData['forumsVncFilters'][$count_2aac84313eda8d9d400708a47271c5b9]['data'] = $data;
$this->functionData['forumsVncFilters'][$count_2aac84313eda8d9d400708a47271c5b9]['currentPrefs'] = $currentPrefs;
}
$IPBHTML .= "<h3>
	{$this->lang->words['vnc_filters_header']}
</h3>
<div class='fixed_inner ipsBox ipsLayout clearfix'>
	<div class='ipsLayout_content ipsBox_container search_filter_container'>
		<div id=\"vnc_filter_popup_close\"><a class='input_submit' id='save_vnc_filters' href='#'>{$this->lang->words['save_vnc_filters']}</a> &nbsp;&nbsp;{$this->lang->words['or']}&nbsp;&nbsp;<a href='#' id='cancel_vnc_filters' class='cancel'>{$this->lang->words['cancel']}</a></div>
		<ul class='block_list'>
			<li class='clickable" . (($currentPrefs == null OR !count($currentPrefs)) ? (" active") : ("")) . "' id='forum_all'><span><strong>{$this->lang->words['vnc_filter_showall_forums']}</strong></span><input type='hidden' name='forum_all' id='hf_all' value='" . (($currentPrefs == null OR !count($currentPrefs)) ? ("1") : ("")) . "' /></li>
			".$this->__f__87cba9d49b28d7d5dfc7b8dd6edcdbc0($data,$currentPrefs)."		</ul>
	</div>
</div>";
return $IPBHTML;
}


function __f__87cba9d49b28d7d5dfc7b8dd6edcdbc0($data, $currentPrefs)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data as $_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				" . ((! empty( $_data['important'] )) ? ("
					<li><span class='heading'>{$_data['title']}</span></li>
				") : ("<li class='clickable" . ((count($currentPrefs) AND in_array($_data['id'], $currentPrefs)) ? (" active") : ("")) . "' id='forum_{$_data['id']}'>" . ((!empty($_data['depth'])) ? ("") : ("")) . "<span>" . str_repeat( '&nbsp;&nbsp;&nbsp;&nbsp;', $_data['depth']) . "{$_data['title']}</span><input type='hidden' name='forum_{$_data['id']}' id='hf_{$_data['id']}' value='" . ((count($currentPrefs) AND in_array($_data['id'], $currentPrefs)) ? ("1") : ("0")) . "' /></li>")) . "
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- helpSearchResult --*/
function helpSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['helpSearchResult'] ) )
{
$count_99af448365beeb26cbde5aa2e5d624d2 = is_array($this->functionData['helpSearchResult']) ? count($this->functionData['helpSearchResult']) : 0;
$this->functionData['helpSearchResult'][$count_99af448365beeb26cbde5aa2e5d624d2]['r'] = $r;
$this->functionData['helpSearchResult'][$count_99af448365beeb26cbde5aa2e5d624d2]['resultAsTitle'] = $resultAsTitle;
}

$st = IPSSearchRegistry::get('in.search_higlight');
$IPBHTML .= "<div class='result_info'>
	<h3><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=help&amp;do=01&amp;HID={$r['type_id_2']}&amp;hl={$st}", "public",'' ), "", "" ) . "'>{$r['content_title']}</a></h3>
	" . ((!$resultAsTitle) ? ("
	<p>
		{$r['content']}
	</p>
	") : ("")) . "
</div>";
return $IPBHTML;
}

/* -- memberCommentsSearchResult --*/
function memberCommentsSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['memberCommentsSearchResult'] ) )
{
$count_d1a63a5d85fd487d4c34e186de983df8 = is_array($this->functionData['memberCommentsSearchResult']) ? count($this->functionData['memberCommentsSearchResult']) : 0;
$this->functionData['memberCommentsSearchResult'][$count_d1a63a5d85fd487d4c34e186de983df8]['r'] = $r;
$this->functionData['memberCommentsSearchResult'][$count_d1a63a5d85fd487d4c34e186de983df8]['resultAsTitle'] = $resultAsTitle;
}
$IPBHTML .= "<span class='icon'>
	" . IPSMember::buildPhotoTag( $r['status_author'], 'small' ) . "
</span>
<div class='result_info'>
	<h3>
		" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($r['status_author']) : '' ) . "
		" . (($r['status_member_id'] != $r['status_author_id']) ? ("
			&rarr;
			" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($r['status_member']) : '' ) . "
		") : ("")) . "
	</h3>
	<span class='desc breadcrumb'>
		<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;module=profile&amp;section=status&amp;type=single&amp;status_id={$r['status_id']}", "public",'' ), "true", "members_status_single" ) . "'>{$this->lang->words['results_pf_comment']}</a>, " . $this->registry->getClass('class_localization')->getDate($r['status_date'],"short", 0) . "
	</span>
	<p>{$r['status_content']}</p>
	<div id=\"statusFeedback-{$r['status_id']}\" class='status_feedback'>
		" . (($r['status_replies'] AND count( $r['replies'] )) ? ("" . (($r['status_replies'] > 3) ? ("
				<div class='status_mini_wrap row2 altrow' id='statusMoreWrap-{$r['status_id']}'>
					<img src=\"{$this->settings['img_url']}/comments.png\" alt=\"\" /> &nbsp;<a href=\"#\" id=\"statusMore-{$r['status_id']}\" class='__showAll __x{$r['status_id']}'>" . sprintf( $this->lang->words['status_show_all_x'], $r['status_replies'] ) . "</a>
				</div>
			") : ("")) . "
			<ul id='statusReplies-{$r['status_id']}' class='ipsList_withtinyphoto clear'>
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('profile'), 'statusReplies' ) ? $this->registry->getClass('output')->getTemplate('profile')->statusReplies($r['replies'], 1) : '' ) . "
			</ul>") : ("")) . "
		<div id='statusReplyBlank-{$r['status_id']}'></div>
		<div class='status_mini_wrap row2 altrow' id='statusMaxWrap-{$r['status_id']}' " . (($r['status_replies'] < $this->settings['su_max_replies']) ? ("style='display:none'") : ("")) . ">
			<img src=\"{$this->settings['img_url']}/locked_replies.png\" title=\"{$this->lang->words['status_too_many_replies']}\" alt='x' /> {$this->lang->words['status_too_many_replies']}
		</div>
	</div>
</div>";
return $IPBHTML;
}

/* -- memberSearchResult --*/
function memberSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<span class='icon'>
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userSmallPhoto' ) ? $this->registry->getClass('output')->getTemplate('global')->userSmallPhoto(array_merge( $r, array( '_customClass' => 'ipsUserPhoto_medium' ) )) : '' ) . "
</span>
<div class='result_info'>
	<h3>" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($r) : '' ) . "</h3>
	<span class='desc lighter breadcrumb'>
		{$this->lang->words['member_joined']} " . $this->registry->getClass('class_localization')->getDate($r['joined'],"short", 0) . "<br />
		" . IPSMember::makeNameFormatted( $r['group'], $r['member_group_id'] ) . " &middot; " . $this->registry->getClass('class_localization')->formatNumber( $r['posts'] ) . " {$this->lang->words['member_posts']}
	</span>
</div>";
return $IPBHTML;
}

/* -- newContentView --*/
function newContentView($results, $pagination, $total, $sortDropDown, $sortIn, $dateCutSet=0) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['newContentView'] ) )
{
$count_60be350098de3e3383cfbe0bd50dd8d7 = is_array($this->functionData['newContentView']) ? count($this->functionData['newContentView']) : 0;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['results'] = $results;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['pagination'] = $pagination;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['total'] = $total;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['sortDropDown'] = $sortDropDown;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['sortIn'] = $sortIn;
$this->functionData['newContentView'][$count_60be350098de3e3383cfbe0bd50dd8d7]['dateCutSet'] = $dateCutSet;
}
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("search", "0" ) . "
<input type='hidden' name=\"usedInJsLater\" id=\"urlString\" value=\"" . base64_encode( $this->registry->output->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}", "public" ) ) . "\" />
<h1 class='ipsType_pagetitle'>{$this->lang->words['new_content']}</h1>
<div class='ipsType_pagedesc'>
	{$this->lang->words['new_content_desc']}
</div>
<br />
<div class='ipsLayout ipsLayout_withleft clearfix'>
	<div class='ipsLayout_left'>
		<div class='ipsBox'>
			<div class='ipsBox_container ipsSideMenu'>
				<h4>{$this->lang->words['filter_by_app']}</h4>
				<ul>
					" . ((IPSLib::appIsSearchable( 'forums', 'vnc' ) || IPSLib::appIsSearchable( 'forums', 'active' )) ? ("<li " . (($this->request['search_app'] == 'forums') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=forums&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'forums' ) . "</a></li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'members', 'vnc' ) || IPSLib::appIsSearchable( 'members', 'active' )) ? ("<li " . (($this->request['search_app'] == 'members') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=members&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'members' ) . "</a></li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'core', 'vnc' ) || IPSLib::appIsSearchable( 'core', 'active' )) ? ("<li " . (($this->request['search_app'] == 'core') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=core&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'core' ) . "</a></li>") : ("")) . "".$this->__f__b3083128427e84a8e57e4bcbea092891($results,$pagination,$total,$sortDropDown,$sortIn,$dateCutSet)."				</ul>
			
				" . ((is_array($sortIn) AND count( $sortIn )) ? ("
					<h4>{$this->lang->words['filter_by_section']}</h4>
					<ul>
						".$this->__f__51a9d94088dfb6d8b72e34606744c715($results,$pagination,$total,$sortDropDown,$sortIn,$dateCutSet)."					</ul>
				") : ("")) . "
			
				<h4>{$this->lang->words['filter_by_time']}</h4>
				<ul>
					" . ((IPSLib::appIsSearchable( IPSSearchRegistry::get('in.search_app'), 'vncWithUnreadContent' ) AND $this->memberData['member_id']) ? ("<li " . (($this->request['period']=='unread') ? ("class='active'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=unread&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['filter_not_read']}</a>
						</li>") : ("")) . "
					" . (($this->memberData['member_id']) ? ("<li " . (($this->request['period']=='lastvisit') ? ("class='active'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=lastvisit&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['filter_new_visit']}</a>
						</li>") : ("")) . "
					<li " . (($this->request['period']=='today') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=today&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_today']}</a>
					</li>
					<li " . (($this->request['period']=='week') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=week&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_week']}</a>
					</li>
					<li " . (($this->request['period']=='weeks') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=weeks&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_weeks']}</a>
					</li>
					<li " . (($this->request['period']=='month') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=month&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_month']}</a>
					</li>
					<li " . (($this->request['period']=='months') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=months&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_months']}</a>
					</li>
					<li " . (($this->request['period']=='year') ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;change=1&amp;period=year&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$this->lang->words['actperiod_year']}</a>
					</li>
				</ul>
				
				" . ((IPSLib::appIsSearchable( $this->request['search_app'], 'vncWithFollowFilter' ) AND $this->memberData['member_id']) ? ("<h4>{$this->lang->words['filter_by_other']}</h4>
					<ul>
						" . (($this->request['followedItemsOnly']) ? ("
							<li class=\"active\">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly=0", "public",'' ), "", "" ) . "'>{$this->lang->words['filter_i_follow']}</a>
							</li>
						") : ("
							<li>
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly=1", "public",'' ), "", "" ) . "'>{$this->lang->words['filter_i_follow']}</a>
							</li>
						")) . "
						<li " . (($this->request['userMode'] == 'all') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}&amp;userMode=" . (($this->request['userMode'] != 'all') ? ("all") : ("")) . "", "public",'' ), "", "" ) . "'>{$this->lang->words['vnc_topics_and_posts']}</a></li>
						<li " . (($this->request['userMode'] == 'title') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}&amp;userMode=" . (($this->request['userMode'] != 'title') ? ("title") : ("")) . "", "public",'' ), "", "" ) . "'>{$this->lang->words['vnc_topics_only']}</a></li>
						" . (($this->request['search_app'] == 'forums') ? ("<li " . ((IPSSearchRegistry::get('forums.vncForumFilters') != null) ? ("class='active'") : ("")) . "><a href='' id='vncForumFilter'>{$this->lang->words['vnc_filter_by_forum']}</a></li>") : ("")) . "
					</ul>") : ("")) . "
			</div>
		</div>
	</div>
	<div class='ipsLayout_content'>
		<div class='clearfix'>
			{$pagination}
		</div>
		<h2 class='maintitle'>
			" . (($this->memberData['g_is_supmod'] == 1 && IPSSearchRegistry::get('config.can_moderate_results')) ? ("
				<span class='right'>
					<input type='checkbox' id='tmod_all' class='input_check' title='{$this->lang->words['search_select_all']}' value='1' />
				</span>
			") : ("")) . "
			" . IPSLib::getAppTitle( $this->request['search_app'] ) . "
		</h2>
		<div>
			" . (($total) ? ("
				{$results}
				<br />
				{$pagination}
			") : ("
				<p class='no_messages'>{$this->lang->words['new_content_none']}</p>
			")) . "
		</div>
	</div>
</div>
<br class='clear' />";
return $IPBHTML;
}


function __f__b3083128427e84a8e57e4bcbea092891($results, $pagination, $total, $sortDropDown, $sortIn, $dateCutSet=0)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $this->registry->getApplications() as $app )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						" . (((IPSLib::appIsSearchable( $app['app_directory'], 'vnc' ) || IPSLib::appIsSearchable( $app['app_directory'], 'active' ) ) AND !in_array( $app['app_directory'], array('core','forums','members') )) ? ("<li " . (($this->request['search_app'] == $app['app_directory']) ? ("class='active'") : ("")) . ">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$app['app_directory']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>
									" . IPSLib::getAppTitle( $app['app_directory'] ) . "
								</a>
							</li>") : ("")) . "
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__51a9d94088dfb6d8b72e34606744c715($results, $pagination, $total, $sortDropDown, $sortIn, $dateCutSet=0)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortIn as $id => $_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							<li " . (($this->request['search_app_filters'][$this->request['search_app']]['searchInKey'] == $_data[0]) ? ("class='active'") : ("")) . ">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=viewNewContent&amp;search_app={$this->request['search_app']}&amp;sid={$this->request['_sid']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$_data['0']}&amp;period={$this->request['period']}&amp;userMode={$this->request['userMode']}&amp;followedItemsOnly={$this->request['followedItemsOnly']}", "public",'' ), "", "" ) . "'>{$_data[1]}</a>
							</li>
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- searchAdvancedForm --*/
function searchAdvancedForm($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['searchAdvancedForm'] ) )
{
$count_cfafdbfcc882f6d53b4ec5457c529f6d = is_array($this->functionData['searchAdvancedForm']) ? count($this->functionData['searchAdvancedForm']) : 0;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['filters'] = $filters;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['msg'] = $msg;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['current_app'] = $current_app;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['removed_search_terms'] = $removed_search_terms;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['isFT'] = $isFT;
$this->functionData['searchAdvancedForm'][$count_cfafdbfcc882f6d53b4ec5457c529f6d]['canTag'] = $canTag;
}
$IPBHTML .= "<style type='text/css'>
 	@import url('{$this->settings['public_dir']}style_css/{$this->registry->output->skin['_csscacheid']}/calendar_select.css');
</style>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/calendar_date_select/calendar_date_select.js'></script>
" . $this->registry->getClass('output')->addJSModule("search", "0" ) . "
<h1 class='ipsType_pagetitle'>{$this->lang->words['search']}</h1>
" . ((is_array( $removed_search_terms ) && count( $removed_search_terms )) ? ("
<br />
<p class='message error'>{$this->lang->words['removed_search_terms']} <strong>" . implode( ',', $removed_search_terms ) . "</strong></p>
") : ("")) . "
" . (($msg) ? ("
<br />
<p class='message error'>{$msg}</p>
") : ("")) . "
<br />
<div class='ipsBox' id='main_search_form'>
	<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;section=search&amp;do=search", "public",'' ), "", "" ) . "&amp;fromsearch=1\" method=\"post\" id='search-box' >
		<input type='hidden' name='search_app' id='search_app' value='{$this->request['search_app']}' />
		<fieldset id='' class='ipsBox_container ipsPad'>
			<ul class='ipsForm_horizontal'>
				<li class='ipsField'>
					<label for='query' class='ipsField_title'>{$this->lang->words['find_words']}</label>
					<p class='ipsField_content'>
						<input type='text' class='input_text' name='search_term' id='query' value='{$this->request['search_term']}' size='50' /><br />
						<span class='desc lighter'>{$this->lang->words['s_andor_quotes']}</span>
					</p>
				</li>
				" . ((count($filters)) ? ("<li class='ipsField app_chooser'>
						<label class='ipsField_title' for=''>{$this->lang->words['search_section']}</label>
						<div class='ipsField_content'>
							<ul id='sapps'>
								" . ((IPSLib::appIsSearchable( 'forums', 'search' )) ? ("<li style='display: inline-block;' class='search_app' id='sapp_forums'>
										<input type='radio' data-allowtags='{$canTag[ 'forums' ]}' name='search_app' value='forums' id='radio_forums' " . (($this->request['search_app'] == 'forums') ? ("checked=\"checked\"") : ("")) . " /> <label for='radio_forums'>" . IPSLib::getAppTitle( 'forums' ) . "</label>
									</li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'members', 'search' )) ? ("<li style='display: inline-block;' class='search_app' id='sapp_members'>
										<input type='radio' data-allowtags='{$canTag[ 'members' ]}' name='search_app' value='members' id='radio_members' " . (($this->request['search_app'] == 'members') ? ("checked=\"checked\"") : ("")) . " /> <label for='radio_members'>" . IPSLib::getAppTitle( 'members' ) . "</label>
									</li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'core', 'search' )) ? ("<li style='display: inline-block;' class='search_app' id='sapp_core'>
										<input type='radio' data-allowtags='{$canTag[ 'core' ]}' name='search_app' value='core' id='radio_core' " . (($this->request['search_app'] == 'core') ? ("checked=\"checked\"") : ("")) . " /> <label for='radio_core'>" . IPSLib::getAppTitle( 'core' ) . "</label>
									</li>") : ("")) . "".$this->__f__ed4f756eb85bfc94d238e0eb2814fd6f($filters,$msg,$current_app,$removed_search_terms,$isFT,$canTag)."							</ul>
						</div>
					</li>") : ("")) . "
			</ul>
		</fieldset>
		
		<fieldset id='other_filters' class='ipsBox_container ipsPad'>
			<ul class='ipsForm_horizontal'>
				<li class='ipsField ipsField_select clear'>
					<label for='andor_type' class='ipsField_title'><strong>{$this->lang->words['matchlabel']}</strong></label>
					<p class='ipsField_content'>
						" . (($this->settings['use_fulltext'] AND $this->DB->checkBooleanFulltextSupport()) ? ("<select name=\"andor_type\" id=\"andor_type\">
								<option value=\"and\" " . (($this->settings['s_andor_type'] == 'and') ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_andor_and']}</option>
								<option value=\"or\" " . (($this->settings['s_andor_type'] == 'or') ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_andor_or']}</option>
							</select>
							&nbsp;&nbsp;") : ("")) . "
						
						<select name=\"search_content\" id=\"search_content\">
							<option value=\"both\">{$this->lang->words['search_both_types']}</option>
							<option value=\"titles\">{$this->lang->words['search_titles_types']}</option>
							<option value=\"content\">{$this->lang->words['search_content_types']}</option>
						</select>
					</p>
				</li>
				" . (($canTag[ $current_app ]) ? ("
					<li class='ipsField clear' id='tag_row'>
						<label for='tags' class='ipsField_title'>{$this->lang->words['find_by_tags']}</label>
						<p class='ipsField_content'>
							<input type='text' class='input_text input' name='search_tags' id='tags' value='{$this->request['find_by_tags']}' size='50' />
							<br />
							<span class='desc lighter'>{$this->lang->words['find_by_tags_desc']}</span>
						</p>
					</li>
				") : ("")) . "
				<li class='ipsField clear'>
					<label for='author' class='ipsField_title'>{$this->lang->words['find_author']}</label>
					<p class='ipsField_content'>
						<input type='text' class='input_text input' name='search_author' id='author' value='{$this->request['search_author']}' size='50' />
					</p>
				</li>
				<li class='ipsField clear'>
					<label for='date_start' class='ipsField_title'>{$this->lang->words['find_date']}</label>
					<p class='ipsField_content'>
						<input type='text' class='input_text' name='search_date_start' id='date_start' value='{$this->request['_search_date_start']}' /><img src='{$this->settings['img_url']}/date.png' alt='' id='date_start_icon' style='cursor: pointer' /> &nbsp;
						<strong>{$this->lang->words['to']}</strong> &nbsp;<input type='text' class='input_text' name='search_date_end' id='date_end' value='{$this->request['_search_date_end']}' /><img src='{$this->settings['img_url']}/date.png' alt='' id='date_end_icon' style='cursor: pointer' />
					</p>
				</li>
				
			</ul>
		</fieldset>
		" . ((count($filters)) ? ("".$this->__f__46038bf226ed90a635e42a8d6852f245($filters,$msg,$current_app,$removed_search_terms,$isFT,$canTag)."		") : ("")) . "
		<fieldset class='submit'>
			<input type='submit' name='submit' class='input_submit' value='{$this->lang->words['do_search']}'> {$this->lang->words['or']} <a href='{$this->settings['board_url']}' title='{$this->lang->words['cancel']}' class='cancel'>{$this->lang->words['cancel']}</a>
		</fieldset>
	</form>
</div>";
return $IPBHTML;
}


function __f__ed4f756eb85bfc94d238e0eb2814fd6f($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $this->registry->getApplications() as $app => $data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
									" . ((IPSLib::appIsSearchable( $app, 'search' ) AND !in_array( $app, array( 'forums', 'members', 'core' ) )) ? ("<li style='display: inline-block;' class='search_app' id='sapp_{$app}'>
											<input type='radio' data-allowtags='{$canTag[ $app ]}' name='search_app' value='{$app}' id='radio_{$app}' " . (($app == $this->request['search_app']) ? ("checked=\"checked\"") : ("")) . " /> <label for='radio_{$app}'>" . IPSLib::getAppTitle( $app ) . "</label>
										</li>") : ("")) . "
								
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__67e127d3ae4ac222fdd64af4e2c5c192($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array(),$app='',$data='',$id='',$_data='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['sortDropDown'][$_data[0]] as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
													<option value='$k' " . (($this->request['search_app_filters'][$app][$_data[0]]['sortKey'.$_data[0]] == $k) ? ("selected='selected'") : ("")) . ">{$l}</option>
												
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__21345ae2b5a35a79b9f47e0016b50372($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array(),$app='',$data='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['sortDropIn'] as $id => $_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
									<ul class='ipsForm_horizontal'>
										<li class='ipsField ipsField_select'>
											<label class='ipsField_title' for='search_by_{$_data[0]}'>" . ((! $id) ? ("{$this->lang->words['s_member_sin']}") : ("&nbsp;")) . "</label>
											<p class='ipsField_content'>
												<input type='radio' name='search_app_filters[$app][searchInKey]' value='{$_data[0]}' " . (($this->request['search_app_filters'][$app]['searchInKey'] == $_data[0] || ( ! $this->request['search_app_filters'][$app]['searchInKey'] AND ! $id )) ? ("checked=\"checked\"") : ("")) . " /> $_data[1]
												<select name='search_app_filters[$app][{$_data[0]}][sortKey]' class='input_select' style='width:auto'>
												".$this->__f__67e127d3ae4ac222fdd64af4e2c5c192($filters,$msg,$current_app,$removed_search_terms,$isFT,$canTag,$app,$data,$id,$_data)."												</select>
												<select name='search_app_filters[$app][{$_data[0]}][sortDir]' class='input_select' style='width:auto'>
													<option value='0' " . ((!$this->request['search_app_filters'][$app][$_data[0]]['sortDir']) ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_search_type_o_0']}</option>
													<option value='1' " . (($this->request['search_app_filters'][$app][$_data[0]]['sortDir']) ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_search_type_o_1']}</option>
												</select>
											</p>
										</li>
									</ul>
								
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__d6c0af20b8fd2ac851c7384b33d958d9($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array(),$app='',$data='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data['sortDropDown'] as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
												<option value='$k' " . (($this->request['search_app_filters'][$app]['sortKey'] == $k) ? ("selected='selected'") : ("")) . ">{$l}</option>
											
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__46038bf226ed90a635e42a8d6852f245($filters='', $msg='', $current_app, $removed_search_terms=array(), $isFT=false, $canTag=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $filters as $app => $data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				<div id='app_filter_{$app}' class='ipsBox_container ipsPad' style='display: none'>
					" . ((!empty($data['html'])) ? ("
						{$data['html']}
					") : ("")) . "
					" . ((count($data['sortDropDown'])) ? ("<fieldset class='" .  IPSLib::next( $this->registry->templateStriping["search"] ) . "'>
							" . ((is_array($data['sortDropIn']) AND count( $data['sortDropIn'] )) ? ("
								".$this->__f__21345ae2b5a35a79b9f47e0016b50372($filters,$msg,$current_app,$removed_search_terms,$isFT,$canTag,$app,$data)."							") : ("<ul class='ipsForm_horizontal'>
									<li class='ipsField ipsField_select'>
										<label class='ipsField_title' for='search_by'>{$this->lang->words['s_search_type']}</label>
										<p class='ipsField_content'>
											<select name='search_app_filters[$app][sortKey]' id='search_sort_by_{$app}' class='input_select' style='width:auto'>
											".$this->__f__d6c0af20b8fd2ac851c7384b33d958d9($filters,$msg,$current_app,$removed_search_terms,$isFT,$canTag,$app,$data)."											</select>
											<select name='search_app_filters[$app][sortDir]' id='search_sort_order_{$app}' class='input_select' style='width:auto'>
												<option value='0' " . ((!$this->request['search_app_filters'][$app]['sortDir']) ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_search_type_o_0']}</option>
												<option value='1' " . (($this->request['search_app_filters'][$app]['sortDir']) ? ("selected='selected'") : ("")) . ">{$this->lang->words['s_search_type_o_1']}</option>
											</select>
										</p>
									</li>
								</ul>")) . "
						</fieldset>") : ("")) . "
				</div>
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- searchResults --*/
function searchResults($results, $titlesOnly) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['searchResults'] ) )
{
$count_55d309ffaffe5f3d873934d3cc50105e = is_array($this->functionData['searchResults']) ? count($this->functionData['searchResults']) : 0;
$this->functionData['searchResults'][$count_55d309ffaffe5f3d873934d3cc50105e]['results'] = $results;
$this->functionData['searchResults'][$count_55d309ffaffe5f3d873934d3cc50105e]['titlesOnly'] = $titlesOnly;
}

if ( ! isset( $this->registry->templateStriping['searchStripe'] ) ) {
$this->registry->templateStriping['searchStripe'] = array( FALSE, "row1","row2");
}
$IPBHTML .= "<div id='search_results'>
	<ol>
		" . ((is_array($results) && count($results)) ? ("
			".$this->__f__4215adf0a854f1e16f9ac49c5721821d($results,$titlesOnly)."		") : ("")) . "
	</ol>
</div>";
return $IPBHTML;
}


function __f__4215adf0a854f1e16f9ac49c5721821d($results, $titlesOnly)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $results as $result )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				" . (($result['sub']) ? ("
					<li class='" .  IPSLib::next( $this->registry->templateStriping["searchStripe"] ) . " sub clearfix clear'>
						{$result['html']}
					</li>
				") : ("
					<li class='" .  IPSLib::next( $this->registry->templateStriping["searchStripe"] ) . " clearfix clear'>
						{$result['html']}
					</li>
				")) . "
			
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- searchResultsAsForum --*/
function searchResultsAsForum($results, $titlesOnly) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['searchResultsAsForum'] ) )
{
$count_dec0f05f71ca36db1a6b0e58b51bfa76 = is_array($this->functionData['searchResultsAsForum']) ? count($this->functionData['searchResultsAsForum']) : 0;
$this->functionData['searchResultsAsForum'][$count_dec0f05f71ca36db1a6b0e58b51bfa76]['results'] = $results;
$this->functionData['searchResultsAsForum'][$count_dec0f05f71ca36db1a6b0e58b51bfa76]['titlesOnly'] = $titlesOnly;
}
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("forums", "0" ) . "
" . (($titlesOnly) ? ("
<script type='text/javascript' src='{$this->settings['public_dir']}js/ips.forums.js'></script>
<table class='ipb_table topic_list' id='forum_table'>
") : ("")) . "
	" . ((count($results)) ? ("" . ((!$titlesOnly) ? ("<div class='ipsBox'>") : ("")) . "
		".$this->__f__aa72402412adc917e7e0fba6efe9cc10($results,$titlesOnly)."		" . ((!$titlesOnly) ? ("</div>") : ("")) . "") : ("")) . "
" . (($titlesOnly) ? ("</table>
	" . (($this->memberData['g_is_supmod'] && $this->request['search_app_filters']['forums']['liveOrArchive'] != 'archive') ? ("
		<div id='topic_mod' class='moderation_bar rounded with_action clear'>
			<form id='modform' method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\">
				<fieldset>
					<input type=\"hidden\" name=\"app\" value=\"forums\" />
					<input type=\"hidden\" name=\"module\" value=\"moderate\" />
					<input type=\"hidden\" name=\"section\" value=\"moderate\" />
					<input type=\"hidden\" name=\"do\" value=\"topicchoice\" />
					<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
					<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
					<input type='hidden' name='fromSearch' value='1' />
					<input type='hidden' name='returnUrl' id='returnUrl' value='{$this->request['returnUrl']}' />
					<input type=\"hidden\" name=\"modfilter\" value=\"{$this->request['modfilter']}\" />
					<input type=\"hidden\" value=\"{$this->request['selectedtids']}\" id='selectedtids' name=\"selectedtids\" />
				
					<select name=\"tact\" id='mod_tact'>
						<option value='approve'>{$this->lang->words['cpt_approve_f']}</option>
						<option value='pin'>{$this->lang->words['cpt_pin_f']}</option>
						<option value='unpin'>{$this->lang->words['cpt_unpin_f']}</option>
						<option value='open'>{$this->lang->words['cpt_open_f']}</option>
						<option value='close'>{$this->lang->words['cpt_close_f']}</option>
						<option value='move'>{$this->lang->words['cpt_move_f']}</option>
						<option value='merge'>{$this->lang->words['cpt_merge_f']}</option>
						<option value='delete'>{$this->lang->words['cpt_hide_f']}</option>
						<option value='sundelete'>{$this->lang->words['cpt_unhide_f']}</option>
						<option value='deletedo'>{$this->lang->words['cpt_delete_f']}</option>
					</select>&nbsp;
					<input type=\"submit\" name=\"gobutton\" value=\"{$this->lang->words['f_go']}\" class=\"input_submit alt\" id='mod_submit' />
				</fieldset>
			</form>
			<script type='text/javascript'>
				/* Set return string */
				$('returnUrl').value = $('urlString').value;
				$('modform').observe('submit', ipb.forums.submitModForm);
				$('mod_tact').observe('change', ipb.forums.updateTopicModButton);
			</script>
		</div>
	") : ("")) . "") : ("<script type='text/javascript' src='{$this->settings['public_dir']}js/ips.topic.js'></script>
	<script type=\"text/javascript\">
		ipb.topic.inSection = 'searchview';
	</script>
	" . (($this->memberData['g_is_supmod'] && $this->request['search_app_filters']['forums']['liveOrArchive'] != 'archive') ? ("
	<div id='topic_mod_2' class='moderation_bar rounded'>
		<form method=\"post\" id=\"modform\" name=\"modform\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\">
			<fieldset>
				<input type=\"hidden\" name=\"app\" value=\"forums\" />
	 			<input type=\"hidden\" name=\"module\" value=\"moderate\" />
	 			<input type=\"hidden\" name=\"section\" value=\"moderate\" />
	 			<input type=\"hidden\" name=\"do\" value=\"postchoice\" />
	 			<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
	 			<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
	 			<input type=\"hidden\" value=\"{$this->request['selectedpids']}\" name=\"selectedpidsJS\" id='selectedpidsJS' />
				<input type='hidden' name='fromSearch' value='1' />
				<input type='hidden' name='returnUrl' id='returnUrl' value='{$this->request['returnUrl']}' />
				<select name=\"tact\" class=\"input_select\" id='topic_moderation'>
					<option value='approve'>{$this->lang->words['cpt_approve']}</option>
					<option value='delete'>{$this->lang->words['cpt_hide']}</option>
					<option value='sundelete'>{$this->lang->words['cpt_undelete']}</option>
					<option value='deletedo'>{$this->lang->words['cpt_delete']}</option>
					<option value='merge'>{$this->lang->words['cpt_merge']}</option>
					<option value='split'>{$this->lang->words['cpt_split']}</option>
					<option value='move'>{$this->lang->words['cpt_move']}</option>
				</select>&nbsp;
				<input type=\"submit\" value=\"{$this->lang->words['jmp_go']}\" class=\"input_submit alt\" />
			</fieldset>
		</form>
		
		<script type='text/javascript'>
			/* Set return string */
			$('returnUrl').value = $('urlString').value;
			$('modform').observe('submit', ipb.topic.submitPostModeration );
		</script>
	</div>
	") : ("")) . "
	" . ((!$this->settings['disable_lightbox']) ? ("
		" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'include_lightbox' ) ? $this->registry->getClass('output')->getTemplate('global')->include_lightbox() : '' ) . "
	") : ("")) . "")) . "";
return $IPBHTML;
}


function __f__aa72402412adc917e7e0fba6efe9cc10($results, $titlesOnly)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $results as $result )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			{$result['html']}
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- searchResultsWrapper --*/
function searchResultsWrapper($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['searchResultsWrapper'] ) )
{
$count_9f8446f9eb14b073ebfb82f9c54f59f4 = is_array($this->functionData['searchResultsWrapper']) ? count($this->functionData['searchResultsWrapper']) : 0;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['results'] = $results;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['sortDropDown'] = $sortDropDown;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['sortIn'] = $sortIn;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['pagination'] = $pagination;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['total'] = $total;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['showing'] = $showing;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['search_term'] = $search_term;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['url_string'] = $url_string;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['current_key'] = $current_key;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['removed_search_terms'] = $removed_search_terms;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['limited'] = $limited;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['wasLimited'] = $wasLimited;
$this->functionData['searchResultsWrapper'][$count_9f8446f9eb14b073ebfb82f9c54f59f4]['search_tags'] = $search_tags;
}
$IPBHTML .= "<input type='hidden' name=\"usedInJsLater\" id=\"urlString\" value=\"" . base64_encode( $this->registry->output->buildUrl( "{$url_string}&amp;search_app={$current_key}", "public" ) ) . "\" />
<h1 class='ipsType_pagetitle'>{$this->lang->words['search_results']}</h1>
<div class='ipsType_pagedesc'>
	" . (($total > 0 AND $search_term != '') ? ("" . (($limited AND $wasLimited) ? ("
			" . sprintf( $this->lang->words['your_search_limited'], $search_term, $limited ) . "
		") : ("
			{$this->lang->words['your_search']} <em><strong>{$search_term}</strong></em> {$this->lang->words['your_search_returned']} <strong>{$total}</strong> {$this->lang->words['your_search_results']}
		")) . "") : ("" . (($total > 0 AND $search_tags != '') ? ("
			" . sprintf( $this->lang->words['tag_search_results'], $total, $search_tags ) . "
		") : ("")) . "")) . "
</div>
<br />
<div class='ipsLayout ipsLayout_withleft clearfix'>
	<div class='ipsLayout_left'>
		<div class='ipsBox'>
			<div class='ipsBox_container ipsSideMenu'>
				<h4>{$this->lang->words['filter_by_app']}</h4>
				<ul>
					" . ((IPSLib::appIsSearchable( 'forums', 'search' )) ? ("<li " . (($this->request['search_app'] == 'forums') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app=forums", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'forums' ) . "</a></li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'members', 'search' )) ? ("<li " . (($this->request['search_app'] == 'members') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app=members", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'members' ) . "</a></li>") : ("")) . "" . ((IPSLib::appIsSearchable( 'core', 'search' )) ? ("<li " . (($this->request['search_app'] == 'core') ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app=core", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( 'core' ) . "</a></li>") : ("")) . "".$this->__f__31a3431c9cfadf2b47bdba8dcf0858e5($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."				</ul>
			
				" . ((is_array($sortIn) AND count( $sortIn )) ? ("
					<h4>{$this->lang->words['filter_by_section']}</h4>
					<ul>
						".$this->__f__5562e825fbfca8f417aca582bee3146a($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."					</ul>
				") : ("")) . "
			</div>
		</div>
	</div>
	<div class='ipsLayout_content'>		
		<div class='clearfix'>
			{$pagination}
		</div>
		<div class='maintitle ipsFilterbar'>
			" . (($this->memberData['g_is_supmod'] == 1 && IPSSearchRegistry::get('config.can_moderate_results')) ? ("
				<span class='right'>
					<input type='checkbox' id='tmod_all' class='input_check' title='{$this->lang->words['search_select_all']}' value='1' />
				</span>
			") : ("")) . "		
			" . ((IPSSearchRegistry::get('config.contentTypes') AND is_array( IPSSearchRegistry::get('config.contentTypes') )) ? ("" . ((count($sortDropDown)) ? ("<span class='ipsType_small'>{$this->lang->words['sort_by']}</span>&nbsp;&nbsp;
					" . ((count($sortDropDown) <= 4) ? ("
						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
							".$this->__f__fae5679a632a77fcb4b48315865ccff9($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."						</ul>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					") : ("
						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
							<li class='active'>
								<a href='#' id='search_sort' class='ipbmenu'>{$sortDropDown[ $this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortKey'] ]} &nbsp;&nbsp;<span class='submenu_indicator'></span>&nbsp;</a>
							</li>
						</ul>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					")) . "") : ("")) . "
				<span class='ipsType_small'>{$this->lang->words['order']}</span>&nbsp;&nbsp;
				<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
					<li " . (($this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortDir'] == 0) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortKey]={$this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortDir]=0", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_0']}</a>
					</li>
					<li " . (($this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortDir'] == 1) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortKey]={$this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortDir]=1", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_1']}</a>
					</li>
				</ul>") : ("" . ((count($sortDropDown)) ? ("<span class='ipsType_small'>{$this->lang->words['sort_by']}</span>&nbsp;&nbsp;
					" . ((count($sortDropDown) <= 4) ? ("
						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
							".$this->__f__f8038ad7b8dfed04b77bbd1521159cb7($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."						</ul>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					") : ("
						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
							<li class='active'>
								<a href='#' id='search_sort' class='ipbmenu'>{$sortDropDown[ $this->request['search_app_filters'][$current_key]['sortKey'] ]} &nbsp;&nbsp;<span class='submenu_indicator'></span>&nbsp;</a>
							</li>
						</ul>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					")) . "") : ("")) . "
				<span class='ipsType_small'>{$this->lang->words['order']}</span>&nbsp;&nbsp;
				<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
					<li " . (($this->request['search_app_filters'][$current_key]['sortDir'] == 0) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][sortKey]={$this->request['search_app_filters'][$current_key]['sortKey']}&amp;search_app_filters[$current_key][sortDir]=0", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_0']}</a>
					</li>
					<li " . (($this->request['search_app_filters'][$current_key]['sortDir'] == 1) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][sortKey]={$this->request['search_app_filters'][$current_key]['sortKey']}&amp;search_app_filters[$current_key][sortDir]=1", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_1']}</a>
					</li>
				</ul>")) . "
		</div>
		" . ((count($sortDropDown) && count($sortDropDown) >= 5) ? ("<!-- The menu for changing the sort field -->
			<ul id='search_sort_menucontent' class='ipbmenu_content with_checks' style='display: none'>
				" . ((IPSSearchRegistry::get('config.contentTypes') AND is_array( IPSSearchRegistry::get('config.contentTypes') )) ? ("".$this->__f__fabc55ff4bc1b40c06b87dc31c2bf5d1($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."				") : ("".$this->__f__e6b5b3feced8fe2cdd2fbbec6feec583($results,$sortDropDown,$sortIn,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms,$limited,$wasLimited,$search_tags)."				")) . "
			</ul>") : ("")) . "
		<div class='ipsBox_container'>
			" . (($total) ? ("
				{$results}
			") : ("<p class='no_messages'>{$this->lang->words['no_results_found']}" . (($search_term) ? (" {$this->lang->words['no_results_found_for']} '{$search_term}'") : ("")) . ".</p>")) . "
		</div>
		<div class='clearfix'>
			{$pagination}
		</div>
	</div>
</div>";
return $IPBHTML;
}


function __f__31a3431c9cfadf2b47bdba8dcf0858e5($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $this->registry->getApplications() as $app )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						" . ((IPSLib::appIsSearchable( $app['app_directory'], 'search' ) AND !in_array( $app['app_directory'], array('core','forums','members') )) ? ("<li " . (($this->request['search_app'] == $app['app_directory']) ? ("class='active'") : ("")) . "><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$app['app_directory']}", "public",'' ), "", "" ) . "'>" . IPSLib::getAppTitle( $app['app_directory'] ) . "</a></li>") : ("")) . "
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__5562e825fbfca8f417aca582bee3146a($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortIn as $id => $_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							<li " . (($this->request['search_app_filters'][$this->request['search_app']]['searchInKey'] == $_data[0]) ? ("class='active'") : ("")) . ">
								<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$_data['0']}", "public",'' ), "", "" ) . "'>{$_data[1]}</a>
							</li>
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__fae5679a632a77fcb4b48315865ccff9($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
								<li " . (($this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortKey'] == $k) ? ("class='active'") : ("")) . ">
									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortKey]={$k}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortDir]={$this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
								</li>
							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__f8038ad7b8dfed04b77bbd1521159cb7($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
								<li " . (($this->request['search_app_filters'][$current_key]['sortKey'] == $k) ? ("class='active'") : ("")) . ">
									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][sortKey]={$k}&amp;search_app_filters[$current_key][sortDir]={$this->request['search_app_filters'][$current_key]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
								</li>
							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__fabc55ff4bc1b40c06b87dc31c2bf5d1($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						<li " . (($this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortKey'] == $k) ? ("class='selected'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortKey]={$k}&amp;search_app_filters[$current_key][{$this->request['search_app_filters'][$current_key]['searchInKey']}][sortDir]={$this->request['search_app_filters'][$current_key][$this->request['search_app_filters'][$current_key]['searchInKey']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
						</li>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__e6b5b3feced8fe2cdd2fbbec6feec583($results, $sortDropDown, $sortIn, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array(), $limited=0, $wasLimited=false, $search_tags)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						<li " . (($this->request['search_app_filters'][$current_key]['sortKey'] == $k) ? ("class='selected'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$url_string}&amp;search_app={$current_key}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[$current_key][sortKey]={$k}&amp;search_app_filters[$current_key][sortDir]={$this->request['search_app_filters'][$current_key]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
						</li>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- searchRowGenericFormat --*/
function searchRowGenericFormat($r, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['searchRowGenericFormat'] ) )
{
$count_a9bae31c682d8f28e8379f6ca10def73 = is_array($this->functionData['searchRowGenericFormat']) ? count($this->functionData['searchRowGenericFormat']) : 0;
$this->functionData['searchRowGenericFormat'][$count_a9bae31c682d8f28e8379f6ca10def73]['r'] = $r;
$this->functionData['searchRowGenericFormat'][$count_a9bae31c682d8f28e8379f6ca10def73]['resultAsTitle'] = $resultAsTitle;
}
$IPBHTML .= "<div class='result_info'>
	<h3>{$r['content_title']}</h3>
	" . ((!$resultAsTitle) ? ("
	<p>
		{$r['content']}
	</p>
	") : ("")) . "
</div>
" . (($r['updated'] OR $r['member_id']) ? ("<div class='result_details desc'>
		<ul>
			" . (($r['updated']) ? ("
				<li>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</li>
			") : ("")) . "" . (($r['member_id']) ? ("
				<li>{$this->lang->words['search_by']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", "public",'' ), "{$r['members_seo_name']}", "showuser" ) . "'>{$r['members_display_name']}</a></li>
			") : ("")) . "
		</ul>
	</div>") : ("")) . "";
return $IPBHTML;
}

/* -- topicPostSearchResultAsForum --*/
function topicPostSearchResultAsForum($data, $resultAsTitle=false) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['topicPostSearchResultAsForum'] ) )
{
$count_818193509c16ca83f673959594b2e133 = is_array($this->functionData['topicPostSearchResultAsForum']) ? count($this->functionData['topicPostSearchResultAsForum']) : 0;
$this->functionData['topicPostSearchResultAsForum'][$count_818193509c16ca83f673959594b2e133]['data'] = $data;
$this->functionData['topicPostSearchResultAsForum'][$count_818193509c16ca83f673959594b2e133]['resultAsTitle'] = $resultAsTitle;
}
$IPBHTML .= "" . (($resultAsTitle) ? ("
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('search'), 'asForumTopics' ) ? $this->registry->getClass('output')->getTemplate('search')->asForumTopics($data) : '' ) . "
") : ("
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('search'), 'asForumPosts' ) ? $this->registry->getClass('output')->getTemplate('search')->asForumPosts($data) : '' ) . "
")) . "";
return $IPBHTML;
}

/* -- userPostsView --*/
function userPostsView($results, $pagination, $total, $member, $limited=0, $wasLimited=false, $beginTime=0, $sortIn=null, $sortDropDown=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_search', $this->_funcHooks['userPostsView'] ) )
{
$count_70e21d277fdad2816f4df0d797caae39 = is_array($this->functionData['userPostsView']) ? count($this->functionData['userPostsView']) : 0;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['results'] = $results;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['pagination'] = $pagination;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['total'] = $total;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['member'] = $member;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['limited'] = $limited;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['wasLimited'] = $wasLimited;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['beginTime'] = $beginTime;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['sortIn'] = $sortIn;
$this->functionData['userPostsView'][$count_70e21d277fdad2816f4df0d797caae39]['sortDropDown'] = $sortDropDown;
}

$datecut		= ( $this->settings['search_ucontent_days'] ) ? $this->registry->class_localization->getDate( time() - ( 86400 * intval( $this->settings['search_ucontent_days'] ) ), 'joined' ) : 0;
$IPBHTML .= "<h2 class='ipsType_pagetitle'>" . sprintf( $this->lang->words['s_participation_title'], $member['members_display_name'] ) . "</h2>
<input type='hidden' name=\"usedInJsLater\" id=\"urlString\" value=\"" . base64_encode( $this->registry->output->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;search_app={$this->request['search_app']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;sid={$this->request['_sid']}", "public" ) ) . "\" />
" . (($total) ? ("<p class='ipsType_pagedesc'>
			" . sprintf( $this->lang->words['s_participation_msg'], $total, $member['members_display_name'] ) . "" . (($datecut) ? ("
				<span class='desc lighter'>" . sprintf( $this->lang->words['s_participation_range'], $datecut ) . "</span>
			") : ("")) . "
		</p>
	<br />") : ("")) . "
<div class='ipsLayout clearfix'>
	<div class='ipsLayout_content'>
		" . (($pagination) ? ("
			<div class='topic_controls'>
				{$pagination}
			</div>
			<br />
		") : ("")) . "
		<div class='maintitle ipsFilterbar'>
			" . ((IPSSearchRegistry::get('config.contentTypes') AND is_array( IPSSearchRegistry::get('config.contentTypes') )) ? ("" . ((count($sortDropDown)) ? ("<div style=\"border-bottom:1px solid #DD8888; padding-bottom:4px;\">
    				<span class='ipsType_small'>{$this->lang->words['sort_by']}</span>&nbsp;&nbsp;
    					" . ((count($sortDropDown) <= 4) ? ("
    						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
    							".$this->__f__3d29f1a714dd2fd977c4960b134eb608($results,$pagination,$total,$member,$limited,$wasLimited,$beginTime,$sortIn,$sortDropDown)."    						</ul>
    						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    					") : ("
    						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
    							<li class='active'>
    								<a href='#' id='search_sort' class='ipbmenu'>{$sortDropDown[ $this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortKey'] ]} &nbsp;&nbsp;<span class='submenu_indicator'></span>&nbsp;</a>
    							</li>
    						</ul>
    						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    					")) . "
    				</div>") : ("")) . "
				<span class='ipsType_small'>{$this->lang->words['order']}</span>&nbsp;&nbsp;
				<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
					<li " . (($this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortDir'] == 0) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortKey]={$this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortDir]=0", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_0']}</a>
					</li>
					<li " . (($this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortDir'] == 1) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortKey]={$this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortDir]=1", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_1']}</a>
					</li>
				</ul>") : ("" . ((count($sortDropDown)) ? ("<div style=\"border-bottom:1px solid #DD8888; padding-bottom:4px;\">
    					<span class='ipsType_small'>{$this->lang->words['sort_by']}</span>&nbsp;&nbsp;
    					" . ((count($sortDropDown) <= 4) ? ("
    						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
    							".$this->__f__7487e17acbd832892d0f78642ba6ebcb($results,$pagination,$total,$member,$limited,$wasLimited,$beginTime,$sortIn,$sortDropDown)."    						</ul>
    						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    					") : ("
    						<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
    							<li class='active'>
    								<a href='#' id='search_sort' class='ipbmenu'>{$sortDropDown[ $this->request['search_app_filters'][$this->request['search_app']]['sortKey'] ]} &nbsp;&nbsp;<span class='submenu_indicator'></span>&nbsp;</a>
    							</li>
    						</ul>
    						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    					")) . "
    				</div>") : ("")) . "
				<span class='ipsType_small'>{$this->lang->words['order']}</span>&nbsp;&nbsp;
				<ul class='ipsList_inline ipsType_smaller' style='display: inline'>
					<li " . (($this->request['search_app_filters'][$this->request['search_app']]['sortDir'] == 0) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][sortKey]={$this->request['search_app_filters'][$this->request['search_app']]['sortKey']}&amp;search_app_filters[{$this->request['search_app']}][sortDir]=0", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_0']}</a>
					</li>
					<li " . (($this->request['search_app_filters'][$this->request['search_app']]['sortDir'] == 1) ? ("class='active'") : ("")) . ">
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][sortKey]={$this->request['search_app_filters'][$this->request['search_app']]['sortKey']}&amp;search_app_filters[{$this->request['search_app']}][sortDir]=1", "public",'' ), "", "" ) . "'>{$this->lang->words['s_search_type_o_1']}</a>
					</li>
				</ul>")) . "
		</div>
		" . ((count($sortDropDown) && count($sortDropDown) >= 5) ? ("<!-- The menu for changing the sort field -->
			<ul id='search_sort_menucontent' class='ipbmenu_content with_checks' style='display: none'>
				" . ((IPSSearchRegistry::get('config.contentTypes') AND is_array( IPSSearchRegistry::get('config.contentTypes') )) ? ("".$this->__f__4bbadd4967f48467aa901736ebd9bcc9($results,$pagination,$total,$member,$limited,$wasLimited,$beginTime,$sortIn,$sortDropDown)."				") : ("".$this->__f__2d13fe0c726ee38ad2598bc7f1ea8d04($results,$pagination,$total,$member,$limited,$wasLimited,$beginTime,$sortIn,$sortDropDown)."				")) . "
			</ul>") : ("")) . "
		<div>
			" . (($total) ? ("
				{$results}
				<br />
				{$pagination}
			") : ("
				<p class='no_messages'>{$this->lang->words['user_posts_none']}</p>
			")) . "
		</div>
	</div>
</div>";
return $IPBHTML;
}


function __f__3d29f1a714dd2fd977c4960b134eb608($results, $pagination, $total, $member, $limited=0, $wasLimited=false, $beginTime=0, $sortIn=null, $sortDropDown=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
    								<li " . (($this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortKey'] == $k) ? ("class='active'") : ("")) . ">
    									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;search_app={$this->request['search_app']}&amp;userMode={$this->request['userMode']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortKey]={$k}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortDir]={$this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
    								</li>
    							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__7487e17acbd832892d0f78642ba6ebcb($results, $pagination, $total, $member, $limited=0, $wasLimited=false, $beginTime=0, $sortIn=null, $sortDropDown=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
    								<li " . (($this->request['search_app_filters'][$this->request['search_app']]['sortKey'] == $k) ? ("class='active'") : ("")) . ">
    									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][sortKey]={$k}&amp;search_app_filters[{$this->request['search_app']}][sortDir]={$this->request['search_app_filters'][$this->request['search_app']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
    								</li>
    							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__4bbadd4967f48467aa901736ebd9bcc9($results, $pagination, $total, $member, $limited=0, $wasLimited=false, $beginTime=0, $sortIn=null, $sortDropDown=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						<li " . (($this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortKey'] == $k) ? ("class='selected'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;search_app={$this->request['search_app']}&amp;userMode={$this->request['userMode']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortKey]={$k}&amp;search_app_filters[{$this->request['search_app']}][{$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}][sortDir]={$this->request['search_app_filters'][$this->request['search_app']][$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
						</li>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__2d13fe0c726ee38ad2598bc7f1ea8d04($results, $pagination, $total, $member, $limited=0, $wasLimited=false, $beginTime=0, $sortIn=null, $sortDropDown=array())
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $sortDropDown as $k => $l )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
						<li " . (($this->request['search_app_filters'][$this->request['search_app']]['sortKey'] == $k) ? ("class='selected'") : ("")) . ">
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=search&amp;do=user_activity&amp;sid={$this->request['_sid']}&amp;mid={$this->request['mid']}&amp;userMode={$this->request['userMode']}&amp;search_app={$this->request['search_app']}&amp;search_app_filters[{$this->request['search_app']}][searchInKey]={$this->request['search_app_filters'][$this->request['search_app']]['searchInKey']}&amp;search_app_filters[{$this->request['search_app']}][sortKey]={$k}&amp;search_app_filters[{$this->request['search_app']}][sortDir]={$this->request['search_app_filters'][$this->request['search_app']]['sortDir']}", "public",'' ), "", "" ) . "'>{$l}</a>
						</li>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}


}


/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>